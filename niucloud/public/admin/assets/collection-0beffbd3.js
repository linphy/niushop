import{d as $,O as j,f as D,r as b,n as S,h,c as U,e as t,w as l,a as e,u as a,t as r,N as o,i as _,y as O,I as E,B as q,cJ as J,an as L,ao as W,_ as X,W as Y,X as A,E as G,Y as H,ah as K,aj as M,a4 as Q,$ as Z}from"./index-1d549745.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                     *//* empty css                  *//* empty css                *//* empty css               *//* empty css                     */import{b as ee,c as te}from"./marketing-2e804786.js";const ae={class:"main-container"},oe={class:"flex justify-between items-center"},se={class:"detail-head !m-0"},le=e("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),ne={class:"ml-[1px]"},ie=e("span",{class:"adorn"},"|",-1),re={class:"right"},ce={class:"mt-[10px]"},pe={class:"statistic-card"},de={class:"statistic-footer"},ue={class:"footer-item text-[14px] text-[#666]"},_e={class:"statistic-card"},me={class:"statistic-footer"},ve={class:"footer-item text-[14px] text-[#666]"},fe={class:"statistic-card"},xe={class:"statistic-footer"},be={class:"footer-item text-[14px] text-[#666]"},he={class:"mt-[10px]"},ge={class:"flex flex-col"},Ce={class:"text-[12px] mt-[5px]"},ye={class:"text-[12px] mt-[5px]"},we={class:"mt-[16px] flex justify-end"},We=$({__name:"collection",setup(ke){const I=j(),g=D(),C=parseInt(I.query.id),y=b(!1),s=S({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{keywords:""}}),w=b(),d=b([]),u=()=>{s.loading=!0,ee({page:s.page,limit:s.limit,id:C,...s.searchParam}).then(c=>{s.loading=!1,s.data=c.data.data,s.total=c.data.total}).catch(()=>{s.loading=!1}),te(C).then(c=>{d.value=c.data,y.value=!1}).catch(()=>{y.value=!1})};u();const N=c=>{g.push("/shop/order/detail?order_id="+c.trade_id)},P=c=>{c&&(c.resetFields(),u())};return(c,i)=>{const m=J,v=L,T=W,f=X,z=Y,k=A,x=G,R=H,p=K,V=M,B=Q,F=Z;return h(),U("div",ae,[t(f,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[e("div",oe,[e("div",se,[e("div",{class:"left",onClick:i[0]||(i[0]=n=>a(g).push("/shop/marketing/coupon/list"))},[le,e("span",ne,r(a(o)("returnToPreviousPage")),1)]),ie,e("span",re,r(a(o)("collectionCoupon")),1)])]),e("div",ce,[t(f,{class:"box-card !border-none base-bg !px-[35px]",shadow:"never"},{default:l(()=>[t(T,{class:"flex"},{default:l(()=>[t(v,{span:8,class:"min-w-[100px]"},{default:l(()=>[e("div",pe,[t(m,{value:d.value.receive_count?Number.parseInt(d.value.receive_count):"0"},null,8,["value"]),e("div",de,[e("div",ue,[e("span",null,r(a(o)("receiveCount")),1)])])])]),_:1}),t(v,{span:8,class:"min-w-[100px]"},{default:l(()=>[e("div",_e,[t(m,{value:d.value.receive_use_count?Number.parseInt(d.value.receive_use_count):"0"},null,8,["value"]),e("div",me,[e("div",ve,[e("span",null,r(a(o)("receiveUseCount")),1)])])])]),_:1}),t(v,{span:8,class:"min-w-[100px]"},{default:l(()=>[e("div",fe,[t(m,{value:d.value.receive_expire_count?Number.parseInt(d.value.receive_expire_count):"0"},null,8,["value"]),e("div",xe,[e("div",be,[e("span",null,r(a(o)("receiveExpireCount")),1)])])])]),_:1})]),_:1})]),_:1})]),e("div",null,[t(f,{class:"box-card !border-none mb-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[t(R,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:w},{default:l(()=>[t(k,{label:a(o)("memberInfo"),prop:"keywords"},{default:l(()=>[t(z,{modelValue:s.searchParam.keywords,"onUpdate:modelValue":i[1]||(i[1]=n=>s.searchParam.keywords=n),class:"w-[240px]",placeholder:a(o)("memberInfoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(k,null,{default:l(()=>[t(x,{type:"primary",onClick:i[2]||(i[2]=n=>u())},{default:l(()=>[_(r(a(o)("search")),1)]),_:1}),t(x,{onClick:i[3]||(i[3]=n=>P(w.value))},{default:l(()=>[_(r(a(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e("div",he,[O((h(),E(V,{data:s.data,ref:"tableRef",size:"large"},{empty:l(()=>[e("span",null,r(s.loading?"":a(o)("emptyData")),1)]),default:l(()=>[t(p,{prop:"title",label:a(o)("title")},null,8,["label"]),t(p,{label:a(o)("userName")},{default:l(({row:n})=>[e("div",ge,[e("span",Ce,r(n.member.nickname),1),e("span",ye,r(n.member.mobile),1)])]),_:1},8,["label"]),t(p,{prop:"receive_type_name",label:a(o)("receiveType")},null,8,["label"]),t(p,{prop:"create_time",label:a(o)("createTime")},null,8,["label"]),t(p,{prop:"expire_time",label:a(o)("expireTime")},null,8,["label"]),t(p,{prop:"status_name",label:a(o)("status")},null,8,["label"]),t(p,{label:a(o)("useTime")},{default:l(({row:n})=>[_(r(n.use_time||"未使用"),1)]),_:1},8,["label"]),t(p,{prop:"expire_time",label:a(o)("expireTime")},null,8,["label"]),t(p,{label:a(o)("operation"),fixed:"right",align:"right"},{default:l(({row:n})=>[n.use_time!=0?(h(),E(x,{key:0,type:"primary",link:"",onClick:Ee=>N(n)},{default:l(()=>[_(r(a(o)("showOrder")),1)]),_:2},1032,["onClick"])):q("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[F,s.loading]]),e("div",we,[t(B,{"current-page":s.page,"onUpdate:current-page":i[4]||(i[4]=n=>s.page=n),"page-size":s.limit,"onUpdate:page-size":i[5]||(i[5]=n=>s.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:i[6]||(i[6]=n=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])])]),_:1})])}}});export{We as default};
