import{d as P,v as z,l as U,r as x,h as y,c as L,e as a,w as i,a as c,t as s,u as l,i as m,k as t,J as S,m as j,S as I,ai as M,P as R,E as G,D as H,G as J,H as K,K as q,$ as A,a0 as O,a1 as Q,L as W}from"./index-785a2eda.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{r as X,s as Y,t as Z}from"./web-85ae47a1.js";import{_ as ee}from"./nav-edit.vue_vue_type_style_index_0_lang-5cf95134.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./web-link.vue_vue_type_style_index_0_lang-82dc78b5.js";const te={class:"main-container"},ae={class:"flex justify-between items-center"},le={class:"text-lg"},ne={class:"mt-[10px]"},oe={class:"mt-[16px] flex justify-end"},Ve=P({__name:"nav",setup(ie){const k=z().meta.title,n=U({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{nav_title:""}}),v=x(null),d=(r=1)=>{n.loading=!0,n.page=r,X({page:n.page,limit:n.limit,...n.searchParam}).then(o=>{n.loading=!1,n.data=o.data.data,n.total=o.data.total}).catch(()=>{n.loading=!1})};d();const _=x(null),w=()=>{_.value.setFormData(),_.value.showDialog=!0},C=r=>{_.value.setFormData(r),_.value.showDialog=!0},E=r=>{I.confirm(t("navDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Y(r).then(()=>{d()}).catch(()=>{})})},N={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},T=M((r,o)=>{if(isNaN(r)||!N.number.test(r)){R({type:"warning",message:`${t("sortTips")}`});return}r>99999999&&(o.sort=99999999),Z({id:o.id,sort:r}).then(u=>{d()})}),B=r=>{r&&(r.resetFields(),d())};return(r,o)=>{const u=G,f=H,h=J,D=K,b=q,p=A,$=O,V=Q,F=W;return y(),L("div",te,[a(b,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[c("div",ae,[c("span",le,s(l(k)),1),a(u,{type:"primary",onClick:w},{default:i(()=>[m(s(l(t)("addNav")),1)]),_:1})]),a(b,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[a(D,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:v},{default:i(()=>[a(h,{label:l(t)("navTitle"),prop:"nav_title"},{default:i(()=>[a(f,{modelValue:n.searchParam.nav_title,"onUpdate:modelValue":o[0]||(o[0]=e=>n.searchParam.nav_title=e),placeholder:l(t)("navTitlePlaceholder"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,null,{default:i(()=>[a(u,{type:"primary",onClick:o[1]||(o[1]=e=>d())},{default:i(()=>[m(s(l(t)("search")),1)]),_:1}),a(u,{onClick:o[2]||(o[2]=e=>B(v.value))},{default:i(()=>[m(s(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",ne,[S((y(),j($,{data:n.data,size:"large"},{empty:i(()=>[c("span",null,s(n.loading?"":l(t)("emptyData")),1)]),default:i(()=>[a(p,{prop:"nav_title",label:l(t)("navTitle"),"min-width":"120"},null,8,["label"]),a(p,{prop:"nav_url",label:l(t)("navUrl"),"min-width":"120"},{default:i(({row:e})=>[c("div",null,s(e.nav_url?e.nav_url.url:""),1)]),_:1},8,["label"]),a(p,{prop:"sort",label:l(t)("sort"),"min-width":"120"},{default:i(({row:e})=>[a(f,{modelValue:e.sort,"onUpdate:modelValue":g=>e.sort=g,modelModifiers:{trim:!0},class:"!w-[70px]",maxlength:"8",onBlur:g=>l(T)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),a(p,{label:l(t)("isBlank"),"min-width":"180",align:"center"},{default:i(({row:e})=>[m(s(e.is_blank==1?l(t)("yes"):l(t)("no")),1)]),_:1},8,["label"]),a(p,{label:l(t)("createTime"),"min-width":"180",align:"center"},{default:i(({row:e})=>[m(s(e.create_time||""),1)]),_:1},8,["label"]),a(p,{label:l(t)("isShow"),"min-width":"180",align:"center"},{default:i(({row:e})=>[m(s(e.is_show==1?l(t)("show"):l(t)("hidden")),1)]),_:1},8,["label"]),a(p,{label:l(t)("operation"),fixed:"right","min-width":"120",align:"right"},{default:i(({row:e})=>[a(u,{type:"primary",link:"",onClick:g=>C(e)},{default:i(()=>[m(s(l(t)("edit")),1)]),_:2},1032,["onClick"]),a(u,{type:"primary",link:"",onClick:g=>E(e.id)},{default:i(()=>[m(s(l(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[F,n.loading]]),c("div",oe,[a(V,{"current-page":n.page,"onUpdate:current-page":o[3]||(o[3]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":o[4]||(o[4]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:o[5]||(o[5]=e=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),a(ee,{ref_key:"editNavDialog",ref:_,onComplete:d},null,512)]),_:1})])}}});export{Ve as default};
