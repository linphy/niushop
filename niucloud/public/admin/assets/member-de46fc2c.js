import{d as C,r as v,l as h,k as r,h as x,c as N,e as s,w as d,J as B,m as D,a as u,t as g,u as n,bj as F,i as M,D as I,G as R,H as $,K as k,E as H,L as P}from"./index-785a2eda.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{a0 as j,a1 as K}from"./member-c401cd2a.js";const L={class:"main-container"},S={class:"panel-title !text-sm"},T={class:"form-tip"},U={class:"text-lg"},q={class:"fixed-footer-wrap"},z={class:"fixed-footer"},le=C({__name:"member",setup(A){const m=v(!0),i=v({}),_=v(""),b=h({prefix:[{validator:(a,e,l)=>{e&&!/^[a-zA-Z]*$/g.test(e)?l(new Error(r("prefixHint"))):l()},trigger:"blur"}],length:[{required:!0,message:r("lengthPlaceholder"),trigger:["blur","change"]},{validator:(a,e,l)=>{parseInt(e)>30||parseInt(e)-t.prefix.length<4?l(new Error(r("lengthHint"))):l()},trigger:"blur"}]}),t=h({prefix:"",length:10});(async()=>{const a=await(await j()).data;Object.keys(t).forEach(e=>{a[e]!=null&&(t[e]=a[e])}),f(i.value),m.value=!1})();const f=async a=>{await a.validate(e=>{if(e){let l="";const p=t.length-t.prefix.length-1;for(let c=1;c<=p;c++)l+="0";_.value=t.prefix+l+"1"}})},w=async a=>{m.value||!a||await a.validate(e=>{e&&K(t).then(()=>{m.value=!1,f(i.value)}).catch(()=>{m.value=!1})})};return(a,e)=>{const l=I,p=R,c=$,V=k,y=H,E=P;return x(),N("div",L,[s(V,{class:"box-card !border-none",shadow:"never"},{default:d(()=>[B((x(),D(c,{class:"page-form",model:t,"label-width":"150px",ref_key:"ruleFormRef",ref:i,rules:b},{default:d(()=>[u("h3",S,g(n(r)("memberNoRule")),1),s(p,{label:n(r)("prefix"),prop:"prefix"},{default:d(()=>[s(l,{modelValue:t.prefix,"onUpdate:modelValue":e[0]||(e[0]=o=>t.prefix=o),modelModifiers:{trim:!0},placeholder:n(r)("prefixPlaceholder"),class:"input-width",clearable:"",maxlength:"20",onChange:e[1]||(e[1]=o=>f(i.value))},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(p,{label:n(r)("length"),prop:"length"},{default:d(()=>[s(l,{modelValue:t.length,"onUpdate:modelValue":e[2]||(e[2]=o=>t.length=o),modelModifiers:{trim:!0},placeholder:n(r)("lengthPlaceholder"),class:"input-width",clearable:"",onKeyup:e[3]||(e[3]=o=>n(F)(o)),onChange:e[4]||(e[4]=o=>f(i.value)),onBlur:e[5]||(e[5]=o=>t.length=o.target.value)},null,8,["modelValue","placeholder"]),u("div",T,g(n(r)("lengthTips")),1)]),_:1},8,["label"]),s(p,null,{default:d(()=>[u("div",U,g(_.value),1)]),_:1})]),_:1},8,["model","rules"])),[[E,m.value]])]),_:1}),u("div",q,[u("div",z,[s(y,{type:"primary",onClick:e[6]||(e[6]=o=>w(i.value))},{default:d(()=>[M(g(n(r)("save")),1)]),_:1})])])])}}});export{le as default};
