import{d as oe,M as le,r as V,l as se,h as X,c as Y,a as m,b as ae,u as v,i as B,t as T,k as y,e as W,w as C,aC as O,z as ie,F as S,O as P,B as R,aK as N,P as j,al as ne,E as fe,G as ce,H as pe,V as ue,p as de,g as re}from"./index-ac08d87d.js";/* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-d1dc26ab.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-d887aeaf.js";/* empty css                  */import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css                 */import"./diy-bb1bdac0.js";const ge=F=>(de("data-v-3a9a8710"),F=F(),re(),F),ve={key:0,class:"cursor-pointer"},xe={class:"text-primary p-[4px]"},ye={key:1,class:"cursor-pointer"},be={class:"flex"},we=["id","onMousedown"],ke=ge(()=>m("span",{class:"p-[4px]"},"|",-1)),Me=["onMousedown"],Te=["onMousedown"],He=["onMousedown"],Xe=["onMousedown"],Ye={class:"mb-[10px] text-lg text-black"},Le={class:"overflow-y-auto h-[300px]"},Ve={key:0,class:"mb-[16px]"},We={class:"flex items-center"},Ce={class:"dialog-footer"},Ee=oe({__name:"index",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(F,{expose:G,emit:K}){const q=F,H=le({get(){return q.modelValue},set(h){K("update:modelValue",h)}}),E=V(!1),b=V(400),g=V(400),u=se([]),$=V(1),J=V(.25),A=V(100),D=V(100),U=V(4),z=()=>{let h=u.length%U.value*A.value,i=Math.floor(u.length/U.value)*D.value,c=i+D.value/2;(i>=g.value||c>=g.value)&&(i=0,h=0),u.push({left:h,top:i,width:A.value,height:D.value,unit:"px",link:{name:""}})},Q=(h,i)=>{const c=document.getElementById("box_"+i),o=h.clientX-c.offsetLeft,M=h.clientY-c.offsetTop;document.onmousemove=function(r){c.style.left=r.clientX-o+"px",c.style.top=r.clientY-M+"px",r.clientX-o<0&&(c.style.left=0),r.clientX-o>b.value-c.offsetWidth&&(c.style.left=b.value-c.offsetWidth+"px"),r.clientY-M<0&&(c.style.top=0),r.clientY-M>g.value-c.offsetHeight&&(c.style.top=g.value-c.offsetHeight+"px"),u[i].left=c.offsetLeft,u[i].top=c.offsetTop,u[i].width=c.offsetWidth,u[i].height=c.offsetHeight,u[i].unit="px"},document.onmouseup=function(r){document.onmousemove=null}},I=(h,i)=>{const c=h;c.stopPropagation();const o=document.getElementById("box_"+i),M=h.target.className,r=o.offsetWidth,L=o.offsetHeight,x=c.clientX,p=c.clientY,f=o.offsetLeft,n=o.offsetTop,l=50,s=50;document.onmousemove=function(te){const d=te;if(M=="box1"){let e=r-(d.clientX-x);const w=b.value;let t=L-(d.clientY-p);const k=g.value-n;let a=f+(d.clientX-x),_=n+(d.clientY-p);e<l&&(e=l),e>w&&(e=w),t<s&&(t=s),t>k&&(t=k),f==0&&n==0?e==l&&t==s?(a=l,_=s):e==l&&t>s?a=l:e>l&&t==s&&(_=s):f==0&&n>0?e==l&&t==s||e==l&&t>s?(a=l,_=o.offsetTop):e>l&&t==s&&(_=o.offsetTop):f>0&&n==0?e==l&&t==s?(a=o.offsetLeft,_=o.offsetTop):e==l&&t>s?(a=o.offsetLeft,_=0):e>l&&t==s&&(_=o.offsetTop):f>0&&n>0&&(e==l&&t==s||e==l&&t>s?(a=o.offsetLeft,_=o.offsetTop):e>l&&t==s&&(_=o.offsetTop)),a<0&&(a=0,e=r-(d.clientX-x)+(f+(d.clientX-x))),_<0&&(_=0,t=n+(d.clientY-p)+(L-(d.clientY-p))),o.style.width=e+"px",o.style.height=t+"px",o.style.left=a+"px",o.style.top=_+"px"}else if(M=="box2"){let e=r+(d.clientX-x);const w=b.value-f;let t=L-(d.clientY-p);const k=g.value-n;let a=n+(d.clientY-p);e<l&&(e=l),e>w&&(e=w),t<s&&(t=s),t>k&&(t=k),f==0&&n==0?e==l&&t==s?a=s:e==l&&t>s||e>l&&t==s&&(a=s):f==0&&n>0?(e==l&&t==s||e==l&&t>s||e>l&&t==s)&&(a=o.offsetTop):f>0&&n==0?e==l&&t==s?a=o.offsetTop:e==l&&t>s?a=0:e>l&&t==s&&(a=o.offsetTop):f>0&&n>0&&(e==l&&t==s||e==l&&t>s||e>l&&t==s)&&(a=o.offsetTop),a<0&&(a=0,t=n+(d.clientY-p)+(L-(d.clientY-p))),o.style.width=e+"px",o.style.height=t+"px",o.style.top=a+"px"}else if(M=="box3"){let e=r-(d.clientX-x);const w=b.value;let t=L+(d.clientY-p);const k=g.value-n;let a=f+(d.clientX-x);e<l&&(e=l),e>w&&(e=w),t<s&&(t=s),t>k&&(t=k),f==0&&n==0||f==0&&n>0?(e==l&&t==s||e==l&&t>s)&&(a=l):f>0&&n==0?(e==l&&t==s||e==l&&t>s)&&(a=o.offsetLeft):f>0&&n>0&&(e==l&&t==s||e==l&&t>s)&&(a=o.offsetLeft),a<0&&(a=0,e=r-(d.clientX-x)+(f+(d.clientX-x))),o.style.width=e+"px",o.style.height=t+"px",o.style.left=a+"px"}else if(M=="box4"){let e=r+(d.clientX-x);const w=b.value-f;let t=L+(d.clientY-p);const k=g.value-n;e<l&&(e=l),e>w&&(e=w),t<s&&(t=s),t>k&&(t=k),o.style.width=e+"px",o.style.height=t+"px"}u[i].left=o.offsetLeft,u[i].top=o.offsetTop,u[i].width=o.offsetWidth,u[i].height=o.offsetHeight,u[i].unit="px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},Z=()=>{if(!H.value.imageUrl){j({type:"warning",message:`${y("imageUrlTip")}`});return}$.value=H.value.imgHeight/H.value.imgWidth,g.value=Math.floor(b.value*$.value),A.value=Math.floor(J.value*g.value),D.value=A.value,U.value=Math.floor(b.value/A.value),Object.keys(H.value.heatMapData).length?u.splice(0,u.length,...H.value.heatMapData):(u.splice(0,u.length),z()),E.value=!0},ee=()=>{let h=!0;for(let i=0;i<u.length;i++)if(!u[i].link.title){j({type:"warning",message:y("selectedHotArea")+(i+1)+y("hotAreaLink")}),h=!1;break}h&&(u.forEach((i,c)=>{const o=document.getElementById("box_"+c);i.width=parseFloat(o.offsetWidth/b.value*100).toFixed(2),i.height=parseFloat(o.offsetHeight/g.value*100).toFixed(2),i.left=parseFloat(o.offsetLeft/b.value*100).toFixed(2),i.top=parseFloat(o.offsetTop/g.value*100).toFixed(2),i.unit="%"}),H.value.heatMapData=ne(u),E.value=!1)};return G({showDialog:E}),(h,i)=>{const c=fe,o=me,M=he,r=ce,L=pe,x=ue;return X(),Y("div",null,[m("div",{onClick:Z},[ae(h.$slots,"default",{},()=>[v(H).heatMapData.length?(X(),Y("div",ve,[B(T(v(y)("selected")),1),m("span",xe,T(v(H).heatMapData.length),1),B(T(v(y)("selectedAfterHotArea")),1)])):(X(),Y("div",ye,T(v(y)("addHotArea")),1))],!0)]),W(x,{modelValue:E.value,"onUpdate:modelValue":i[1]||(i[1]=p=>E.value=p),title:v(y)("hotAreaSet"),width:"810px","destroy-on-close":!0,"close-on-click-modal":!1},{footer:C(()=>[m("span",Ce,[W(c,{onClick:i[0]||(i[0]=p=>E.value=!1)},{default:C(()=>[B(T(v(y)("cancel")),1)]),_:1}),W(c,{type:"primary",onClick:ee},{default:C(()=>[B(T(v(y)("confirm")),1)]),_:1})])]),default:C(()=>[m("div",be,[m("div",{class:"hot-area-img-wrap content-box relative bg-gray-100 border border-dashed border-gray-500 bg-no-repeat",style:O({backgroundImage:"url("+v(ie)(v(H).imageUrl)+")",width:b.value+"px",height:g.value+"px"})},[(X(!0),Y(S,null,P(u,(p,f)=>(X(),Y("div",{id:"box_"+f,key:f,class:"area-box border border-solid border-[#ccc] w-[100px] h-[100px] absolute top-0 left-0 select-none p-[5px]",style:O({left:p.left+p.unit,top:p.top+p.unit,width:p.width+p.unit,height:p.height+p.unit}),onMousedown:n=>Q(n,f)},[m("span",null,T(f+1),1),p.link.title?(X(),Y(S,{key:0},[ke,m("span",null,T(p.link.title),1)],64)):R("",!0),m("span",{class:"box1",onMousedown:N(n=>I(n,f),["stop"])},null,40,Me),m("span",{class:"box2",onMousedown:N(n=>I(n,f),["stop"])},null,40,Te),m("span",{class:"box3",onMousedown:N(n=>I(n,f),["stop"])},null,40,He),m("span",{class:"box4",onMousedown:N(n=>I(n,f),["stop"])},null,40,Xe)],44,we))),128))],4),W(L,{"label-width":"80px",class:"pl-[20px]"},{default:C(()=>[m("h3",Ye,T(v(y)("hotAreaManage")),1),W(c,{type:"primary",plain:"",size:"small",class:"mb-[10px]",onClick:z},{default:C(()=>[B(T(v(y)("addHotArea")),1)]),_:1}),m("div",Le,[(X(!0),Y(S,null,P(u,(p,f)=>(X(),Y(S,{key:f},[p?(X(),Y("div",Ve,[W(r,{label:v(y)("hotArea")+(f+1)},{default:C(()=>[m("div",We,[W(o,{modelValue:p.link,"onUpdate:modelValue":n=>p.link=n},null,8,["modelValue","onUpdate:modelValue"]),W(M,{class:"del cursor-pointer mx-[10px]",name:"element CircleCloseFilled",color:"#bbb",size:"20px",onClick:n=>u.splice(f,1)},null,8,["onClick"])])]),_:2},1032,["label"])])):R("",!0)],64))),128))])]),_:1})])]),_:1},8,["modelValue","title"])])}}});const Re=_e(Ee,[["__scopeId","data-v-3a9a8710"]]);export{Re as default};
