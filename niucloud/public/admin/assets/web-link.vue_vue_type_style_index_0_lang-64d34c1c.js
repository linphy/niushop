import{d as z,M as Q,r as h,N as I,h as c,c as m,a as p,b as q,e as t,w as o,aK as H,u as r,m as U,k as i,i as P,t as y,F as w,O as B,n as F,Q as g,P as O,T as J,D as W,a5 as X,G as Z,E as ee,V as le}from"./index-e4c6b343.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                     *//* empty css                 */import{f as ae}from"./web-54fa4d5f.js";const te=["onClick"],oe={class:"flex items-start"},ne=["onClick"],se={class:"mb-[16px]"},re={class:"mb-[16px]"},ie=p("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/index/index",-1),ue=p("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“http”或“https”开头，例：https://baidu.com",-1),de={key:1,class:"flex flex-wrap"},ce=["onClick"],pe={class:"dialog-footer"},ge=z({__name:"web-link",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup($,{expose:j,emit:C}){const f=$,u=Q({get(){return f.modelValue},set(a){C("update:modelValue",a)}}),v=h(!1),d=h([]),s=h(""),b=h([]),e=h({}),A=()=>{K(()=>{if(u.value.name!=""){e.value=g(u.value),s.value=e.value.parent;for(let a in d.value)d.value[a].name==s.value&&E(d.value[a])}v.value=!0})},K=(a=null)=>{ae({}).then(n=>{if(d.value=n.data,f.ignore&&f.ignore.length){for(let k in d.value)for(let _=0;_<f.ignore.length;_++)if(k==f.ignore[_]){delete d.value[k];break}}b.value=Object.values(d.value)[0].child_list,u.value.name!=""?e.value=g(u.value):e.value={parent:Object.values(d.value)[0].name},s.value=e.value.parent,a&&a()})},E=a=>{b.value=a.child_list,s.value=a.name},M=a=>{delete a.is_share,e.value=g(a)},S=()=>{u.value={name:"",parent:"",title:"",url:""}},T=()=>{if(s.value==="DIY_LINK"){if(!e.value.title){O({message:i("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){O({message:i("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=s.value,e.value.name=s.value,e.value.action=""}else s.value=="DIY_PAGE"&&(e.value.parent=s.value,e.value.action="decorate");u.value=g(e.value),v.value=!1,C("success")};return j({showDialog:v}),(a,n)=>{const k=I("Close"),_=J,Y=I("ArrowRight"),V=W,N=X,x=Z,D=ee,G=le;return c(),m("div",null,[p("div",{onClick:A},[q(a.$slots,"default",{},()=>[t(V,{modelValue:r(u).title,"onUpdate:modelValue":n[0]||(n[0]=l=>r(u).title=l),placeholder:r(i)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:o(()=>[p("div",{onClick:H(S,["stop"])},[r(u).name?(c(),U(_,{key:0},{default:o(()=>[t(k)]),_:1})):(c(),U(_,{key:1},{default:o(()=>[t(Y)]),_:1}))],8,te)]),_:1},8,["modelValue","placeholder"])])]),t(G,{modelValue:v.value,"onUpdate:modelValue":n[4]||(n[4]=l=>v.value=l),title:r(i)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:o(()=>[p("span",pe,[t(D,{onClick:n[3]||(n[3]=l=>v.value=!1)},{default:o(()=>[P(y(r(i)("cancel")),1)]),_:1}),t(D,{type:"primary",onClick:T},{default:o(()=>[P(y(r(i)("confirm")),1)]),_:1})])]),default:o(()=>[p("div",oe,[t(N,{class:"w-[140px] border-r h-[350px]"},{default:o(()=>[(c(!0),m(w,null,B(d.value,(l,L)=>(c(),m("div",{key:L,class:F(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==s.value?"bg-primary-light-9 text-primary":""]]),onClick:R=>E(l)},y(l.title),11,ne))),128))]),_:1}),t(N,{class:"pl-4 h-[350px] flex-1"},{default:o(()=>[s.value=="DIY_LINK"?(c(),m(w,{key:0},[p("div",se,[t(x,{label:r(i)("diyLinkName")},{default:o(()=>[t(V,{modelValue:e.value.title,"onUpdate:modelValue":n[1]||(n[1]=l=>e.value.title=l),placeholder:r(i)("diyLinkNamePlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",re,[t(x,{label:r(i)("diyLinkUrl")},{default:o(()=>[t(V,{modelValue:e.value.url,"onUpdate:modelValue":n[2]||(n[2]=l=>e.value.url=l),placeholder:r(i)("diyLinkUrlPlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),t(x,{label:" "},{default:o(()=>[ie]),_:1}),t(x,{label:" "},{default:o(()=>[ue]),_:1})],64)):(c(),m("div",de,[(c(!0),m(w,null,B(b.value,(l,L)=>(c(),m("div",{key:L,class:F(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==e.value.name?"border-primary text-primary":""]]),onClick:R=>M(l)},y(l.title),11,ce))),128))]))]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{ge as _};
