import{d as I,r as v,l as P,M as G,Q as _,h as m,m as x,w as i,a as u,e as n,i as g,u as k,aK as H,c as w,F,O as D,t as T,P as K,D as L,G as Q,H as z,b2 as J,E as W,V as X}from"./index-785a2eda.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                 *//* empty css                */import"./el-form-item-4ed993c7.js";import{_ as Y}from"./add-theme.vue_vue_type_script_setup_true_lang-69f83d06.js";import{u as Z}from"./diy-9f040720.js";const ee={class:"form-tip"},le={class:"flex items-center"},ae=["onClick"],te=["onClick"],oe={class:"form-tip"},re=u("span",{class:"mr-[3px]"},"+",-1),ie=u("span",null,"新增颜色",-1),ne=[re,ie],se=u("div",{class:"form-tip"},"新增颜色key值不能与当前的存在的key值重复",-1),ue={class:"dialog-footer"},ge=I({__name:"edit-theme",emits:["confirm"],setup(de,{expose:$,emit:U}){const V=Z(),d=v(!1),y=v(null),l=P({title:"",mark:"",diy_value:[],default:{},data:{}}),E=v(),B=G(()=>({title:[{required:!0,message:"请输入色调名称",trigger:"blur"}]})),b=[{title:"主色调",label:"--primary-color",value:"#333333",tip:"主色调在uiapp中使用：var(--primary-color)"},{title:"辅色调",label:"--primary-help-color",value:"#333333",tip:"辅色调在uiapp中使用：var(--primary-help-color)"},{title:"页面背景色",label:"--page-bg-color",value:"#ffffff",tip:"页面背景色在uiapp中使用：var(--page-bg-color)"},{title:"主色调浅色（淡）",label:"--primary-color-light",value:"",tip:"主色调浅色（淡）在uiapp中使用：var(--primary-color-light)"},{title:"主色调浅色（深）",label:"--primary-color-light2",value:"",tip:"主色调浅色（深）在uiapp中使用：var(--primary-color-light2)"},{title:"灰色调",label:"--primary-color-dark",value:"#cccccc",tip:"灰色调在uiapp中使用：var(--primary-color-dark)"},{title:"禁用色",label:"--primary-color-disabled",value:"#dddddd",tip:"禁用色在uiapp中使用：var(--primary-color-disabled)"},{title:"价格颜色",label:"--price-text-color",value:"#333333",tip:"价格颜色在uiapp中使用：var(--price-text-color)"}],s=v([..._(b)]),R=a=>{Object.keys(l).forEach(e=>{l[e]=a[e]!=null?_(a[e]):""}),s.value.forEach((e,o)=>{b.forEach((r,p)=>{e.label==r.label&&(e.value=r.value)})}),s.value.forEach((e,o)=>{e.value=a.data[e.label]?a.data[e.label]:e.value}),console.log(s.value,l),d.value=!0},j=()=>{const a=[];s.value.forEach((o,r)=>{a.push(o.label)});const e={key:a};y.value.open(e)},S=a=>{const e=[];s.value.forEach((r,p)=>{e.push(r.label)});const o={key:e,data:a};y.value.open(o)},M=a=>{let e=-1;for(let o=0;o<l.diy_value.length;o++)l.diy_value[o].label==a.label&&(e=o);e>-1&&l.diy_value.splice(e,1)},N=a=>{for(let e=0;e<l.diy_value.length;e++)if(l.diy_value[e].label==a.label){l.diy_value[e]=a;return}l.diy_value.push(a)},O=()=>{l.default&&Object.keys(l.default).length?s.value.forEach((a,e)=>{a.value=_(l.default[a.label])}):s.value=_(b),l.diy_value=[],l.mark=="diy"&&(l.title=""),K({message:"重置成功",type:"success"})},q=async a=>{a&&await a.validate(async e=>{if(e){const o={theme:{},diy_value:[],title:""};o.title=l.title,s.value.forEach((r,p)=>{o.theme[r.label]=r.value}),l.diy_value.forEach((r,p)=>{o.theme[r.label]=r.value}),o.diy_value=l.diy_value||[],U("confirm",o),d.value=!1}})};return $({dialogThemeVisible:d,open:R}),(a,e)=>{const o=L,r=Q,p=z,C=J,h=W,A=X;return m(),x(A,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),title:"编辑色调",width:"850px","align-center":"","destroy-on-close":"true"},{footer:i(()=>[u("div",ue,[n(h,{onClick:e[2]||(e[2]=t=>d.value=!1)},{default:i(()=>[g("取消")]),_:1}),n(h,{type:"primary",plain:"",onClick:e[3]||(e[3]=t=>O())},{default:i(()=>[g("重置")]),_:1}),n(h,{type:"primary",onClick:e[4]||(e[4]=t=>q(E.value))},{default:i(()=>[g("保存")]),_:1})])]),default:i(()=>[n(p,{model:l,"label-width":"150px",rules:k(B)},{default:i(()=>[n(r,{label:"色调名称",prop:"title"},{default:i(()=>[n(o,{modelValue:l.title,"onUpdate:modelValue":e[0]||(e[0]=t=>l.title=t),placeholder:"请输入色调名称",maxlength:"15",class:"!w-[250px]",disabled:l.mark!="diy"},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model","rules"]),n(p,{model:s.value,"label-width":"150px",class:"h-[640px] overflow-auto",ref_key:"formRef",ref:E,onSubmit:e[1]||(e[1]=H(()=>{},["prevent"]))},{default:i(()=>[(m(!0),w(F,null,D(s.value,(t,f)=>(m(),x(r,{label:t.title,key:f,prop:`${f}.value`,rules:[{required:!0,message:`请选择${t.title}色调`,trigger:"blur"}]},{default:i(()=>[n(C,{modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,"show-alpha":"",predefine:k(V).predefineColors},null,8,["modelValue","onUpdate:modelValue","predefine"]),u("div",ee,T(t.tip),1)]),_:2},1032,["label","prop","rules"]))),128)),(m(!0),w(F,null,D(l.diy_value,(t,f)=>(m(),x(r,{label:t.title,key:f},{default:i(()=>[u("div",le,[n(C,{modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,"show-alpha":"",predefine:k(V).predefineColors},null,8,["modelValue","onUpdate:modelValue","predefine"]),u("span",{class:"text-primary cursor-pointer text-[14px] ml-[20px]",onClick:c=>S(t)},"编辑",8,ae),u("span",{class:"text-primary cursor-pointer text-[14px] ml-[8px]",onClick:c=>M(t)},"删除",8,te)]),u("div",oe,T(t.tip),1)]),_:2},1032,["label"]))),128)),n(r,null,{default:i(()=>[u("div",{class:"flex items-center text-primary cursor-pointer text-[14px]",onClick:j},ne),se]),_:1})]),_:1},8,["model"]),n(Y,{ref_key:"addThemeRef",ref:y,onConfirm:N},null,512)]),_:1},8,["modelValue"])}}});export{ge as _};
