import{d as C,r as v,q as E,N as i,h as B,I as F,w as t,a as f,e as n,i as b,t as g,u as r,W as U,X as R,Y as q,E as $,aa as w}from"./index-a2233f8b.js";/* empty css                   *//* empty css                  *//* empty css                */import{_ as L}from"./index-58cd4749.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{s as P}from"./order-828c3db7.js";const S={class:"dialog-footer"},J=C({__name:"invoice-dialog",emits:["complete"],setup(T,{expose:V,emit:k}){const u=v(!1),o=v({invoice_number:"",remark:"",invoice_voucher:""}),m=v(!1);let d=0;const y=async(l=null)=>{l&&(d=l.id,o.value.invoice_number=l.invoice_number,o.value.remark=l.remark,o.value.invoice_voucher=l.invoice_voucher)},I=async l=>{m.value||!l||await l.validate(async e=>{if(e){m.value=!0;const s=o.value;P(d,s).then(c=>{k("complete"),u.value=!1,m.value=!1}).catch(()=>{m.value=!1})}})},p=v(),x=E(()=>({invoice_number:[{required:!0,message:i("invoiceNumberPlaceholder"),trigger:"blur"}]}));return V({invoiceDialog:u,setInvoiceData:y}),(l,e)=>{const s=U,c=R,D=L,N=q,_=$,h=w;return B(),F(h,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),title:r(i)("invoice"),width:"420px"},{footer:t(()=>[f("span",S,[n(_,{onClick:e[3]||(e[3]=a=>u.value=!1)},{default:t(()=>[b(g(r(i)("cancel")),1)]),_:1}),n(_,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=a=>I(p.value))},{default:t(()=>[b(g(r(i)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[f("div",null,[n(N,{model:o.value,ref_key:"makeInvoiceFormRef",ref:p,rules:r(x),"label-width":"80px","label-position":"left"},{default:t(()=>[n(c,{label:r(i)("invoiceNumber"),prop:"invoice_number"},{default:t(()=>[n(s,{modelValue:o.value.invoice_number,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.invoice_number=a),minlength:"150"},null,8,["modelValue"])]),_:1},8,["label"]),n(c,{label:r(i)("invoiceVoucher"),prop:"invoice_voucher"},{default:t(()=>[n(D,{modelValue:o.value.invoice_voucher,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.invoice_voucher=a)},null,8,["modelValue"])]),_:1},8,["label"]),n(c,{label:r(i)("remark"),prop:"remark"},{default:t(()=>[n(s,{modelValue:o.value.remark,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.remark=a),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])}}});export{J as _};
