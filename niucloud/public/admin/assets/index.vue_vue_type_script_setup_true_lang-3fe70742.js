import{_ as b}from"./index.vue_vue_type_style_index_0_lang-8b6f9720.js";import{d as U,r as o,M as V,aM as k,h as w,c as D,e as r,u as m,aU as H,bb as x,F as S,z as c}from"./index-ac08d87d.js";const F=U({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"simple"},height:{type:Number,default:600}},emits:["update:modelValue","handleBlur"],setup(f,{emit:g}){const i=f,p=o(),l=o(null),s=o(null),a=V({get(){return i.modelValue},set(e){g("update:modelValue",e)}});let t=null;const u={};u.token=k();const _="/adminapi/".substr(-1)=="/"?"/adminapi/":"/adminapi//",h=o({debug:!1,UEDITOR_HOME_URL:"/admin/ueditor/",UEDITOR_CORS_URL:location.origin+"/admin/ueditor/",serverUrl:`${_}sys/ueditor`,serverHeaders:u,autoHeightEnabled:!1,initialFrameHeight:i.height,initialFrameWidth:"100%",wordCount:!0,toolbarCallback:function(e,n){switch(t=n,e){case"insertimage":return l.value.showDialog=!0,!0;case"insertvideo":return s.value.showDialog=!0,!0}}}),C=e=>{console.log("扩展原型链",e),e.getContentLength,e.getContentLength=function(){return e.getContent().replace(/[\s\u3000]+/g,"").length}},R=e=>{e.forEach(n=>{t==null||t.execCommand("insertHtml",`<img src="${c(n.url)}">`)})},v=e=>{t==null||t.execCommand("insertHtml",`<video src="${c(e.url)}">`)};return(e,n)=>{const d=b;return w(),D(S,null,[r(d,{type:"image",ref_key:"imageRef",ref:l,limit:"",onConfirm:R},null,512),r(d,{type:"video",ref_key:"videoRef",ref:s,onConfirm:v},null,512),r(m(x),{modelValue:m(a),"onUpdate:modelValue":n[0]||(n[0]=y=>H(a)?a.value=y:null),config:h.value,editorDependencies:["ueditor.config.js","ueditor.all.js"],ref_key:"editorRef",ref:p,onReady:C},null,8,["modelValue","config","editorDependencies"])],64)}}});export{F as _};
