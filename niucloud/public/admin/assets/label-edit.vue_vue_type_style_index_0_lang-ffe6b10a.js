import{d as F,r as p,n as k,q as B,N as t,h as g,I as V,w as r,a as C,e as d,i as w,t as y,u as o,y as I,cM as P,W as U,X as R,Y as $,E as j,aa as q,$ as O}from"./index-1d549745.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 */import{t as K,v as M,w as S}from"./goods-af228f6a.js";const T={class:"dialog-footer"},Z=F({__name:"label-edit",emits:["complete"],setup(W,{expose:h,emit:x}){const m=p(!1),n=p(!1),c=p(""),_={label_id:"",label_name:"",memo:"",sort:""},l=k({..._}),b=p(),D=B(()=>({label_name:[{required:!0,message:t("labelNamePlaceholder"),trigger:"blur"}]})),N=async i=>{if(n.value||!i)return;const e=l.label_id?K:M;await i.validate(async s=>{s&&(n.value=!0,e(l).then(f=>{n.value=!1,m.value=!1,x("complete")}).catch(f=>{n.value=!1}))})};return h({showDialog:m,setFormData:async(i=null)=>{if(Object.assign(l,_),n.value=!0,i){const e=await(await S(i.label_id)).data;c.value=t("updateLabel"),e&&Object.keys(l).forEach(s=>{e[s]!=null&&(l[s]=e[s])})}else c.value=t("addLabel");n.value=!1}}),(i,e)=>{const s=U,u=R,f=$,v=j,E=q,L=O;return g(),V(E,{modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=a=>m.value=a),title:c.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:r(()=>[C("span",T,[d(v,{onClick:e[4]||(e[4]=a=>m.value=!1)},{default:r(()=>[w(y(o(t)("cancel")),1)]),_:1}),d(v,{type:"primary",loading:n.value,onClick:e[5]||(e[5]=a=>N(b.value))},{default:r(()=>[w(y(o(t)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[I((g(),V(f,{model:l,"label-width":"120px",ref_key:"formRef",ref:b,rules:o(D),class:"page-form"},{default:r(()=>[d(u,{label:o(t)("labelName"),prop:"label_name"},{default:r(()=>[d(s,{modelValue:l.label_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.label_name=a),clearable:"",placeholder:o(t)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(t)("memo")},{default:r(()=>[d(s,{modelValue:l.memo,"onUpdate:modelValue":e[1]||(e[1]=a=>l.memo=a),type:"textarea",clearable:"",placeholder:o(t)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(t)("sort")},{default:r(()=>[d(s,{modelValue:l.sort,"onUpdate:modelValue":e[2]||(e[2]=a=>l.sort=a),clearable:"",placeholder:o(t)("sortPlaceholder"),class:"input-width",onKeyup:e[3]||(e[3]=a=>o(P)(a))},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[L,n.value]])]),_:1},8,["modelValue","title"])}}});export{Z as _};
