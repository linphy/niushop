import{d as M,v as S,f as $,l as R,r as j,bb as U,h as m,c as p,e as t,w as o,a as c,t as s,u as r,i as g,k as a,J as G,m as I,F as f,O as x,B as k,bc as K,S as q,E as H,D as J,G as O,H as A,K as Q,a0 as W,a1 as X,a2 as Y,L as Z}from"./index-e4c6b343.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{K as ee,L as te}from"./member-23fa123f.js";const ae={class:"main-container"},le={class:"flex justify-between items-center"},ne={class:"text-page-title"},oe={class:"mt-[10px]"},re={key:0},ie={key:0},se={class:"mt-[16px] flex justify-end"},Be=M({__name:"level",setup(me){const C=S(),b=$(),E=C.meta.title,e=R({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{level_name:""}}),h=j(),L=i=>{i&&(i.resetFields(),u())},u=(i=1)=>{e.loading=!0,e.page=i,ee({page:e.page,limit:e.limit,...e.searchParam}).then(l=>{e.loading=!1,e.data=l.data.data,e.total=l.data.total,K(e.page,e.limit,e.searchParam)}).catch(()=>{e.loading=!1})};u(U(e.searchParam).page);const P=()=>{b.push({path:"/member/level_edit"})},B=i=>{b.push({path:"/member/level_edit",query:{id:i.level_id}})},N=i=>{q.confirm(a("memberLevelDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{te(i).then(()=>{u()}).catch(()=>{})})};return(i,l)=>{const v=H,T=J,y=O,F=A,w=Q,_=W,V=X,z=Y,D=Z;return m(),p("div",ae,[t(w,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[c("div",le,[c("span",ne,s(r(E)),1),t(v,{type:"primary",onClick:P},{default:o(()=>[g(s(r(a)("addMemberLevel")),1)]),_:1})]),t(w,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[t(F,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:h},{default:o(()=>[t(y,{label:r(a)("levelName"),prop:"level_name"},{default:o(()=>[t(T,{modelValue:e.searchParam.level_name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.searchParam.level_name=n),modelModifiers:{trim:!0},placeholder:r(a)("levelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(y,null,{default:o(()=>[t(v,{type:"primary",onClick:l[1]||(l[1]=n=>u())},{default:o(()=>[g(s(r(a)("search")),1)]),_:1}),t(v,{onClick:l[2]||(l[2]=n=>L(h.value))},{default:o(()=>[g(s(r(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",oe,[G((m(),I(V,{data:e.data,size:"large"},{empty:o(()=>[c("span",null,s(e.loading?"":r(a)("emptyData")),1)]),default:o(()=>[t(_,{prop:"level_name",label:r(a)("levelName"),"min-width":"120"},null,8,["label"]),t(_,{prop:"growth",label:r(a)("growth"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("levelBenefits"),"min-width":"120","show-overflow-tooltip":!0},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,x(n.level_benefits,d=>(m(),p(f,null,[d.content?(m(),p("div",re,s(d.content),1)):k("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{label:r(a)("levelGifts"),"min-width":"120"},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,x(n.level_gifts,d=>(m(),p(f,null,[d.content?(m(),p("div",ie,s(d.content),1)):k("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{prop:"member_num",label:r(a)("memberNumber"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("operation"),align:"right",fixed:"right",width:"130"},{default:o(({row:n})=>[t(v,{type:"primary",link:"",onClick:d=>B(n)},{default:o(()=>[g(s(r(a)("edit")),1)]),_:2},1032,["onClick"]),t(v,{type:"primary",link:"",onClick:d=>N(n.level_id)},{default:o(()=>[g(s(r(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[D,e.loading]]),c("div",se,[t(z,{"current-page":e.page,"onUpdate:current-page":l[3]||(l[3]=n=>e.page=n),"page-size":e.limit,"onUpdate:page-size":l[4]||(l[4]=n=>e.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:l[5]||(l[5]=n=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Be as default};
