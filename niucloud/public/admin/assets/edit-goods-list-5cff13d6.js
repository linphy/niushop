import{d as F,r as v,n as U,v as O,h as p,c as A,y as S,z as k,u as e,a as l,t as i,N as s,A as E,e as n,w as a,i as u,I as C,B as w,aj as L,R as M,b as X,F as Y,ay as q,az as H,X as J,cC as K,Y as Q,ah as W,V as Z,E as ee,aa as oe,$ as te}from"./index-a2233f8b.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css               *//* empty css                *//* empty css                  *//* empty css                        *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{_ as le}from"./category_default-03996666.js";import{g as ae}from"./goods-b7f9d4bf.js";import{u as se}from"./diy-f5a44c69.js";import ne from"./goods-select-popup-ba8baf79.js";const re={class:"content-wrap"},ie={class:"edit-attr-item-wrap"},de={class:"mb-[10px]"},ce={class:"flex items-center mb-[18px] rounded overflow-hidden"},me={class:"edit-attr-item-wrap"},pe={class:"mb-[10px]"},ue={class:"flex items-center w-full"},_e={class:"text-[var(--el-color-primary)]"},ge=l("span",{class:"iconfont iconxiangyoujiantou"},null,-1),fe={class:"flex items-center w-full ml-[5px]"},ye={class:"ml-[15px]"},Ce={class:"order-2"},be={class:"h-[30px]"},he=l("div",{class:"image-slot"},[l("img",{class:"w-[30px] h-[30px]",src:le})],-1),xe={class:"flex items-center justify-end mt-[15px]"},ve={class:"style-wrap"},Se=F({__name:"edit-goods-list",setup(we,{expose:T}){const t=se();t.editComponent.ignore=[];const m=v(!1),d=U({loading:!0,data:[],searchParam:{category_name:""}});O(()=>{B()});const _=v();let g=null;const B=()=>{d.loading=!0,ae({...d.searchParam}).then(c=>{d.loading=!1,d.data=c.data,t.editComponent.source=="category"&&d.data.forEach((o,f)=>{t.editComponent.goods_category==o.category_id&&(h.value=o.category_name,g=o)})}).catch(()=>{d.loading=!1})};let b={};const h=v("请选择"),D=c=>{let o="";c&&(o=c[c.length-1]),c.length>1&&_.value.clearSelection(),o&&_.value.toggleRowSelection(o,!0),g=o,b=o},N=()=>{t.editComponent.goods_category=b.category_id,h.value=b.category_name,m.value=!1},P=()=>{m.value=!0,g&&setTimeout(()=>{_.value.toggleRowSelection(g,!0)},200)};return T({}),(c,o)=>{const f=q,R=H,y=J,j=K,z=Q,x=W,G=Z,V=ee,I=oe,$=te;return p(),A(Y,null,[S(l("div",re,[l("div",ie,[l("h3",de,i(e(s)("selectStyle")),1),l("div",ce,[l("span",{class:E(["iconfont icongudingzhanshi border-[1px] border-solid border-[#eee] cursor-pointer flex-1 flex items-center justify-center py-[5px]",{"border-[var(--el-color-primary)] text-[var(--el-color-primary)]":e(t).editComponent.style=="style1"}]),onClick:o[0]||(o[0]=r=>e(t).editComponent.style="style1")},null,2),l("span",{class:E(["iconfont icontuwendaohang3 border-[1px] border-solid border-[#eee] cursor-pointer flex-1 flex items-center justify-center py-[5px]",{"border-[var(--el-color-primary)] text-[var(--el-color-primary)]":e(t).editComponent.style=="style2"}]),onClick:o[1]||(o[1]=r=>e(t).editComponent.style="style2")},null,2)])]),l("div",me,[l("h3",pe,i(e(s)("selectSource")),1),n(z,{"label-width":"80px",class:"px-[10px]"},{default:a(()=>[n(y,{label:e(s)("goodsSelectPopupSelectGoodsButton")},{default:a(()=>[n(R,{modelValue:e(t).editComponent.source,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).editComponent.source=r),title:e(s)("goodsSelectPopupSelectGoodsButton"),class:"mb-[18px]"},{default:a(()=>[n(f,{label:"all"},{default:a(()=>[u(i(e(s)("goodsSelectPopupAllGoods")),1)]),_:1}),n(f,{label:"category"},{default:a(()=>[u(i(e(s)("selectCategory")),1)]),_:1}),n(f,{label:"custom"},{default:a(()=>[u(i(e(s)("manualSelectionSources")),1)]),_:1})]),_:1},8,["modelValue","title"])]),_:1},8,["label"]),e(t).editComponent.source=="category"?(p(),C(y,{key:0,label:e(s)("selectCategory")},{default:a(()=>[l("div",ue,[l("div",{class:"cursor-pointer ml-auto",onClick:P},[l("span",_e,i(h.value),1),ge])])]),_:1},8,["label"])):w("",!0),e(t).editComponent.source=="all"||e(t).editComponent.source=="category"?(p(),C(y,{key:1,label:e(s)("goodsNum")},{default:a(()=>[l("div",fe,[n(j,{class:"flex-1",modelValue:e(t).editComponent.num,"onUpdate:modelValue":o[3]||(o[3]=r=>e(t).editComponent.num=r),max:"20",size:"small"},null,8,["modelValue"]),l("span",ye,i(e(t).editComponent.num),1)])]),_:1},8,["label"])):w("",!0),e(t).editComponent.source=="custom"?(p(),C(y,{key:2,label:e(s)("customGoods")},{default:a(()=>[n(ne,{ref:"goodsSelectPopupRef",modelValue:e(t).editComponent.goods_ids,"onUpdate:modelValue":o[4]||(o[4]=r=>e(t).editComponent.goods_ids=r),min:1,max:99},null,8,["modelValue"])]),_:1},8,["label"])):w("",!0)]),_:1}),n(I,{modelValue:m.value,"onUpdate:modelValue":o[6]||(o[6]=r=>m.value=r),title:e(s)("goodsCategoryTitle"),width:"1000px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{default:a(()=>[S((p(),C(e(L),{data:d.data,ref_key:"categoryTableRef",ref:_,size:"large",height:"490px",onSelectionChange:D,"row-key":"category_id","tree-props":{hasChildren:"hasChildren",children:"child_list"}},{empty:a(()=>[l("span",null,i(d.loading?"":e(s)("emptyData")),1)]),default:a(()=>[n(x,{type:"selection",width:"55"}),n(x,{label:e(s)("categoryName"),"min-width":"120"},{default:a(({row:r})=>[l("span",Ce,i(r.category_name),1)]),_:1},8,["label"]),n(x,{label:e(s)("categoryImage"),width:"170",align:"left"},{default:a(({row:r})=>[l("div",be,[n(G,{class:"w-[30px] h-[30px]",src:e(M)(r.image),fit:"contain"},{error:a(()=>[he]),_:2},1032,["src"])])]),_:1},8,["label"])]),_:1},8,["data"])),[[$,d.loading]]),l("div",xe,[n(V,{type:"primary",onClick:N},{default:a(()=>[u(i(e(s)("confirm")),1)]),_:1}),n(V,{onClick:o[5]||(o[5]=r=>m.value=!1)},{default:a(()=>[u(i(e(s)("cancel")),1)]),_:1})])]),_:1},8,["modelValue","title"])])],512),[[k,e(t).editTab=="content"]]),S(l("div",ve,[X(c.$slots,"style")],512),[[k,e(t).editTab=="style"]])],64)}}}),qe=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));export{qe as _};
