import{d as we,O as Se,r as b,f as $e,n as T,a0 as Ge,h as m,c as k,e as o,w as r,a as i,t as c,u as n,i as p,N as t,F as D,G as L,I as P,y as w,co as I,R as Ie,B as oe,a3 as x,a8 as R,ax as Ne,cy as Oe,E as Ue,W as ze,X as Be,cI as De,as as Le,aE as Re,Y as Fe,_ as Ae,aC as je,aD as Me,aA as qe,ah as He,V as Je,a1 as Ke,aj as We,a4 as Xe,$ as Ye,p as Qe,g as Ze}from"./index-a2233f8b.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as ne}from"./goods_default-664bb559.js";import ea from"./goods-stock-edit-popup-5fccfcf9.js";import aa from"./goods-price-edit-popup-c478f6d3.js";import{_ as ta}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-20dc74fd.js";import{g as oa,a as la,J as sa,K as na,L as le,M as se,N as ra,O as da,P as ia}from"./goods-b7f9d4bf.js";import{_ as ca}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   */import"./browser-a1ac24ac.js";import"./sys-6f61a94e.js";const F=S=>(Qe("data-v-e31f22c7"),S=S(),Ze(),S),pa={class:"main-container"},ua={class:"flex justify-between items-center"},ma={class:"text-[20px]"},_a={class:"region-input"},ga=["placeholder"],ha=F(()=>i("span",{class:"separator"},"-",-1)),fa=["placeholder"],ba={class:"region-input"},va=["placeholder"],ya=F(()=>i("span",{class:"separator"},"-",-1)),ka=["placeholder"],Pa={class:"mt-[10px]"},xa={class:"mb-[10px] flex items-center"},Ca=["onClick"],Ea={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Va=F(()=>i("div",{class:"image-slot"},[i("img",{class:"w-[70px] h-[70px]",src:ne})],-1)),Ta={key:1,class:"w-[70px] h-[70px]",src:ne,fit:"contain"},wa={class:"ml-2"},Sa=["title"],$a={class:"text-primary text-[12px]"},Ga=["onClick"],Ia=["onClick"],Na={key:0},Oa={key:1},Ua={class:"mt-[16px] flex"},za={class:"flex items-center flex-1"},Ba=we({__name:"list",setup(S){const re=Se().meta.title,_=b(!1),N=$e(),l=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:"1",order:"",sort:""}}),A=b(),E={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},O=T([]),de={checkStrictly:!0},j=T([]),M=T([]),q=T([]);(()=>{oa().then(s=>{const e=s.data;if(e){const d=[];e.forEach(y=>{const h=[];y.child_list&&y.child_list.forEach(G=>{h.push({value:G.category_id,label:G.category_name})}),d.push({value:y.category_id,label:y.category_name,children:h})}),O.splice(0,O.length,...d)}}),la().then(s=>{const e=s.data;if(e)for(const d in e)j.push(e[d])}),sa({}).then(s=>{const e=s.data;e&&M.push(...e)}),na({}).then(s=>{const e=s.data;e&&q.push(...e)})})();const ie=(s,e)=>{l.searchParam.status=s.props.name,u()},C=b(),V=b(!1),H=s=>{V.value=!1,J.value.toggleAllSelection()},J=b(),v=b([]),ce=s=>{v.value=s,C.value=!1,v.value.length>0&&v.value.length<l.data.length?V.value=!0:V.value=!1,v.value.length==l.data.length&&(C.value=!0)},pe=s=>{const e=N.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${s.goods_id}`}});window.open(e.href)},ue=s=>{let e="";s.order=="ascending"?e="asc":s.order=="descending"&&(e="desc"),e&&(l.searchParam.order=s.prop,l.searchParam.sort=e),u()},K=(s,e)=>{le({goods_ids:s.goods_id,status:e}).then(d=>{u()})},$=s=>{if(v.value.length==0){x({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const e=[];v.value.forEach(d=>{e.push(d.goods_id)}),le({goods_ids:e,status:s}).then(d=>{u()})},W=()=>{if(v.value.length==0){x({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}R.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(_.value)return;_.value=!0;const s=[];v.value.forEach(e=>{s.push(e.goods_id)}),se({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1})})},me=Ne((s,e)=>{if(isNaN(s)||!E.number.test(s)){x({type:"warning",message:`${t("sortTips")}`});return}ia({goods_id:e.goods_id,sort:s}).then(d=>{})}),u=(s=1)=>{if(l.searchParam.start_sale_num&&!E.number.test(l.searchParam.start_sale_num)){x({type:"warning",message:`${t("startSaleNumTips")}`});return}if(l.searchParam.end_sale_num&&!E.number.test(l.searchParam.end_sale_num)){x({type:"warning",message:`${t("endSaleNumTips")}`});return}if(l.searchParam.start_price&&!E.digit.test(l.searchParam.start_price)){x({type:"warning",message:`${t("startPriceTips")}`});return}if(l.searchParam.end_price&&!E.digit.test(l.searchParam.end_price)){x({type:"warning",message:`${t("endPriceTips")}`});return}l.loading=!0,l.page=s;const e=Oe(l.searchParam);ra({page:l.page,limit:l.limit,...e}).then(d=>{l.loading=!1,l.data=d.data.data,l.total=d.data.total}).catch(()=>{l.loading=!1})};u();const _e=()=>{N.push("/shop/goods/real_edit")},ge=s=>{N.push(s.goods_edit_path+"?goods_id="+s.goods_id)},X=b(null),he=s=>{X.value.show(s)},Y=b(null),fe=s=>{Y.value.show(s)},Q=b(null),be=s=>{Q.value.show(s)},ve=s=>{R.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,da({goods_id:s.goods_id}).then(e=>{e.code==1&&u(),_.value=!1}).catch(e=>{_.value=!1}))})},ye=s=>{R.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,se({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1}))})},ke=s=>{s&&(s.resetFields(),u())};return(s,e)=>{const d=Ue,y=ze,h=Be,G=De,U=Le,z=Re,Pe=Fe,Z=Ae,B=je,xe=Me,ee=qe,f=He,Ce=Je,ae=Ge("EditPen"),te=Ke,Ee=We,Ve=Xe,Te=Ye;return m(),k("div",pa,[o(Z,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[i("div",ua,[i("span",ma,c(n(re)),1),o(d,{type:"primary",onClick:_e},{default:r(()=>[p(c(n(t)("addGoods")),1)]),_:1})]),o(Z,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[o(Pe,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:A},{default:r(()=>[o(h,{label:n(t)("goodsName"),prop:"goods_name"},{default:r(()=>[o(y,{modelValue:l.searchParam.goods_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.searchParam.goods_name=a),placeholder:n(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:n(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[o(G,{props:de,modelValue:l.searchParam.goods_category,"onUpdate:modelValue":e[1]||(e[1]=a=>l.searchParam.goods_category=a),options:O,placeholder:n(t)("goodsCategoryPlaceholder"),clearable:"",filterable:""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),o(h,{label:n(t)("goodsType"),prop:"goods_type"},{default:r(()=>[o(z,{modelValue:l.searchParam.goods_type,"onUpdate:modelValue":e[2]||(e[2]=a=>l.searchParam.goods_type=a),placeholder:n(t)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(m(!0),k(D,null,L(j,a=>(m(),P(U,{key:a.type,label:a.name,value:a.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:n(t)("brand"),prop:"brand_id"},{default:r(()=>[o(z,{modelValue:l.searchParam.brand_id,"onUpdate:modelValue":e[3]||(e[3]=a=>l.searchParam.brand_id=a),placeholder:n(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(m(!0),k(D,null,L(M,a=>(m(),P(U,{key:a.brand_id,label:a.brand_name,value:a.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:n(t)("labelIds"),prop:"label_ids"},{default:r(()=>[o(z,{modelValue:l.searchParam.label_ids,"onUpdate:modelValue":e[4]||(e[4]=a=>l.searchParam.label_ids=a),placeholder:n(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(m(!0),k(D,null,L(q,a=>(m(),P(U,{key:a.label_id,label:a.label_name,value:a.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:n(t)("saleNum"),prop:"sale_num"},{default:r(()=>[i("div",_a,[w(i("input",{type:"text",placeholder:n(t)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":e[5]||(e[5]=a=>l.searchParam.start_sale_num=a)},null,8,ga),[[I,l.searchParam.start_sale_num]]),ha,w(i("input",{type:"text",placeholder:n(t)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":e[6]||(e[6]=a=>l.searchParam.end_sale_num=a)},null,8,fa),[[I,l.searchParam.end_sale_num]])])]),_:1},8,["label"]),o(h,{label:n(t)("skuPrice")},{default:r(()=>[i("div",ba,[w(i("input",{type:"text",placeholder:n(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":e[7]||(e[7]=a=>l.searchParam.start_price=a)},null,8,va),[[I,l.searchParam.start_price]]),ya,w(i("input",{type:"text",placeholder:n(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":e[8]||(e[8]=a=>l.searchParam.end_price=a)},null,8,ka),[[I,l.searchParam.end_price]])])]),_:1},8,["label"]),o(h,null,{default:r(()=>[o(d,{type:"primary",onClick:e[9]||(e[9]=a=>u())},{default:r(()=>[p(c(n(t)("search")),1)]),_:1}),o(d,{onClick:e[10]||(e[10]=a=>ke(A.value))},{default:r(()=>[p(c(n(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Pa,[o(xe,{modelValue:l.searchParam.status,"onUpdate:modelValue":e[11]||(e[11]=a=>l.searchParam.status=a),class:"goods-tabs",onTabClick:ie},{default:r(()=>[o(B,{label:n(t)("statusOn"),name:"1"},null,8,["label"]),o(B,{label:n(t)("statusOff"),name:"0"},null,8,["label"]),o(B,{label:n(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),i("div",xa,[o(ee,{modelValue:C.value,"onUpdate:modelValue":e[12]||(e[12]=a=>C.value=a),size:"large",class:"px-[14px]",onChange:H,indeterminate:V.value},null,8,["modelValue","indeterminate"]),o(d,{onClick:e[13]||(e[13]=a=>$(1)),size:"small"},{default:r(()=>[p(c(n(t)("batchOnGoods")),1)]),_:1}),o(d,{onClick:e[14]||(e[14]=a=>$(0)),size:"small"},{default:r(()=>[p(c(n(t)("batchOffGoods")),1)]),_:1}),o(d,{onClick:W,size:"small"},{default:r(()=>[p(c(n(t)("batchDeleteGoods")),1)]),_:1})]),w((m(),P(Ee,{data:l.data,size:"large",ref_key:"goodsListTableRef",ref:J,onSortChange:ue,onSelectionChange:ce},{empty:r(()=>[i("span",null,c(l.loading?"":n(t)("emptyData")),1)]),default:r(()=>[o(f,{type:"selection",width:"55"}),o(f,{prop:"goods_id",label:n(t)("goodsInfo"),"min-width":"300"},{default:r(({row:a})=>[i("div",{class:"flex items-center cursor-pointer",onClick:g=>pe(a)},[i("div",Ea,[a.goods_cover_thumb_small?(m(),P(Ce,{key:0,class:"w-[70px] h-[70px]",src:n(Ie)(a.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Va]),_:2},1032,["src"])):(m(),k("img",Ta))]),i("div",wa,[i("span",{title:a.goods_name,class:"multi-hidden"},c(a.goods_name),9,Sa),i("span",$a,c(a.goods_type_name),1)])],8,Ca)]),_:1},8,["label"]),o(f,{prop:"price",label:n(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:a})=>[i("div",{class:"cursor-pointer price-wrap",onClick:g=>he(a)},[i("span",null,"￥"+c(a.goodsSku.price),1),o(te,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[o(ae)]),_:1})],8,Ga)]),_:1},8,["label"]),o(f,{prop:"stock",label:n(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:a})=>[i("div",{class:"cursor-pointer stock-wrap",onClick:g=>fe(a)},[i("span",null,c(a.stock),1),o(te,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[o(ae)]),_:1})],8,Ia)]),_:1},8,["label"]),o(f,{prop:"sale_num",label:n(t)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),o(f,{prop:"status",label:n(t)("status"),"min-width":"100"},{default:r(({row:a})=>[a.status==1?(m(),k("div",Na,c(n(t)("statusOn")),1)):oe("",!0),a.status==0?(m(),k("div",Oa,c(n(t)("statusOff")),1)):oe("",!0)]),_:1},8,["label"]),o(f,{prop:"sort",label:n(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:a})=>[o(y,{modelValue:a.sort,"onUpdate:modelValue":g=>a.sort=g,class:"input-width-sort",maxlength:"10",onInput:g=>n(me)(g,a)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),o(f,{prop:"create_time",label:n(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:a})=>[i("div",null,c(a.create_time),1)]),_:1},8,["label"]),o(f,{label:n(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:a})=>[o(d,{type:"primary",link:"",onClick:g=>ge(a)},{default:r(()=>[p(c(n(t)("edit")),1)]),_:2},1032,["onClick"]),o(d,{type:"primary",link:"",onClick:g=>be(a)},{default:r(()=>[p(c(n(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),a.status==1?(m(),P(d,{key:0,type:"primary",link:"",onClick:g=>K(a,0)},{default:r(()=>[p(c(n(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(m(),P(d,{key:1,type:"primary",link:"",onClick:g=>K(a,1)},{default:r(()=>[p(c(n(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),o(d,{type:"primary",link:"",onClick:g=>ve(a)},{default:r(()=>[p(c(n(t)("copyGoods")),1)]),_:2},1032,["onClick"]),o(d,{type:"primary",link:"",onClick:g=>ye(a.goods_id)},{default:r(()=>[p(c(n(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Te,l.loading]]),i("div",Ua,[i("div",za,[o(ee,{modelValue:C.value,"onUpdate:modelValue":e[15]||(e[15]=a=>C.value=a),size:"large",class:"px-[14px]",onChange:H,indeterminate:V.value},null,8,["modelValue","indeterminate"]),o(d,{onClick:e[16]||(e[16]=a=>$(1)),size:"small"},{default:r(()=>[p(c(n(t)("batchOnGoods")),1)]),_:1}),o(d,{onClick:e[17]||(e[17]=a=>$(0)),size:"small"},{default:r(()=>[p(c(n(t)("batchOffGoods")),1)]),_:1}),o(d,{onClick:W,size:"small"},{default:r(()=>[p(c(n(t)("batchDeleteGoods")),1)]),_:1})]),o(Ve,{"current-page":l.page,"onUpdate:current-page":e[18]||(e[18]=a=>l.page=a),"page-size":l.limit,"onUpdate:page-size":e[19]||(e[19]=a=>l.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:e[20]||(e[20]=a=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),o(ea,{ref_key:"goodsStockEditPopupRef",ref:Y,onLoad:u},null,512),o(aa,{ref_key:"goodsPriceEditPopupRef",ref:X,onLoad:u},null,512),o(ta,{ref_key:"goodsSpreadPopupRef",ref:Q},null,512)])}}});const ft=ca(Ba,[["__scopeId","data-v-e31f22c7"]]);export{ft as default};
