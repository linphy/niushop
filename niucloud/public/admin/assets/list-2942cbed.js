import{d as se,O as re,f as ne,r as b,n as ie,h as c,c as _,e,w as r,a as d,t as i,u as l,N as t,F as E,G as N,I as C,i as g,y as de,B as x,R as pe,a8 as M,as as ce,aE as me,W as _e,X as ue,cK as fe,E as he,Y as be,_ as ye,aC as ge,aD as xe,ah as ve,aj as ke,ad as we,a4 as Ce,$ as De}from"./index-a2233f8b.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                    *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{k as Te,l as Ve,m as Pe,n as Ee,h as Ne,i as Fe}from"./order-828c3db7.js";import{_ as Be}from"./delivery-action.vue_vue_type_style_index_0_lang-a169dd39.js";import{_ as $e}from"./order-notes.vue_vue_type_style_index_0_lang-45eab1dd.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                       *//* empty css                 */import"./delivery-af7aa755.js";const Ue={class:"main-container"},Ye={class:"flex justify-between items-center"},Oe={class:"text-[20px]"},ze={class:"table-body min-h-[150px]"},Me={key:0},je={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},Re={class:""},Ae={class:"ml-5"},He={key:0,class:"ml-5"},Le={class:"flex cursor-pointer"},Ge={class:"flex items-center min-w-[50px] mr-[10px]"},Ie=["src"],qe={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},Ke={class:"flex flex-col"},We={class:"multi-hidden text-[14px]"},Xe={class:"text-[12px] text-[#999]"},Je={class:"flex flex-col"},Qe={class:"text-[13px]"},Ze={class:"text-[13px] mt-[5px]"},ea={class:"flex flex-col"},aa={key:0},ta={class:"text-[14px]"},la={class:"flex flex-col"},oa=["onClick"],sa={class:"text-[12px] mt-[5px]"},ra={class:"text-[12px] mt-[5px]"},na={class:"text-[14px]"},ia={class:"text-[14px]"},da={key:0,class:"text-[14px] h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},pa={class:"mr-[5px]"},ca={class:"mt-[16px] flex justify-end"},ma=se({__name:"list",setup(_a){const j=re(),F=ne(),R=j.meta.title,B=b(""),A=b([]),$=b([]),S=b([]);(async()=>{A.value=await(await Te()).data,$.value=await(await Ve()).data,S.value=await(await Pe()).data})();const D=b(null),T=b(!1),H=()=>{if(T.value==!1){T.value=!0;for(const n in o.data)for(const s in o.data[n].order_goods)D.value[n].toggleRowSelection(o.data[n].order_goods[s],!0)}else{T.value=!1;for(const n in o.data)for(const s in o.data[n].order_goods)D.value[n].clearSelection()}},o=ie({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search_type:"order_no",search_name:"",pay_type:"",order_from:"",status:"",create_time:[],pay_time:[]}}),U=b(),u=(n=1)=>{o.loading=!0,o.page=n,Ee({page:o.page,limit:o.limit,...o.searchParam}).then(s=>{o.loading=!1,o.data=s.data.data.map(f=>(f.order_goods.forEach(h=>{h.rowNum=f.order_goods.length}),f)),o.total=s.data.total}).catch(()=>{o.loading=!1})};u();const L=n=>{o.searchParam.status=n,u()},G=({row:n,column:s,rowIndex:f,columnIndex:h})=>f===0?h===0?[n.rowNum,1]:h>3?[n.rowNum,1]:[1,1]:h===0?[0,0]:h>3?[0,0]:[1,1],I=n=>{F.push("/shop/order/detail?order_id="+n.order_id)},q=n=>{const s=F.resolve({path:"/member/detail",query:{id:n}});window.open(s.href,"_blank")},K=n=>{M.confirm(t("orderCloseTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Ne(n.order_id).then(()=>{u()})})},V=b(null),W=n=>{V.value.setFormData(n),V.value.showDialog=!0},P=b(null),X=n=>{P.value.setFormData(n),P.value.showDialog=!0},J=n=>{M.confirm(t("orderFinishTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Fe(n.order_id).then(()=>{u()})})},Q=n=>{n&&(n.resetFields(),u())};return(n,s)=>{const f=ce,h=me,Z=_e,v=ue,Y=fe,y=he,ee=be,O=ye,k=ge,ae=xe,p=ve,z=ke,te=we,le=Ce,oe=De;return c(),_("div",Ue,[e(O,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",Ye,[d("span",Oe,i(l(R)),1)]),e(O,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[e(ee,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:U},{default:r(()=>[e(v,{label:l(t)("orderInfo"),prop:"search_name"},{default:r(()=>[e(h,{modelValue:o.searchParam.search_type,"onUpdate:modelValue":s[0]||(s[0]=a=>o.searchParam.search_type=a),clearable:"",class:"input-item"},{default:r(()=>[e(f,{label:l(t)("orderNo"),value:"order_no"},null,8,["label"]),e(f,{label:l(t)("orderTradoNo"),value:"order_trado_no"},null,8,["label"])]),_:1},8,["modelValue"]),e(Z,{class:"input-item ml-3",modelValue:o.searchParam.search_name,"onUpdate:modelValue":s[1]||(s[1]=a=>o.searchParam.search_name=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(v,{label:l(t)("payType"),prop:"pay_type"},{default:r(()=>[e(h,{modelValue:o.searchParam.pay_type,"onUpdate:modelValue":s[2]||(s[2]=a=>o.searchParam.pay_type=a),clearable:"",class:"input-item"},{default:r(()=>[(c(!0),_(E,null,N($.value,(a,w)=>(c(),C(f,{key:w,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(v,{label:l(t)("fromType"),prop:"from_type"},{default:r(()=>[e(h,{modelValue:o.searchParam.order_from,"onUpdate:modelValue":s[3]||(s[3]=a=>o.searchParam.order_from=a),clearable:"",class:"input-item"},{default:r(()=>[(c(!0),_(E,null,N(S.value,(a,w)=>(c(),C(f,{key:w,label:a,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(v,{label:l(t)("createTime"),prop:"create_time"},{default:r(()=>[e(Y,{modelValue:o.searchParam.create_time,"onUpdate:modelValue":s[4]||(s[4]=a=>o.searchParam.create_time=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(t)("startDate"),"end-placeholder":l(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,{label:l(t)("payTime"),prop:"pay_time"},{default:r(()=>[e(Y,{modelValue:o.searchParam.pay_time,"onUpdate:modelValue":s[5]||(s[5]=a=>o.searchParam.pay_time=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(t)("startDate"),"end-placeholder":l(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,null,{default:r(()=>[e(y,{type:"primary",onClick:s[6]||(s[6]=a=>u())},{default:r(()=>[g(i(l(t)("search")),1)]),_:1}),e(y,{onClick:s[7]||(s[7]=a=>Q(U.value))},{default:r(()=>[g(i(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(ae,{modelValue:B.value,"onUpdate:modelValue":s[8]||(s[8]=a=>B.value=a),class:"demo-tabs",onTabChange:L},{default:r(()=>[e(k,{label:l(t)("all"),name:""},null,8,["label"]),e(k,{label:l(t)("toBePaid"),name:"1"},null,8,["label"]),e(k,{label:l(t)("toBeShipped"),name:"2"},null,8,["label"]),e(k,{label:l(t)("shipped"),name:"3"},null,8,["label"]),e(k,{label:l(t)("completed"),name:"5"},null,8,["label"]),e(k,{label:l(t)("closed"),name:"-1"},null,8,["label"])]),_:1},8,["modelValue"]),d("div",null,[e(z,{data:o.data,size:"large",class:"table-top",onSelectAll:H},{default:r(()=>[e(p,{type:"selection",width:"40"}),e(p,{label:l(t)("orderGoods"),"min-width":"200"},null,8,["label"]),e(p,{label:l(t)("goodsPriceNumber"),"min-width":"120"},null,8,["label"]),e(p,{label:l(t)("rightsProtection"),"min-width":"120"},null,8,["label"]),e(p,{label:l(t)("orderMoney"),"min-width":"120"},null,8,["label"]),e(p,{label:l(t)("buyInfo"),"min-width":"120"},null,8,["label"]),e(p,{label:l(t)("deliveryType"),"min-width":"100"},null,8,["label"]),e(p,{label:l(t)("orderStatus"),"min-width":"100"},null,8,["label"]),e(p,{label:l(t)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1},8,["data"]),de((c(),_("div",ze,[o.loading?x("",!0):(c(),_("div",Me,[o.data.length?(c(!0),_(E,{key:0},N(o.data,(a,w)=>(c(),_("div",{key:w},[d("div",je,[d("div",null,[d("span",Re,i(l(t)("orderNo"))+"："+i(a.order_no),1),d("span",Ae,i(l(t)("createTime"))+"："+i(a.create_time),1),a.pay?(c(),_("span",He,i(l(t)("payType"))+"："+i(a.pay.type_name),1)):x("",!0)]),d("div",null,[e(y,{type:"primary",link:"",onClick:m=>I(a)},{default:r(()=>[g(i(l(t)("info")),1)]),_:2},1032,["onClick"]),e(y,{type:"primary",link:"",onClick:m=>X(a)},{default:r(()=>[g(i(l(t)("notes")),1)]),_:2},1032,["onClick"])])]),e(z,{data:a.order_goods,size:"large","show-header":!1,"span-method":G,ref_for:!0,ref_key:"multipleTable",ref:D},{default:r(()=>[e(p,{type:"selection",width:"40"}),e(p,{align:"left","min-width":"200"},{default:r(({row:m})=>[d("div",Le,[d("div",Ge,[m.goods_image?(c(),_("img",{key:0,class:"w-[50px] h-[50px]",src:l(pe)(m.goods_image),alt:""},null,8,Ie)):(c(),_("img",qe))]),d("div",Ke,[d("p",We,i(m.goods_name),1),d("span",Xe,i(m.sku_name),1)])])]),_:1}),e(p,{"min-width":"120"},{default:r(({row:m})=>[d("div",Je,[d("span",Qe,"￥"+i(m.goods_money),1),d("span",Ze,i(m.num)+i(l(t)("piece")),1)])]),_:1}),e(p,{"min-width":"120"},{default:r(({row:m})=>[d("div",ea,[m.status!=1?(c(),_("span",aa,i(m.status_name),1)):x("",!0)])]),_:1}),e(p,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:r(()=>[d("span",ta,"￥"+i(a.order_money),1)]),_:2},1024),e(p,{"min-width":"120"},{default:r(()=>[d("div",la,[d("span",{class:"text-[12px] text-primary cursor-pointer",onClick:m=>q(a.member.member_id)},i(a.member.nickname),9,oa),d("span",sa,i(a.taker_name)+" "+i(a.taker_mobile),1),d("span",ra,i(a.taker_full_address),1)])]),_:2},1024),e(p,{"min-width":"100"},{default:r(()=>[d("span",na,i(a.delivery_type_name),1)]),_:2},1024),e(p,{"min-width":"100"},{default:r(()=>[d("span",ia,i(a.status_name.name),1)]),_:2},1024),e(p,{align:"right","min-width":"120"},{default:r(()=>[a.status==1?(c(),C(y,{key:0,type:"primary",link:"",onClick:m=>K(a)},{default:r(()=>[g(i(l(t)("orderClose")),1)]),_:2},1032,["onClick"])):x("",!0),a.status==2?(c(),C(y,{key:1,type:"primary",link:"",onClick:m=>W(a)},{default:r(()=>[g(i(l(t)("sendOutGoods")),1)]),_:2},1032,["onClick"])):x("",!0),a.status==3?(c(),C(y,{key:2,type:"primary",link:"",onClick:m=>J(a)},{default:r(()=>[g(i(l(t)("confirmTakeDelivery")),1)]),_:2},1032,["onClick"])):x("",!0)]),_:2},1024)]),_:2},1032,["data"]),a.shop_remark?(c(),_("div",da,[d("span",pa,i(l(t)("notes"))+"：",1),d("span",null,i(a.shop_remark),1)])):x("",!0)]))),128)):(c(),C(te,{key:1,description:l(t)("emptyData")},null,8,["description"]))]))])),[[oe,o.loading]]),d("div",ca,[e(le,{"current-page":o.page,"onUpdate:current-page":s[9]||(s[9]=a=>o.page=a),"page-size":o.limit,"onUpdate:page-size":s[10]||(s[10]=a=>o.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:s[11]||(s[11]=a=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),e(Be,{ref_key:"deliveryActionDialog",ref:V,onComplete:u},null,512),e($e,{ref_key:"orderNotesDialog",ref:P,onComplete:u},null,512)])}}});const Aa=Se(ma,[["__scopeId","data-v-c8e3c0c8"]]);export{Aa as default};
