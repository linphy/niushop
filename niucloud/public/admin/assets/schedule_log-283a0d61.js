import{d as Y,v as S,l as T,r as h,h as f,c as F,e,w as t,a as r,t as i,u as l,k as o,F as I,O as M,m as k,i as b,J as $,au as q,K as A,_ as G,ac as J,G as K,bc as Q,E as W,H as X,$ as Z,a0 as ee,a1 as ae,V as te,L as le}from"./index-49a7c6d3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                     *//* empty css                  *//* empty css                       *//* empty css                *//* empty css                       */import{a7 as oe,ae as se}from"./sys-5c944b3b.js";const ne={class:"main-container"},ie={class:"text-large font-600 mr-3"},re={class:"flex justify-between"},de={class:"mt-[20px]"},ue={class:"mt-[16px] flex justify-end"},me={class:"input-width"},pe={class:"input-width"},ce={class:"input-width"},_e={class:"input-width"},fe={class:"input-width"},be={class:"input-width"},ge={class:"dialog-footer"},Se=Y({__name:"schedule_log",setup(ve){const w=S(),j=w.meta.title,s=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{schedule_id:w.query.id,key:"",status:"all",execute_time:[]}}),V=h([]),C=h(),z=d=>{d&&(d.resetFields(),c())};(async()=>{V.value=await(await oe()).data})();const c=(d=1)=>{s.loading=!0,s.page=d,se({page:s.page,limit:s.limit,...s.searchParam}).then(a=>{s.loading=!1,s.data=a.data.data,s.total=a.data.total}).catch(()=>{s.loading=!1})};c();const g=h(!1),y=h(!0),E={id:"",name:"",key:"",execute_result:"",status_name:"",class:"",job:"",execute_time:""},u=T({...E}),B=d=>{y.value=!0,Object.assign(u,E),d&&Object.keys(u).forEach(a=>{d[a]!=null&&(u[a]=d[a])}),y.value=!1,g.value=!0};return(d,a)=>{const R=q,x=A,_=G,D=J,m=K,U=Q,v=W,P=X,p=Z,H=ee,N=ae,O=te,L=le;return f(),F("div",ne,[e(x,{class:"card !border-none",shadow:"never"},{default:t(()=>[e(R,{icon:d.ArrowLeft,onBack:a[0]||(a[0]=n=>d.$router.back())},{content:t(()=>[r("span",ie,i(l(j)),1)]),_:1},8,["icon"])]),_:1}),e(x,{class:"box-card !border-none",shadow:"never"},{default:t(()=>[e(x,{class:"box-card !border-none mb-[10px] table-search-wrap",shadow:"never"},{default:t(()=>[r("div",re,[e(P,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:C},{default:t(()=>[e(m,{label:l(o)("name"),prop:"key"},{default:t(()=>[e(D,{modelValue:s.searchParam.key,"onUpdate:modelValue":a[1]||(a[1]=n=>s.searchParam.key=n),placeholder:"全部",filterable:"",remote:"",clearable:""},{default:t(()=>[e(_,{label:"全部",value:"all"}),(f(!0),F(I,null,M(V.value,n=>(f(),k(_,{key:n.key,label:n.name,value:n.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(m,{label:l(o)("status"),prop:"status"},{default:t(()=>[e(D,{modelValue:s.searchParam.status,"onUpdate:modelValue":a[2]||(a[2]=n=>s.searchParam.status=n),placeholder:"全部",filterable:"",remote:"",clearable:""},{default:t(()=>[e(_,{label:"全部",value:"all"}),e(_,{label:"成功",value:"success"}),e(_,{label:"失败",value:"error"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(m,{label:l(o)("executeTime"),prop:"execute_time"},{default:t(()=>[e(U,{modelValue:s.searchParam.execute_time,"onUpdate:modelValue":a[3]||(a[3]=n=>s.searchParam.execute_time=n),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(o)("startDate"),"end-placeholder":l(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(m,null,{default:t(()=>[e(v,{type:"primary",onClick:a[4]||(a[4]=n=>c())},{default:t(()=>[b(i(l(o)("search")),1)]),_:1}),e(v,{onClick:a[5]||(a[5]=n=>z(C.value))},{default:t(()=>[b(i(l(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),r("div",de,[$((f(),k(H,{data:s.data,size:"large"},{empty:t(()=>[r("span",null,i(s.loading?"":l(o)("emptyData")),1)]),default:t(()=>[e(p,{prop:"id",label:l(o)("id"),"min-width":"80"},null,8,["label"]),e(p,{prop:"name",label:l(o)("name"),"min-width":"150"},null,8,["label"]),e(p,{prop:"key",label:l(o)("key"),"min-width":"150"},null,8,["label"]),e(p,{prop:"class",label:l(o)("class"),"min-width":"150"},null,8,["label"]),e(p,{label:l(o)("executeResult"),"min-width":"150"},{default:t(({row:n})=>[b(i(n.execute_result),1)]),_:1},8,["label"]),e(p,{prop:"status_name",label:l(o)("status"),"min-width":"100"},null,8,["label"]),e(p,{prop:"execute_time",label:l(o)("executeTime"),"min-width":"100"},null,8,["label"]),e(p,{label:l(o)("operation"),align:"right",fixed:"right",width:"130"},{default:t(({row:n})=>[e(v,{type:"primary",link:"",onClick:ye=>B(n)},{default:t(()=>[b(i(l(o)("info")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,s.loading]]),r("div",ue,[e(N,{"current-page":s.page,"onUpdate:current-page":a[6]||(a[6]=n=>s.page=n),"page-size":s.limit,"onUpdate:page-size":a[7]||(a[7]=n=>s.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:a[8]||(a[8]=n=>c()),onCurrentChange:c},null,8,["current-page","page-size","total"])])])]),_:1}),e(O,{modelValue:g.value,"onUpdate:modelValue":a[10]||(a[10]=n=>g.value=n),title:l(o)("cronInfo"),width:"550px","destroy-on-close":!0},{footer:t(()=>[r("span",ge,[e(v,{type:"primary",onClick:a[9]||(a[9]=n=>g.value=!1)},{default:t(()=>[b(i(l(o)("confirm")),1)]),_:1})])]),default:t(()=>[$((f(),k(P,{model:u,"label-width":"110px",ref:"formRef",class:"page-form"},{default:t(()=>[e(m,{label:l(o)("name")},{default:t(()=>[r("div",me,i(u.name),1)]),_:1},8,["label"]),e(m,{label:l(o)("key")},{default:t(()=>[r("div",pe,i(u.key),1)]),_:1},8,["label"]),e(m,{label:l(o)("class")},{default:t(()=>[r("div",ce,i(u.class),1)]),_:1},8,["label"]),e(m,{label:l(o)("executeResult")},{default:t(()=>[r("div",_e,i(u.execute_result),1)]),_:1},8,["label"]),e(m,{label:l(o)("status")},{default:t(()=>[r("div",fe,i(u.status_name),1)]),_:1},8,["label"]),e(m,{label:l(o)("executeTime")},{default:t(()=>[r("div",be,i(u.execute_time),1)]),_:1},8,["label"])]),_:1},8,["model"])),[[L,y.value]])]),_:1},8,["modelValue","title"])])}}});export{Se as default};
