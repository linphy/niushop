import{d as P,r as c,n as F,q as k,N as a,h as g,I as b,w as s,a as B,e as n,i as h,t as y,u as t,y as C,W as I,X as S,Y as $,E as q,aa as M,$ as R}from"./index-a2233f8b.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{c as U,f as j,h as O}from"./delivery-af7aa755.js";const L={class:"dialog-footer"},Q=P({__name:"delivery-personnel-edit",emits:["complete"],setup(T,{expose:D,emit:V}){const m=c(!1),o=c(!1),p={deliver_id:"",deliver_name:"",deliver_mobile:""},l=F({...p}),v=c(),w=k(()=>({deliver_name:[{required:!0,message:a("deliverNamePlaceholder"),trigger:"blur"}],deliver_mobile:[{required:!0,message:a("deliverMobilePlaceholder"),trigger:"blur"},{min:11,max:11,message:"请输入11位手机号码",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]})),x=async d=>{if(o.value||!d)return;const e=l.deliver_id?U:j;await d.validate(async r=>{r&&(o.value=!0,e(l).then(_=>{o.value=!1,m.value=!1,V("complete")}).catch(()=>{o.value=!1}))})};return D({showDialog:m,setFormData:async(d=null)=>{if(Object.assign(l,p),o.value=!0,d){const e=await(await O(d.deliver_id)).data;e&&Object.keys(l).forEach(r=>{e[r]!=null&&(l[r]=e[r])})}o.value=!1}}),(d,e)=>{const r=I,u=S,_=$,f=q,E=M,N=R;return g(),b(E,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=i=>m.value=i),title:l.deliver_id?t(a)("updateDeliver"):t(a)("addDeliveryPersonnel"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:s(()=>[B("span",L,[n(f,{onClick:e[2]||(e[2]=i=>m.value=!1)},{default:s(()=>[h(y(t(a)("cancel")),1)]),_:1}),n(f,{type:"primary",loading:o.value,onClick:e[3]||(e[3]=i=>x(v.value))},{default:s(()=>[h(y(t(a)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[C((g(),b(_,{model:l,"label-width":"120px",ref_key:"formRef",ref:v,rules:t(w),class:"page-form"},{default:s(()=>[n(u,{label:t(a)("deliverName"),prop:"deliver_name"},{default:s(()=>[n(r,{modelValue:l.deliver_name,"onUpdate:modelValue":e[0]||(e[0]=i=>l.deliver_name=i),clearable:"",placeholder:t(a)("deliverNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(a)("deliverMobile"),prop:"deliver_mobile"},{default:s(()=>[n(r,{modelValue:l.deliver_mobile,"onUpdate:modelValue":e[1]||(e[1]=i=>l.deliver_mobile=i),clearable:"",placeholder:t(a)("deliverMobilePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[N,o.value]])]),_:1},8,["modelValue","title"])}}});export{Q as _};
