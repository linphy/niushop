import{d as P,r as c,l as F,M as B,k as l,h as v,m as y,w as i,a as C,e as d,i as h,t as b,u as t,J as U,D as q,G as I,H as M,E as N,V as R,L as j}from"./index-ad4e42d5.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 */import{e as L,a as O,g as $}from"./dict-653d617f.js";const G={class:"dialog-footer"},Y=P({__name:"edit",emits:["complete"],setup(H,{expose:w,emit:V}){const m=c(!1),s=c(!1),p={id:"",name:"",key:"",memo:""},a=F({...p}),f=c(),D=B(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),k=async n=>{if(s.value||!n)return;const e=a.id?L:O;await n.validate(async o=>{o&&(s.value=!0,e(a).then(_=>{s.value=!1,m.value=!1,V("complete")}).catch(()=>{s.value=!1}))})};return w({showDialog:m,setFormData:async(n=null)=>{if(Object.assign(a,p),s.value=!0,n){const e=await(await $(n.id)).data;e&&Object.keys(a).forEach(o=>{e[o]!=null&&(a[o]=e[o])})}s.value=!1}}),(n,e)=>{const o=q,u=I,_=M,g=N,x=R,E=j;return v(),y(x,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=r=>m.value=r),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:i(()=>[C("span",G,[d(g,{onClick:e[3]||(e[3]=r=>m.value=!1)},{default:i(()=>[h(b(t(l)("cancel")),1)]),_:1}),d(g,{type:"primary",loading:s.value,onClick:e[4]||(e[4]=r=>k(f.value))},{default:i(()=>[h(b(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[U((v(),y(_,{model:a,"label-width":"120px",ref_key:"formRef",ref:f,rules:t(D),class:"page-form"},{default:i(()=>[d(u,{label:t(l)("name"),prop:"name"},{default:i(()=>[d(o,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.name=r),modelModifiers:{trim:!0},clearable:"",maxlength:"40","show-word-limit":"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("key"),prop:"key"},{default:i(()=>[d(o,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=r=>a.key=r),modelModifiers:{trim:!0},clearable:"",maxlength:"40","show-word-limit":"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("memo")},{default:i(()=>[d(o,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=r=>a.memo=r),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[E,s.value]])]),_:1},8,["modelValue","title"])}}});export{Y as _};
