import{d as T,r as E,cL as B,cY as me,cZ as fe,q as D,h as c,c as y,e as t,w as o,a as n,t as $,u as e,N as h,aR as J,aL as he,cA as xe,ap as H,c_ as ae,c$ as Q,K as O,n as ee,cW as ve,i as A,af as ge,aI as we,aT as ye,aU as be,aV as ke,W as $e,X as Se,Y as Ee,E as le,aa as re,p as Ve,g as Ce,f as K,U as R,d0 as De,cN as de,v as Ie,I as k,G as N,F as C,B as M,y as te,co as oe,A as L,d1 as Re,d2 as Te,an as Ue,ao as Pe,Q as X,O as Y,d3 as Me,ai as Le,d4 as ce,ae as se,s as ie,R as Fe,d5 as We,cF as ue,V as je,d6 as Ae,Z as pe,cX as Be,cO as Ne,a_ as qe,J as ze,a0 as He}from"./index-1d549745.js";/* empty css                     *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                    */import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-9c350356.js";/* empty css                  *//* empty css                        *//* empty css                 *//* empty css                  */import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css                         *//* empty css                  *//* empty css                  */import{s as Oe}from"./personal-559ee2d4.js";/* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        */import{_ as Ke}from"./icon-addon-339e16d0.js";/* empty css                */const Xe={class:"flex"},Ye={class:"setting-item flex items-center justify-between mb-[10px]"},Ze={class:"title text-base text-tx-secondary"},Ge={class:""},Je={class:"setting-item flex items-center justify-between mb-[10px]"},Qe={class:"title text-base text-tx-secondary"},et={class:""},tt=T({__name:"layout-setting",setup(u){const x=E(!1),f=B(),p=me(),g=fe(p),s=D({get(){return f.dark},set(a){f.setTheme("dark",a),g(a),Q(f.theme,f.dark?"dark":"light")}}),b=D({get(){return f.theme},set(a){f.setTheme("theme",a),Q(f.theme,f.dark?"dark":"light")}});return(a,r)=>{const w=q,v=he,d=xe,l=H,i=ae;return c(),y("div",Xe,[t(w,{name:"element-Setting",onClick:r[0]||(r[0]=m=>x.value=!0)}),t(i,{modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=m=>x.value=m),title:e(h)("layout.layoutSetting"),size:"300px"},{default:o(()=>[t(l,null,{default:o(()=>[n("div",Ye,[n("div",Ze,$(e(h)("layout.darkMode")),1),n("div",Ge,[t(v,{modelValue:e(s),"onUpdate:modelValue":r[1]||(r[1]=m=>J(s)?s.value=m:null),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])]),n("div",Je,[n("div",Qe,$(e(h)("layout.themeColor")),1),n("div",et,[t(d,{modelValue:e(b),"onUpdate:modelValue":r[2]||(r[2]=m=>J(b)?b.value=m:null)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue","title"])])}}});const ot=Z(tt,[["__scopeId","data-v-ddd4e4e2"]]),z=u=>(Ve("data-v-b07cf2e9"),u=u(),Ce(),u),st={class:"userinfo flex h-full items-center"},nt={class:"user-name pl-[8px]"},at=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"切换站点")],-1)),lt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"账号设置")],-1)),rt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"修改密码")],-1)),dt=z(()=>n("div",{class:"flex items-center leading-[1] py-[2px]"},[n("span",{class:"iconfont icontuichudenglu !text-[21px] mr-[8px]"}),n("span",{class:"text-[14px]"},"退出登录")],-1)),ct={class:"form-tip"},it={class:"dialog-footer"},ut=T({__name:"user-info",setup(u){const x=O(),f=K(),p=v=>{switch(v){case"logout":x.logout();break}},g=v=>{f.push(v)},s=E(!1),b=E(),a=ee({original_password:"",password:"",password_copy:""}),r=ee({original_password:[{required:!0,message:h("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}]}),w=v=>{v&&v.validate(d=>{if(d){let l="";if(a.password&&!a.original_password&&(l=h("originalPasswordHint")),a.password&&a.original_password&&!a.password_copy&&(l=h("newPasswordHint")),a.password&&a.original_password&&a.password_copy&&a.password!=a.password_copy&&(l=h("doubleCipherHint")),l){ge({type:"error",message:l});return}Oe(a).then(i=>{s.value=!1})}else return!1})};return(v,d)=>{const l=we,i=q,m=ye,F=be,W=ke,I=$e,V=Se,U=Ee,P=le,j=re;return c(),y("div",null,[t(W,{onCommand:p,tabindex:1},{dropdown:o(()=>[t(F,null,{default:o(()=>[t(m,{onClick:d[0]||(d[0]=_=>g("/home/index"))},{default:o(()=>[at]),_:1}),t(m,{onClick:d[1]||(d[1]=_=>g("/user/center"))},{default:o(()=>[lt]),_:1}),t(m,{onClick:d[2]||(d[2]=_=>s.value=!0)},{default:o(()=>[rt]),_:1}),t(m,{command:"logout"},{default:o(()=>[dt]),_:1})]),_:1})]),default:o(()=>[n("div",st,[t(l,{size:25,icon:e(ve)},null,8,["icon"]),n("div",nt,$(e(x).userInfo.username),1),t(i,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),t(j,{modelValue:s.value,"onUpdate:modelValue":d[8]||(d[8]=_=>s.value=_),width:"450px",title:"修改密码","before-close":v.handleClose},{footer:o(()=>[n("span",it,[t(P,{onClick:d[6]||(d[6]=_=>s.value=!1)},{default:o(()=>[A($(e(h)("cancel")),1)]),_:1}),t(P,{type:"primary",onClick:d[7]||(d[7]=_=>w(b.value))},{default:o(()=>[A($(e(h)("save")),1)]),_:1})])]),default:o(()=>[n("div",null,[t(U,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:r,class:"page-form"},{default:o(()=>[t(V,{label:e(h)("originalPassword"),prop:"original_password"},{default:o(()=>[t(I,{modelValue:a.original_password,"onUpdate:modelValue":d[3]||(d[3]=_=>a.original_password=_),type:"password",placeholder:e(h)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(V,{label:e(h)("newPassword"),prop:"password"},{default:o(()=>[t(I,{modelValue:a.password,"onUpdate:modelValue":d[4]||(d[4]=_=>a.password=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),n("div",ct,$(e(h)("passwordTip")),1)]),_:1},8,["label"]),t(V,{label:e(h)("passwordCopy"),prop:"password_copy"},{default:o(()=>[t(I,{modelValue:a.password_copy,"onUpdate:modelValue":d[5]||(d[5]=_=>a.password_copy=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}}});const pt=Z(ut,[["__scopeId","data-v-b07cf2e9"]]),_t={class:"left-panel h-full flex items-center"},mt={class:"flex items-center h-full pl-[10px] hidden-xs-only"},ft={class:"right-panel h-full flex items-center justify-end"},ht=["title"],xt={class:"navbar-item flex items-center h-full cursor-pointer"},vt={class:"navbar-item flex items-center h-full cursor-pointer"},gt={class:"dialog-footer"},wt=T({__name:"index",setup(u){const x=R.get("app_type");De();const f=B(),p=de(),g=Y(),s=E(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),b=D(()=>f.dark),a=E(!1),r=E(""),w=E("");R.get("comparisonTokenStorage")&&(r.value=R.get("comparisonTokenStorage")),R.get("comparisonSiteIdStorage")&&(w.value=R.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",i=>{document.visibilityState==="visible"&&(w.value!=R.get("siteId")||r.value!=R.get("token"))&&(a.value=!0)});const v=()=>{a.value=!1,location.href=`${location.origin}/site/`};Ie(()=>{window.onresize=()=>(()=>{s.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const d=()=>{p.routeRefreshTag&&p.refreshRouterView()},l=D(()=>{const i=g.matched.filter(m=>m.meta.title);return i[0]&&i[0].path=="/"&&i.splice(0,1),i});return(i,m)=>{const F=q,W=Re,I=Te,V=Ue,U=Pe,P=le,j=re,_=X;return c(),k(_,{class:L(["h-full px-[10px]",{"layout-header border-b border-color":!e(b)}])},{default:o(()=>[t(U,{class:"w-100 h-full w-full"},{default:o(()=>[t(V,{span:12},{default:o(()=>[n("div",_t,[n("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:d},[t(F,{name:"element-Refresh"})]),n("div",mt,[t(I,{separator:"/"},{default:o(()=>[(c(!0),y(C,null,N(e(l),(S,G)=>(c(),k(W,{key:G},{default:o(()=>[A($(S.meta.title),1)]),_:2},1024))),128))]),_:1})])])]),_:1}),t(V,{span:12},{default:o(()=>[n("div",ft,[e(x)=="site"?(c(),y("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:e(h)("newInfo")},null,8,ht)):M("",!0),n("div",xt,[t(ot)]),n("div",vt,[t(pt)])])]),_:1})]),_:1}),te(n("input",{type:"hidden","onUpdate:modelValue":m[0]||(m[0]=S=>r.value=S)},null,512),[[oe,r.value]]),te(n("input",{type:"hidden","onUpdate:modelValue":m[1]||(m[1]=S=>w.value=S)},null,512),[[oe,w.value]]),t(j,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=S=>a.value=S),title:e(h)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:o(()=>[n("span",gt,[t(P,{onClick:v},{default:o(()=>[A($(e(h)("layout.detectionLoginOperation")),1)]),_:1})])]),default:o(()=>[n("span",null,$(e(h)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"])]),_:1},8,["class"])}}});const yt=Z(wt,[["__scopeId","data-v-85bde98f"]]),bt={class:L(["ml-[10px]"])},kt={key:2,class:"!border-0 !border-t-[1px] border-solid mx-[25px] bg-[#f7f7f7] my-[5px]"},_e=T({__name:"menu-item",props:{routes:{type:Object,required:!0}},setup(u){const x=u,f=K(),g=O().siteInfo,s=D(()=>x.routes.meta),b=D(()=>{const a={};return g==null||g.apps.forEach(r=>{a[r.key]=r}),g==null||g.site_addons.forEach(r=>{a[r.key]=r}),a});return(a,r)=>{const w=Me,v=Le,d=ce;return e(s).show?(c(),y(C,{key:0},[u.routes.children?(c(),k(w,{key:0,index:String(u.routes.name)},{title:o(()=>[n("span",bt,$(e(s).title),1)]),default:o(()=>[(c(!0),y(C,null,N(u.routes.children,(l,i)=>(c(),k(_e,{routes:l,key:i},null,8,["routes"]))),128))]),_:1},8,["index"])):(c(),y(C,{key:1},[e(s).addon&&e(s).parent_route&&e(s).parent_route.addon==""?(c(),k(d,{key:0,index:String(u.routes.name),onClick:r[0]||(r[0]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[t(v,{placement:"right",effect:"light"},{content:o(()=>[A(" 该功能仅限"+$(e(b)[e(s).addon].title)+"使用 ",1)]),default:o(()=>[n("span",{class:L([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1})]),_:1},8,["index"])):(c(),k(d,{key:1,index:String(u.routes.name),onClick:r[1]||(r[1]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[n("span",{class:L([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1},8,["index"]))],64)),u.routes.is_border?(c(),y("div",kt)):M("",!0)],64)):M("",!0)}}});const $t={class:"w-[124px] px-[8px] bg-[#282c34] h-screen one-menu"},St={key:0,class:"logo flex items-center m-auto h-[64px]"},Et=["src"],Vt={key:1,class:"max-h-[40px] max-w-[40px] rounded-full",src:Ke,alt:""},Ct={key:1,class:"logo flex items-center justify-center h-[64px]"},Dt=n("i",{class:"text-3xl iconfont iconyunkongjian"},null,-1),It=[Dt],Rt={key:0,class:"w-[16px] h-[16px] relative flex justify-center"},Tt={key:1,class:"w-[16px] h-[16px]"},Ut={class:"relative flex-1 w-0"},Pt={class:"ml-[10px] w-full truncate"},Mt=n("div",{class:"h-[48px]"},null,-1),Lt={class:"w-[140px] h-[64px] flex items-center justify-center text-[16px] border-0 border-b-[1px] border-solid border-[#eee]"},Ft=n("div",{class:"h-[48px]"},null,-1),ne=T({__name:"side",setup(u){const x=B(),f=O(),p=Y(),g=K(),s=f.siteInfo,b=f.routers,a=f.addonIndexRoute,r=E([]),w=E([]),v={};if(b.forEach(l=>{l.original_name=l.name,l.meta.addon==""?(l.children&&l.children.length&&(l.name=se(l.children)),r.value.push(l)):l.meta.addon!=""&&(s==null?void 0:s.apps.length)<=1&&(s==null?void 0:s.apps[0].key)==l.meta.addon?l.children?(l.children.forEach(i=>{i.original_name=i.name,i.children&&i.children.length&&(i.name=se(i.children))}),r.value.unshift(...l.children)):r.value.unshift(l):v[l.meta.addon]=l}),(s==null?void 0:s.apps.length)>1){const l=[];s==null||s.apps.forEach(i=>{var m;l.push({path:v[i.key]?v[i.key].path:"",meta:{icon:((m=v[i.key])==null?void 0:m.meta.icon)||"element-Setting",addon:i.key,title:i.title,app:i.app,show:!0},original_name:i.key,name:a[i.key]})}),r.value.unshift(...l)}const d=E(p.matched[1].name);return ie(p,()=>{(s==null?void 0:s.apps.length)>1?(w.value=p.matched[1].children,d.value=p.matched[1].name):p.meta.addon==""?(d.value=p.matched[1].name,w.value=p.matched[1].children??[]):p.meta.addon&&p.meta.addon!=(s==null?void 0:s.apps[0].key)?(d.value="/site/app",w.value=p.matched[1].children??[]):(d.value=p.matched[2].name,w.value=p.matched[2].children??[])},{immediate:!0}),(l,i)=>{const m=ue,F=je,W=q,I=ce,V=Ae,U=H,P=pe,j=X;return c(),k(j,{class:"w-100 h-screen"},{default:o(()=>[t(P,{class:"p-0 flex"},{default:o(()=>[n("div",$t,[t(m,{class:"logo-wrap"},{default:o(()=>[e(x).menuIsCollapse?(c(),y("div",Ct,It)):(c(),y("div",St,[e(s).logo?(c(),y("img",{key:0,class:"max-h-[40px] max-w-[40px] rounded-full",src:e(Fe)(e(s).logo),alt:""},null,8,Et)):(c(),y("img",Vt))]))]),_:1}),t(U,{class:"h-[calc( 100vh - 64px )]"},{default:o(()=>[t(V,{"default-active":d.value,router:!0,class:"aside-menu","unique-opened":"true",collapse:e(x).menuIsCollapse},{default:o(()=>[(c(!0),y(C,null,N(r.value,(_,S)=>(c(),y(C,{key:S},[_.meta.show?(c(),k(I,{key:0,index:_.original_name,onClick:G=>e(g).push({name:_.name})},{title:o(()=>[n("div",Ut,[n("span",Pt,$(_.meta.short_title||_.meta.title),1)])]),default:o(()=>[_.meta.icon?(c(),y("div",Rt,[e(We)(_.meta.icon)?(c(),k(F,{key:0,class:"w-[16px] h-[16px] rounded-[50%] overflow-hidden",src:_.meta.icon,fit:"fill"},null,8,["src"])):(c(),k(W,{key:1,name:_.meta.icon,class:"absolute top-[50%] -translate-y-[50%]"},null,8,["name"]))])):(c(),y("div",Tt))]),_:2},1032,["index","onClick"])):M("",!0)],64))),128))]),_:1},8,["default-active","collapse"]),Mt]),_:1})]),w.value.length?(c(),k(U,{key:0,class:"two-menu w-[140px]"},{default:o(()=>[n("div",Lt,$(e(p).matched[1].meta.title),1),t(V,{"default-active":e(p).name,router:!0,class:"aside-menu",collapse:e(x).menuIsCollapse},{default:o(()=>[(c(!0),y(C,null,N(w.value,(_,S)=>(c(),k(_e,{routes:_,key:S},null,8,["routes"]))),128))]),_:1},8,["default-active","collapse"]),Ft]),_:1})):M("",!0)]),_:1})]),_:1})}}});const Wt=T({__name:"index",setup(u){const x=B(),f=D(()=>x.dark),p=Y();return ie(p,()=>{x.$patch(g=>{g.menuDrawer=!1})}),(g,s)=>{const b=Be,a=ae;return c(),y(C,null,[t(b,{class:L(["h-screen layout-aside w-auto",{bright:!e(f)}])},{default:o(()=>[t(ne,{class:"hidden-xs-only"})]),_:1},8,["class"]),t(a,{modelValue:e(x).menuDrawer,"onUpdate:modelValue":s[0]||(s[0]=r=>e(x).menuDrawer=r),direction:"ltr","with-header":!1,"custom-class":"aside-drawer",size:"210px"},{default:o(()=>[t(ne)]),_:1},8,["modelValue"])],64)}}});const jt={class:"common-layout min-w-[1200px]"},At={class:"p-[10px]"},uo=T({__name:"index",setup(u){const x=de(),f=Ne(),p=B(),g=D(()=>p.dark);return(s,b)=>{const a=ue,r=He("router-view"),w=H,v=pe,d=X;return c(),y("div",jt,[t(d,{class:"w-100 h-screen"},{default:o(()=>[t(Wt),t(d,null,{default:o(()=>[t(a,null,{default:o(()=>[t(yt)]),_:1}),t(v,{class:L(["main-wrap h-full p-0",{"bg-page":e(g)}])},{default:o(()=>[t(w,null,{default:o(()=>[n("div",At,[e(x).routeRefreshTag?(c(),k(r,{key:0},{default:o(({Component:l,route:i})=>[(c(),k(qe,{include:e(f).tabNames},[(c(),k(ze(l),{key:i.fullPath}))],1032,["include"]))]),_:1})):M("",!0)])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})])}}});export{uo as default};
