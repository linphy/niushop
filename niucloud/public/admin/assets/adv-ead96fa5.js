import{d as L,v as P,f as U,l as j,r as M,h,c as q,e as n,w as r,a as s,u as a,t as d,k as o,i as f,J as F,m as K,z as b,S as R,ai as J,P as G,E as H,$ as O,C as Q,D as W,a0 as X,a1 as Y,K as Z,L as tt,p as et,g as at}from"./index-ac08d87d.js";/* empty css                   *//* empty css                *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                  */import{g as ot,d as it,e as nt}from"./web-1069eeb4.js";import{_ as st}from"./adv-edit.vue_vue_type_style_index_0_lang-6c84f7e1.js";import{_ as lt}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                *//* empty css                        */import"./index-7d504251.js";import"./index.vue_vue_type_style_index_0_lang-8b6f9720.js";import"./attachment-895a7d37.js";import"./index.vue_vue_type_script_setup_true_lang-7df93d15.js";import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css                  *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-c8b99dcc.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-d1dc26ab.js";import"./sys-5aa982aa.js";import"./sortable.esm-be94e56d.js";import"./web-link.vue_vue_type_style_index_0_lang-3247e07e.js";const y=_=>(et("data-v-a5a575a5"),_=_(),at(),_),rt={class:"main-container"},dt={class:"flex justify-between items-center mb-[15px] ml-[15px]"},pt={class:"flex items-center"},mt=y(()=>s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),ct={class:"ml-[1px]"},_t=y(()=>s("span",{class:"text-[#999] mx-[12px]"},"|",-1)),ut={class:"right"},vt={class:"mt-[10px]"},gt={class:"w-[40px] h-[40px] flex items-center"},ft={class:"mt-[16px] flex justify-end"},xt=L({__name:"adv",setup(_){const g=P(),k=U(),w=g.meta.title,x=g.query.adv_key,C=g.query.ap_name,e=j({page:1,limit:10,total:0,loading:!0,data:[]}),p=(l=1)=>{e.loading=!0,e.page=l,ot({page:e.page,limit:e.limit,adv_key:x}).then(i=>{e.loading=!1,e.data=i.data.data,e.total=i.data.total}).catch(()=>{e.loading=!1})};p();const c=M(null),E=()=>{c.value.setFormData({adv_key:x,ap_name:C}),c.value.showDialog=!0},D=l=>{c.value.setFormData(l),c.value.showDialog=!0},z=l=>{R.confirm(o("advDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{it(l).then(()=>{p()}).catch(()=>{})})},B={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},$=J((l,i)=>{if(isNaN(l)||!B.number.test(l)){G({type:"warning",message:`${o("sortTips")}`});return}l>99999999&&(i.sort=99999999),nt({id:i.adv_id,sort:l}).then(u=>{p()})});return(l,i)=>{const u=H,m=O,T=Q,I=W,N=X,A=Y,S=Z,V=tt;return h(),q("div",rt,[n(S,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[s("div",dt,[s("div",pt,[s("div",{class:"text-[#666] cursor-pointer text-[14px]",onClick:i[0]||(i[0]=t=>a(k).push("/web/adv_position"))},[mt,s("span",ct,d(a(o)("returnToPreviousPage")),1)]),_t,s("span",ut,d(a(w)),1)]),n(u,{type:"primary",onClick:E},{default:r(()=>[f(d(a(o)("addAdv")),1)]),_:1})]),s("div",vt,[F((h(),K(N,{data:e.data,size:"large"},{empty:r(()=>[s("span",null,d(e.loading?"":a(o)("emptyData")),1)]),default:r(()=>[n(m,{prop:"adv_title",label:a(o)("advName"),"min-width":"120"},null,8,["label"]),n(m,{label:a(o)("advUrl"),"min-width":"120"},{default:r(({row:t})=>[s("div",null,d(t.adv_url?t.adv_url.url:""),1)]),_:1},8,["label"]),n(m,{prop:"ap_name",label:a(o)("advPosition"),"min-width":"120"},null,8,["label"]),n(m,{label:a(o)("advImg"),"min-width":"180"},{default:r(({row:t})=>[s("div",gt,[n(T,{src:a(b)(t.adv_image),"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a(b)(t.adv_image)],"initial-index":4,fit:"cover"},null,8,["src","zoom-rate","min-scale","preview-src-list"])])]),_:1},8,["label"]),n(m,{label:a(o)("sort"),"min-width":"120"},{default:r(({row:t})=>[n(I,{modelValue:t.sort,"onUpdate:modelValue":v=>t.sort=v,modelModifiers:{trim:!0},class:"!w-[70px]",maxlength:"8",onBlur:v=>a($)(t.sort,t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(m,{label:a(o)("operation"),fixed:"right","min-width":"120",align:"right"},{default:r(({row:t})=>[n(u,{type:"primary",link:"",onClick:v=>D(t)},{default:r(()=>[f(d(a(o)("edit")),1)]),_:2},1032,["onClick"]),n(u,{type:"primary",link:"",onClick:v=>z(t.adv_id)},{default:r(()=>[f(d(a(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[V,e.loading]]),s("div",ft,[n(A,{"current-page":e.page,"onUpdate:current-page":i[1]||(i[1]=t=>e.page=t),"page-size":e.limit,"onUpdate:page-size":i[2]||(i[2]=t=>e.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:i[3]||(i[3]=t=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])]),n(st,{ref_key:"editAdvDialog",ref:c,onComplete:p},null,512)]),_:1})])}}});const ie=lt(xt,[["__scopeId","data-v-a5a575a5"]]);export{ie as default};
