import{d as B,l as g,r as k,h as _,c as S,e as l,w as i,u as m,k as r,F as L,O as R,m as T,i as P,t as y,J as M,a as x,aG as G,P as A,D as H,G as J,_ as Y,ac as q,E as K,H as Q,aj as W,$ as X,a0 as Z,a1 as ee,L as te}from"./index-ac08d87d.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{g as ae,a as oe}from"./diy_form-80c117d7.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const ne={class:"mt-[16px] flex justify-end"},re=B({__name:"form-select-content",props:{formId:{type:[Number,String],default:0}},setup(E,{expose:F}){const V=E,c=g({}),b=k(),D=k(),e=g({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:"",type:"",verify_form_ids:[]}}),n=g({form_id:V.formId}),p=(o=1)=>{e.loading=!0,e.page=o,n.form_id&&(e.searchParam.verify_form_ids=[n.form_id]),ae({page:e.page,limit:e.limit,...e.searchParam}).then(t=>{e.loading=!1,e.data=t.data.data,e.data.forEach(s=>{s.checked=s.form_id==n.form_id}),e.total=t.data.total,h()}).catch(()=>{e.loading=!1})};((o="")=>{oe().then(t=>{for(let s in c)delete c[s];for(const s in t.data)c[s]=t.data[s]})})(),p();const w=(o,t)=>{o?n.form_id=t.form_id:n.form_id=0,h()},h=()=>{G(()=>{for(let o=0;o<e.data.length;o++)e.data[o].checked=!1,n.form_id==e.data[o].form_id&&(e.data[o].checked=!0,Object.assign(n,e.data[o]))})},z=o=>{o&&(o.resetFields(),p())};return F({getData:()=>{if(n.form_id==0){A({type:"warning",message:`${r("formSelectContentTips")}`});return}return{name:"DIY_FORM",title:n.page_title,url:`/app/pages/index/diy_form?form_id=${n.form_id}`,action:"",formId:n.form_id}}}),(o,t)=>{const s=H,f=J,C=Y,I=q,v=K,N=Q,j=W,u=X,O=Z,U=ee,$=te;return _(),S("div",null,[l(N,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:b},{default:i(()=>[l(f,{label:m(r)("formSelectContentTitle"),prop:"title",class:"form-item-wrap"},{default:i(()=>[l(s,{modelValue:e.searchParam.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchParam.title=a),modelModifiers:{trim:!0},placeholder:m(r)("formSelectContentTitlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:m(r)("formSelectContentTypeName"),prop:"type",class:"form-item-wrap"},{default:i(()=>[l(I,{modelValue:e.searchParam.type,"onUpdate:modelValue":t[1]||(t[1]=a=>e.searchParam.type=a),placeholder:m(r)("formSelectContentTypeNamePlaceholder")},{default:i(()=>[l(C,{label:m(r)("formSelectContentTypeAll"),value:""},null,8,["label"]),(_(!0),S(L,null,R(c,(a,d)=>(_(),T(C,{label:a.title,value:d,key:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{class:"form-item-wrap"},{default:i(()=>[l(v,{type:"primary",onClick:t[2]||(t[2]=a=>p())},{default:i(()=>[P(y(m(r)("search")),1)]),_:1}),l(v,{onClick:t[3]||(t[3]=a=>z(b.value))},{default:i(()=>[P(y(m(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),M((_(),T(O,{data:e.data,size:"large",ref_key:"tableRef",ref:D},{empty:i(()=>[x("span",null,y(e.loading?"":m(r)("emptyData")),1)]),default:i(()=>[l(u,{"min-width":"7%"},{default:i(({row:a})=>[l(j,{modelValue:a.checked,"onUpdate:modelValue":d=>a.checked=d,onChange:d=>w(d,a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{prop:"page_title",label:m(r)("formSelectContentTitle"),"min-width":"65%"},null,8,["label"]),l(u,{prop:"type_name",label:m(r)("formSelectContentTypeName"),"min-width":"25%"},null,8,["label"])]),_:1},8,["data"])),[[$,e.loading]]),x("div",ne,[l(U,{"current-page":e.page,"onUpdate:current-page":t[4]||(t[4]=a=>e.page=a),"page-size":e.limit,"onUpdate:page-size":t[5]||(t[5]=a=>e.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:t[6]||(t[6]=a=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])])}}});const ie=le(re,[["__scopeId","data-v-1db68fd8"]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{Fe as _};
