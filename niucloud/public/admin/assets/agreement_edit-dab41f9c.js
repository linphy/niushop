import{d as N,v as S,f as I,r as k,l as L,M,k as i,h as y,c as P,e as o,w as l,u as a,at as T,J as U,m as j,a as w,i as h,t as V,au as q,K as A,D as H,G as K,H as O,E as G,L as J}from"./index-ad4e42d5.js";/* empty css                   *//* empty css                  *//* empty css                     */import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-ae86da64.js";/* empty css                 *//* empty css                *//* empty css                       */import{K as Q,L as W}from"./sys-747f9e8e.js";import{u as X}from"./tabbar-0cf595c6.js";import"./index.vue_vue_type_style_index_0_lang-32b12c72.js";/* empty css                  *//* empty css                   */import"./attachment-621e6518.js";import"./index.vue_vue_type_script_setup_true_lang-4946e851.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-9334503d.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-39123e55.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"main-container"},Z={class:"fixed-footer-wrap"},ee={class:"fixed-footer"},Le=N({__name:"agreement_edit",setup(te){const d=S(),x=I(),u=d.query.key||"",s=k(!1),E=X(),D=d.meta.title,_={agreement_key:"",content:"",title:"",agreement_key_name:""},t=L({..._});s.value=!0,u&&(async(m="")=>{Object.assign(t,_);const e=await(await Q(m)).data;Object.keys(t).forEach(r=>{e[r]!=null&&(t[r]=e[r])}),s.value=!1})(u);const f=k(),B=M(()=>({title:[{required:!0,message:i("titlePlaceholder"),trigger:"blur"}]})),C=async m=>{s.value||!m||await m.validate(async e=>{if(e){s.value=!0;const r=t;r.key=t.agreement_key,W(r).then(p=>{s.value=!1,v()}).catch(()=>{s.value=!1})}})},v=()=>{E.removeTab(d.path),x.push({path:"/setting/agreement"})};return(m,e)=>{const r=q,p=A,g=H,c=K,F=z,R=O,b=G,$=J;return y(),P("div",Y,[o(p,{class:"card !border-none",shadow:"never"},{default:l(()=>[o(r,{content:a(D),icon:a(T),onBack:e[0]||(e[0]=n=>m.$router.back())},null,8,["content","icon"])]),_:1}),U((y(),j(p,{class:"box-card mt-[15px] !border-none",shadow:"never"},{default:l(()=>[o(R,{model:t,"label-width":"90px",ref_key:"formRef",ref:f,rules:a(B),class:"page-form"},{default:l(()=>[o(c,{label:a(i)("type")},{default:l(()=>[o(g,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.agreement_key_name=n),modelModifiers:{trim:!0},readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:a(i)("title"),prop:"title"},{default:l(()=>[o(g,{modelValue:t.title,"onUpdate:modelValue":e[2]||(e[2]=n=>t.title=n),modelModifiers:{trim:!0},clearable:"",placeholder:a(i)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(c,{label:a(i)("content")},{default:l(()=>[o(F,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=n=>t.content=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[$,s.value]]),w("div",Z,[w("div",ee,[o(b,{type:"primary",onClick:e[4]||(e[4]=n=>C(f.value))},{default:l(()=>[h(V(a(i)("save")),1)]),_:1}),o(b,{onClick:e[5]||(e[5]=n=>v())},{default:l(()=>[h(V(a(i)("cancel")),1)]),_:1})])])])}}});export{Le as default};
