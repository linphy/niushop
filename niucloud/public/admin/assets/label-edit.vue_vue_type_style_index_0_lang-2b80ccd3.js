import{d as k,r as c,n as F,q as B,N as l,h as g,I as V,w as r,a as C,e as d,i as h,t as w,u as s,y as I,W as P,X as U,Y as R,E as $,aa as j,$ as q}from"./index-a2233f8b.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{t as O,v as S,w as T}from"./goods-b7f9d4bf.js";const W={class:"dialog-footer"},Z=k({__name:"label-edit",emits:["complete"],setup(X,{expose:y,emit:x}){const m=c(!1),n=c(!1),p=c(""),_={label_id:"",label_name:"",memo:"",sort:""},a=F({..._}),b=c(),D=B(()=>({label_name:[{required:!0,message:l("labelNamePlaceholder"),trigger:"blur"}]})),E=async i=>{if(n.value||!i)return;const e=a.label_id?O:S;await i.validate(async t=>{t&&(n.value=!0,e(a).then(f=>{n.value=!1,m.value=!1,x("complete")}).catch(f=>{n.value=!1}))})};return y({showDialog:m,setFormData:async(i=null)=>{if(Object.assign(a,_),n.value=!0,i){const e=await(await T(i.label_id)).data;p.value=l("updateLabel"),e&&Object.keys(a).forEach(t=>{e[t]!=null&&(a[t]=e[t])})}else p.value=l("addLabel");n.value=!1}}),(i,e)=>{const t=P,u=U,f=R,v=$,N=j,L=q;return g(),V(N,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o),title:p.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:r(()=>[C("span",W,[d(v,{onClick:e[3]||(e[3]=o=>m.value=!1)},{default:r(()=>[h(w(s(l)("cancel")),1)]),_:1}),d(v,{type:"primary",loading:n.value,onClick:e[4]||(e[4]=o=>E(b.value))},{default:r(()=>[h(w(s(l)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[I((g(),V(f,{model:a,"label-width":"120px",ref_key:"formRef",ref:b,rules:s(D),class:"page-form"},{default:r(()=>[d(u,{label:s(l)("labelName"),prop:"label_name"},{default:r(()=>[d(t,{modelValue:a.label_name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.label_name=o),clearable:"",placeholder:s(l)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:s(l)("memo")},{default:r(()=>[d(t,{modelValue:a.memo,"onUpdate:modelValue":e[1]||(e[1]=o=>a.memo=o),type:"textarea",clearable:"",placeholder:s(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:s(l)("sort")},{default:r(()=>[d(t,{modelValue:a.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>a.sort=o),clearable:"",placeholder:s(l)("sortPlaceholder"),class:"input-width",onkeyup:"this.value = this.value.replace(/[^\\d\\.]/g,'');"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[L,n.value]])]),_:1},8,["modelValue","title"])}}});export{Z as _};
