import{d as N,f as j,O as I,n as S,r as C,h as p,c,e as t,w as o,a as _,t as i,u as l,i as u,N as a,y as L,I as U,a8 as G,E as M,W as O,X as W,Y as X,_ as Y,ah as q,aj as A,a4 as H,$ as J}from"./index-a2233f8b.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{d as K,f as Q}from"./marketing-04947b9e.js";import{_ as Z}from"./coupon-spread-popup.vue_vue_type_script_setup_true_lang-cc7e8926.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                 *//* empty css                        */import"./browser-a1ac24ac.js";import"./sys-6f61a94e.js";const te={class:"main-container"},ae={class:"flex justify-between items-center mb-[5px]"},oe={class:"text-[20px]"},ne={class:"mt-[10px]"},le={key:0},ie={key:1},se={key:0},re={key:1},pe={key:0},de={key:1},ce={key:0},me={key:1},_e={class:"mt-[16px] flex justify-end"},ue=N({__name:"list",setup(fe){const h=j(),x=I().meta.title,n=S({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:""}}),y=C(),f=(r=1)=>{n.loading=!0,n.page=r,K({page:n.page,limit:n.limit,...n.searchParam}).then(s=>{n.loading=!1,n.data=s.data.data,n.total=s.data.total}).catch(()=>{n.loading=!1})};f();const b=C(null),E=r=>{b.value.show(r)},w=()=>{h.push("/shop/marketing/coupon/add")},P=r=>{h.push("/shop/marketing/coupon/edit?id="+r.id)},$=r=>{h.push("/shop/marketing/coupon/collection?id="+r.id)},B=r=>{G.confirm(a("couponDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{Q(r.id).then(()=>{f()}).catch(()=>{})})},T=r=>{r&&(r.resetFields(),f())};return(r,s)=>{const m=M,z=O,v=W,F=X,k=Y,d=q,R=A,V=H,D=J;return p(),c("div",te,[t(k,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[_("div",ae,[_("span",oe,i(l(x)),1),t(m,{type:"primary",onClick:w},{default:o(()=>[u(i(l(a)("addCoupon")),1)]),_:1})]),t(k,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[t(F,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:y},{default:o(()=>[t(v,{label:l(a)("title"),prop:"title"},{default:o(()=>[t(z,{modelValue:n.searchParam.title,"onUpdate:modelValue":s[0]||(s[0]=e=>n.searchParam.title=e),placeholder:l(a)("titlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,null,{default:o(()=>[t(m,{type:"primary",onClick:s[1]||(s[1]=e=>f())},{default:o(()=>[u(i(l(a)("search")),1)]),_:1}),t(m,{onClick:s[2]||(s[2]=e=>T(y.value))},{default:o(()=>[u(i(l(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),_("div",ne,[L((p(),U(R,{data:n.data,size:"large"},{empty:o(()=>[_("span",null,i(n.loading?"":l(a)("emptyData")),1)]),default:o(()=>[t(d,{prop:"title",label:l(a)("title"),"min-width":"130"},null,8,["label"]),t(d,{prop:"type_name",label:l(a)("type"),"min-width":"130"},null,8,["label"]),t(d,{prop:"price",label:l(a)("price"),"min-width":"130"},{default:o(({row:e})=>[_("span",null,"¥"+i(e.price),1)]),_:1},8,["label"]),t(d,{label:l(a)("receiveType"),"min-width":"130"},{default:o(({row:e})=>[e.receive_type==1?(p(),c("span",le,"是")):(p(),c("span",ie,"否"))]),_:1},8,["label"]),t(d,{label:l(a)("sumCount"),"min-width":"140"},{default:o(({row:e})=>[e.sum_count!="-1"?(p(),c("span",se,i(e.sum_count||""),1)):(p(),c("span",re,"不限量"))]),_:1},8,["label"]),t(d,{label:l(a)("remainCount"),"min-width":"140"},{default:o(({row:e})=>[_("span",null,i(e.receive_count||0)+" / "+i(e.receive_use_count||0),1)]),_:1},8,["label"]),t(d,{label:l(a)("threshold"),"min-width":"130"},{default:o(({row:e})=>[e.min_condition_money=="0.00"?(p(),c("span",pe,"无门槛")):(p(),c("span",de,"满"+i(e.min_condition_money)+"元可用",1))]),_:1},8,["label"]),t(d,{label:l(a)("validType"),"min-width":"210"},{default:o(({row:e})=>[e.valid_type==1?(p(),c("span",ce," 领取之日起"+i(e.length||"")+" 天内有效",1)):(p(),c("span",me," 使用截止时间至"+i(e.valid_end_time||""),1))]),_:1},8,["label"]),t(d,{label:l(a)("operation"),fixed:"right",align:"right","min-width":"160"},{default:o(({row:e})=>[t(m,{type:"primary",link:"",onClick:g=>E(e)},{default:o(()=>[u(i(l(a)("spreadGoods")),1)]),_:2},1032,["onClick"]),t(m,{type:"primary",link:"",onClick:g=>P(e)},{default:o(()=>[u(i(l(a)("edit")),1)]),_:2},1032,["onClick"]),t(m,{type:"primary",link:"",onClick:g=>B(e)},{default:o(()=>[u(i(l(a)("delete")),1)]),_:2},1032,["onClick"]),t(m,{type:"primary",link:"",onClick:g=>$(e)},{default:o(()=>[u(i(l(a)("receive")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[D,n.loading]]),_("div",_e,[t(V,{"current-page":n.page,"onUpdate:current-page":s[3]||(s[3]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":s[4]||(s[4]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:s[5]||(s[5]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1}),t(Z,{ref_key:"couponSpreadPopupRef",ref:b},null,512)])}}});const Ge=ee(ue,[["__scopeId","data-v-e95b2622"]]);export{Ge as default};
