import{d as F,r as p,n as U,q as C,N as l,h as g,I as V,w as d,a as I,e as t,i as h,t as y,u as n,y as P,W as R,X as $,Y as j,E as q,aa as O,$ as L}from"./index-a2233f8b.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import{_ as S}from"./index-58cd4749.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{e as T,f as W,h as X}from"./goods-b7f9d4bf.js";const Y={class:"dialog-footer"},le=F({__name:"brand-edit",emits:["complete"],setup(z,{expose:w,emit:B}){const u=p(!1),r=p(!1),c=p(""),f={brand_id:"",brand_name:"",logo:"",desc:"",sort:""},a=U({...f}),b=p(),x=C(()=>({brand_name:[{required:!0,message:l("brandNamePlaceholder"),trigger:"blur"}]})),D=async i=>{if(r.value||!i)return;const e=a.brand_id?T:W;await i.validate(async s=>{s&&(r.value=!0,e(a).then(_=>{r.value=!1,u.value=!1,B("complete")}).catch(_=>{r.value=!1}))})};return w({showDialog:u,setFormData:async(i=null)=>{if(Object.assign(a,f),r.value=!0,i){const e=await(await X(i.brand_id)).data;c.value=l("updateBrand"),e&&Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s])})}else c.value=l("addBrand");r.value=!1}}),(i,e)=>{const s=R,m=$,_=S,E=j,v=q,N=O,k=L;return g(),V(N,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=o=>u.value=o),title:c.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[I("span",Y,[t(v,{onClick:e[4]||(e[4]=o=>u.value=!1)},{default:d(()=>[h(y(n(l)("cancel")),1)]),_:1}),t(v,{type:"primary",loading:r.value,onClick:e[5]||(e[5]=o=>D(b.value))},{default:d(()=>[h(y(n(l)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[P((g(),V(E,{model:a,"label-width":"120px",ref_key:"formRef",ref:b,rules:n(x),class:"page-form"},{default:d(()=>[t(m,{label:n(l)("brandName"),prop:"brand_name"},{default:d(()=>[t(s,{modelValue:a.brand_name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.brand_name=o),clearable:"",placeholder:n(l)("brandNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:n(l)("logo")},{default:d(()=>[t(_,{modelValue:a.logo,"onUpdate:modelValue":e[1]||(e[1]=o=>a.logo=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:n(l)("desc")},{default:d(()=>[t(s,{modelValue:a.desc,"onUpdate:modelValue":e[2]||(e[2]=o=>a.desc=o),type:"textarea",clearable:"",placeholder:n(l)("descPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:n(l)("sort")},{default:d(()=>[t(s,{modelValue:a.sort,"onUpdate:modelValue":e[3]||(e[3]=o=>a.sort=o),clearable:"",placeholder:n(l)("sortPlaceholder"),class:"input-width",onkeyup:"this.value = this.value.replace(/[^\\d\\.]/g,'');"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[k,r.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};
