import{d as U,r as V,cL as N,cX as me,cY as fe,q as D,h as d,c as y,e as t,w as o,a as n,t as $,u as e,N as h,aR as J,aL as he,cD as xe,ap as H,cZ as ae,c_ as Q,K as O,n as ee,cU as ve,i as B,af as ge,aI as we,aT as ye,aU as be,aV as ke,W as $e,X as Se,Y as Ve,E as le,aa as re,p as Ee,g as Ce,f as K,U as R,cV as De,cM as ce,v as Ie,I as k,G as q,F as C,B as T,y as te,co as oe,A as L,c$ as Re,d0 as Te,an as Ue,ao as Pe,Q as X,O as Y,d1 as Me,ai as Le,d2 as de,ae as se,s as ie,R as Fe,d3 as We,cF as ue,V as je,d4 as Be,Z as pe,cW as Ne,cN as qe,a_ as Ae,J as ze,a0 as He}from"./index-a2233f8b.js";/* empty css                     *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                    */import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-be5440b6.js";/* empty css                  *//* empty css                        *//* empty css                 *//* empty css                  */import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                         *//* empty css                  *//* empty css                  */import{s as Oe}from"./personal-11fea1f1.js";import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        */import{_ as Ke}from"./icon-addon-339e16d0.js";/* empty css                */const Xe={class:"flex"},Ye={class:"setting-item flex items-center justify-between mb-[10px]"},Ze={class:"title text-base text-tx-secondary"},Ge={class:""},Je={class:"setting-item flex items-center justify-between mb-[10px]"},Qe={class:"title text-base text-tx-secondary"},et={class:""},tt=U({__name:"layout-setting",setup(u){const x=V(!1),f=N(),p=me(),v=fe(p),s=D({get(){return f.dark},set(a){f.setTheme("dark",a),v(a),Q(f.theme,f.dark?"dark":"light")}}),b=D({get(){return f.theme},set(a){f.setTheme("theme",a),Q(f.theme,f.dark?"dark":"light")}});return(a,r)=>{const w=A,g=he,c=xe,l=H,i=ae;return d(),y("div",Xe,[t(w,{name:"element-Setting",onClick:r[0]||(r[0]=m=>x.value=!0)}),t(i,{modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=m=>x.value=m),title:e(h)("layout.layoutSetting"),size:"300px"},{default:o(()=>[t(l,null,{default:o(()=>[n("div",Ye,[n("div",Ze,$(e(h)("layout.darkMode")),1),n("div",Ge,[t(g,{modelValue:e(s),"onUpdate:modelValue":r[1]||(r[1]=m=>J(s)?s.value=m:null),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])]),n("div",Je,[n("div",Qe,$(e(h)("layout.themeColor")),1),n("div",et,[t(c,{modelValue:e(b),"onUpdate:modelValue":r[2]||(r[2]=m=>J(b)?b.value=m:null)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue","title"])])}}});const ot=Z(tt,[["__scopeId","data-v-fa6914b4"]]),z=u=>(Ee("data-v-f815e5f0"),u=u(),Ce(),u),st={class:"userinfo flex h-full items-center"},nt={class:"user-name pl-[8px]"},at=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"切换站点")],-1)),lt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"账号设置")],-1)),rt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"修改密码")],-1)),ct=z(()=>n("div",{class:"flex items-center leading-[1] py-[2px]"},[n("span",{class:"iconfont icontuichudenglu !text-[21px] mr-[8px]"}),n("span",{class:"text-[14px]"},"退出登录")],-1)),dt={class:"form-tip"},it={class:"dialog-footer"},ut=U({__name:"user-info",setup(u){const x=O(),f=K(),p=g=>{switch(g){case"logout":x.logout();break}},v=g=>{f.push(g)},s=V(!1),b=V(),a=ee({original_password:"",password:"",password_copy:""}),r=ee({original_password:[{required:!0,message:h("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}]}),w=g=>{g&&g.validate(c=>{if(c){let l="";if(a.password&&!a.original_password&&(l=h("originalPasswordHint")),a.password&&a.original_password&&!a.password_copy&&(l=h("newPasswordHint")),a.password&&a.original_password&&a.password_copy&&a.password!=a.password_copy&&(l=h("doubleCipherHint")),l){ge({type:"error",message:l});return}Oe(a).then(i=>{s.value=!1})}else return!1})};return(g,c)=>{const l=we,i=A,m=ye,F=be,W=ke,I=$e,E=Se,P=Ve,M=le,j=re;return d(),y("div",null,[t(W,{onCommand:p,tabindex:1},{dropdown:o(()=>[t(F,null,{default:o(()=>[t(m,{onClick:c[0]||(c[0]=_=>v("/home/index"))},{default:o(()=>[at]),_:1}),t(m,{onClick:c[1]||(c[1]=_=>v("/user/center"))},{default:o(()=>[lt]),_:1}),t(m,{onClick:c[2]||(c[2]=_=>s.value=!0)},{default:o(()=>[rt]),_:1}),t(m,{command:"logout"},{default:o(()=>[ct]),_:1})]),_:1})]),default:o(()=>[n("div",st,[t(l,{size:25,icon:e(ve)},null,8,["icon"]),n("div",nt,$(e(x).userInfo.username),1),t(i,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),t(j,{modelValue:s.value,"onUpdate:modelValue":c[8]||(c[8]=_=>s.value=_),width:"450px",title:"修改密码"},{footer:o(()=>[n("span",it,[t(M,{onClick:c[6]||(c[6]=_=>s.value=!1)},{default:o(()=>[B($(e(h)("cancel")),1)]),_:1}),t(M,{type:"primary",onClick:c[7]||(c[7]=_=>w(b.value))},{default:o(()=>[B($(e(h)("save")),1)]),_:1})])]),default:o(()=>[n("div",null,[t(P,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:r,class:"page-form"},{default:o(()=>[t(E,{label:e(h)("originalPassword"),prop:"original_password"},{default:o(()=>[t(I,{modelValue:a.original_password,"onUpdate:modelValue":c[3]||(c[3]=_=>a.original_password=_),type:"password",placeholder:e(h)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(E,{label:e(h)("newPassword"),prop:"password"},{default:o(()=>[t(I,{modelValue:a.password,"onUpdate:modelValue":c[4]||(c[4]=_=>a.password=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),n("div",dt,$(e(h)("passwordTip")),1)]),_:1},8,["label"]),t(E,{label:e(h)("passwordCopy"),prop:"password_copy"},{default:o(()=>[t(I,{modelValue:a.password_copy,"onUpdate:modelValue":c[5]||(c[5]=_=>a.password_copy=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}});const pt=Z(ut,[["__scopeId","data-v-f815e5f0"]]),_t={class:"left-panel h-full flex items-center"},mt={class:"flex items-center h-full pl-[10px] hidden-xs-only"},ft={class:"right-panel h-full flex items-center justify-end"},ht=["title"],xt={class:"navbar-item flex items-center h-full cursor-pointer"},vt={class:"navbar-item flex items-center h-full cursor-pointer"},gt={class:"dialog-footer"},wt=U({__name:"index",setup(u){const x=R.get("app_type");De();const f=N(),p=ce(),v=Y(),s=V(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),b=D(()=>f.dark),a=V(!1),r=V(""),w=V("");R.get("comparisonTokenStorage")&&(r.value=R.get("comparisonTokenStorage")),R.get("comparisonSiteIdStorage")&&(w.value=R.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",i=>{document.visibilityState==="visible"&&(w.value!=R.get("siteId")||r.value!=R.get("token"))&&(a.value=!0)});const g=()=>{a.value=!1,location.reload()};Ie(()=>{window.onresize=()=>(()=>{s.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const c=()=>{p.routeRefreshTag&&p.refreshRouterView()},l=D(()=>{const i=v.matched.filter(m=>m.meta.title);return i[0]&&i[0].path=="/"&&i.splice(0,1),i});return(i,m)=>{const F=A,W=Re,I=Te,E=Ue,P=Pe,M=le,j=re,_=X;return d(),k(_,{class:L(["h-full px-[10px]",{"layout-header border-b border-color":!e(b)}])},{default:o(()=>[t(P,{class:"w-100 h-full w-full"},{default:o(()=>[t(E,{span:12},{default:o(()=>[n("div",_t,[n("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:c},[t(F,{name:"element-Refresh"})]),n("div",mt,[t(I,{separator:"/"},{default:o(()=>[(d(!0),y(C,null,q(e(l),(S,G)=>(d(),k(W,{key:G},{default:o(()=>[B($(S.meta.title),1)]),_:2},1024))),128))]),_:1})])])]),_:1}),t(E,{span:12},{default:o(()=>[n("div",ft,[e(x)=="site"?(d(),y("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:e(h)("newInfo")},null,8,ht)):T("",!0),n("div",xt,[t(ot)]),n("div",vt,[t(pt)])])]),_:1})]),_:1}),te(n("input",{type:"hidden","onUpdate:modelValue":m[0]||(m[0]=S=>r.value=S)},null,512),[[oe,r.value]]),te(n("input",{type:"hidden","onUpdate:modelValue":m[1]||(m[1]=S=>w.value=S)},null,512),[[oe,w.value]]),t(j,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=S=>a.value=S),title:e(h)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:o(()=>[n("span",gt,[t(M,{onClick:g},{default:o(()=>[B($(e(h)("layout.detectionLoginOperation")),1)]),_:1})])]),default:o(()=>[n("span",null,$(e(h)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"])]),_:1},8,["class"])}}});const yt=Z(wt,[["__scopeId","data-v-674ab7bc"]]),bt={class:L(["ml-[10px]"])},kt={key:2,class:"!border-0 !border-t-[1px] border-solid mx-[25px] bg-[#f7f7f7] my-[5px]"},_e=U({__name:"menu-item",props:{routes:{type:Object,required:!0}},setup(u){const x=u,f=K(),v=O().siteInfo,s=D(()=>x.routes.meta),b=D(()=>{const a={};return v==null||v.apps.forEach(r=>{a[r.key]=r}),v==null||v.site_addons.forEach(r=>{a[r.key]=r}),a});return(a,r)=>{const w=Me,g=Le,c=de;return e(s).show?(d(),y(C,{key:0},[u.routes.children?(d(),k(w,{key:0,index:String(u.routes.name)},{title:o(()=>[n("span",bt,$(e(s).title),1)]),default:o(()=>[(d(!0),y(C,null,q(u.routes.children,(l,i)=>(d(),k(_e,{routes:l,key:i},null,8,["routes"]))),128))]),_:1},8,["index"])):(d(),y(C,{key:1},[e(s).addon&&e(s).parent_route&&e(s).parent_route.addon==""?(d(),k(c,{key:0,index:String(u.routes.name),onClick:r[0]||(r[0]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[t(g,{placement:"right",effect:"light"},{content:o(()=>[B(" 该功能仅限"+$(e(b)[e(s).addon].title)+"使用 ",1)]),default:o(()=>[n("span",{class:L([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1})]),_:1},8,["index"])):(d(),k(c,{key:1,index:String(u.routes.name),onClick:r[1]||(r[1]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[n("span",{class:L([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1},8,["index"]))],64)),u.routes.is_border?(d(),y("div",kt)):T("",!0)],64)):T("",!0)}}});const $t={class:"w-[124px] px-[8px] bg-[#282c34] h-screen one-menu"},St={key:0,class:"logo flex items-center m-auto h-[64px]"},Vt=["src"],Et={key:1,class:"max-h-[40px] max-w-[40px] rounded-full",src:Ke,alt:""},Ct={key:1,class:"logo flex items-center justify-center h-[64px]"},Dt=n("i",{class:"text-3xl iconfont iconyunkongjian"},null,-1),It=[Dt],Rt={key:0,class:"w-[16px] h-[16px] relative flex justify-center"},Tt={class:"relative flex-1 w-0"},Ut={class:"ml-[10px] w-full truncate"},Pt=n("div",{class:"h-[48px]"},null,-1),Mt={class:"w-[140px] h-[64px] flex items-center justify-center text-[16px] border-0 border-b-[1px] border-solid border-[#eee]"},Lt=n("div",{class:"h-[48px]"},null,-1),ne=U({__name:"side",setup(u){const x=N(),f=O(),p=Y(),v=K(),s=f.siteInfo,b=f.routers,a=f.addonIndexRoute,r=V([]),w=V([]),g={};if(b.forEach(l=>{l.meta.addon==""?(l.children&&l.children.length&&(l.name=se(l.children)),r.value.push(l)):l.meta.addon!=""&&(s==null?void 0:s.apps.length)<=1&&(s==null?void 0:s.apps[0].key)==l.meta.addon?l.children?(l.children.forEach(i=>{i.path=`${l.path}/${i.path}`,i.children&&i.children.length&&(i.name=se(i.children))}),r.value.unshift(...l.children)):r.value.unshift(l):g[l.meta.addon]=l}),(s==null?void 0:s.apps.length)>1){const l=[];s==null||s.apps.forEach(i=>{var m;l.push({path:g[i.key]?g[i.key].path:"",meta:{icon:((m=g[i.key])==null?void 0:m.meta.icon)||"element-Setting",addon:i.key,title:i.title,app:i.app,show:!0},name:a[i.key]})}),r.value.unshift(...l)}const c=V(p.matched[1].path);return ie(p,()=>{(s==null?void 0:s.apps.length)>1?(w.value=p.matched[1].children,c.value=p.matched[1].path):p.meta.addon==""?(c.value=p.matched[1].path,w.value=p.matched[1].children??[]):p.meta.addon&&p.meta.addon!=(s==null?void 0:s.apps[0].key)?(c.value="/site/app",w.value=p.matched[1].children??[]):(c.value=p.matched[2].path,w.value=p.matched[2].children??[])},{immediate:!0}),(l,i)=>{const m=ue,F=je,W=A,I=de,E=Be,P=H,M=pe,j=X;return d(),k(j,{class:"w-100 h-screen"},{default:o(()=>[t(M,{class:"p-0 flex"},{default:o(()=>[n("div",$t,[t(m,{class:"logo-wrap"},{default:o(()=>[e(x).menuIsCollapse?(d(),y("div",Ct,It)):(d(),y("div",St,[e(s).logo?(d(),y("img",{key:0,class:"max-h-[40px] max-w-[40px] rounded-full",src:e(Fe)(e(s).logo),alt:""},null,8,Vt)):(d(),y("img",Et))]))]),_:1}),t(P,{class:"h-[calc( 100vh - 64px )]"},{default:o(()=>[t(E,{"default-active":c.value,router:!0,class:"aside-menu","unique-opened":"true",collapse:e(x).menuIsCollapse},{default:o(()=>[(d(!0),y(C,null,q(r.value,(_,S)=>(d(),y(C,{key:S},[_.meta.show?(d(),k(I,{key:0,index:_.path,onClick:G=>e(v).push({name:_.name})},{title:o(()=>[n("div",Tt,[n("span",Ut,$(_.meta.short_title||_.meta.title),1)])]),default:o(()=>[_.meta.icon?(d(),y("div",Rt,[e(We)(_.meta.icon)?(d(),k(F,{key:0,class:"w-[16px] h-[16px] rounded-[50%] overflow-hidden",src:_.meta.icon,fit:"fill"},null,8,["src"])):(d(),k(W,{key:1,name:_.meta.icon,class:"absolute top-[50%] -translate-y-[50%]"},null,8,["name"]))])):T("",!0)]),_:2},1032,["index","onClick"])):T("",!0)],64))),128))]),_:1},8,["default-active","collapse"]),Pt]),_:1})]),w.value.length?(d(),k(P,{key:0,class:"two-menu w-[140px]"},{default:o(()=>[n("div",Mt,$(e(p).matched[1].meta.title),1),t(E,{"default-active":e(p).name,router:!0,class:"aside-menu",collapse:e(x).menuIsCollapse},{default:o(()=>[(d(!0),y(C,null,q(w.value,(_,S)=>(d(),k(_e,{routes:_,key:S},null,8,["routes"]))),128))]),_:1},8,["default-active","collapse"]),Lt]),_:1})):T("",!0)]),_:1})]),_:1})}}});const Ft=U({__name:"index",setup(u){const x=N(),f=D(()=>x.dark),p=Y();return ie(p,()=>{x.$patch(v=>{v.menuDrawer=!1})}),(v,s)=>{const b=Ne,a=ae;return d(),y(C,null,[t(b,{class:L(["h-screen layout-aside w-auto",{bright:!e(f)}])},{default:o(()=>[t(ne,{class:"hidden-xs-only"})]),_:1},8,["class"]),t(a,{modelValue:e(x).menuDrawer,"onUpdate:modelValue":s[0]||(s[0]=r=>e(x).menuDrawer=r),direction:"ltr","with-header":!1,"custom-class":"aside-drawer",size:"210px"},{default:o(()=>[t(ne)]),_:1},8,["modelValue"])],64)}}});const Wt={class:"common-layout min-w-[1200px]"},jt={class:"p-[10px]"},io=U({__name:"index",setup(u){const x=ce(),f=qe(),p=N(),v=D(()=>p.dark);return(s,b)=>{const a=ue,r=He("router-view"),w=H,g=pe,c=X;return d(),y("div",Wt,[t(c,{class:"w-100 h-screen"},{default:o(()=>[t(Ft),t(c,null,{default:o(()=>[t(a,null,{default:o(()=>[t(yt)]),_:1}),t(g,{class:L(["main-wrap h-full p-0",{"bg-page":e(v)}])},{default:o(()=>[t(w,null,{default:o(()=>[n("div",jt,[e(x).routeRefreshTag?(d(),k(r,{key:0},{default:o(({Component:l,route:i})=>[(d(),k(Ae,{include:e(f).tabNames},[(d(),k(ze(l),{key:i.fullPath}))],1032,["include"]))]),_:1})):T("",!0)])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})])}}});export{io as default};
