import{d as I,l as V,r as s,as as R,ag as T,P as k,k as t,h as c,c as f,e as l,w as i,a,t as r,u as o,i as z,B as C,m as H,z as E,a7 as M,a8 as O,C as q,E as A,D as G,V as J}from"./index-785a2eda.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import{b as K}from"./browser-a1ac24ac.js";import{r as W}from"./sys-89fbb042.js";import{g as X}from"./diy_form-3cdd20a4.js";const Y={key:0,class:"promote-flex flex"},Z={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},ee={class:"px-[20px] flex-1"},te={class:"mb-[10px]"},oe=["href"],ae={key:1,class:"promote-flex flex"},se={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},le={class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},ne={key:1,class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},re={class:"px-[20px] flex-1"},pe=["href"],ye=I({__name:"form-spread-popup",setup(ce,{expose:D}){const x=V({}),d=s(!1),p=s("h5"),h=s("");s("");const v=s(""),m=s(""),g=s(""),u=V({path:""});W().then(e=>{h.value=e.data.wap_url});const B=()=>{m.value=`${h.value}${g.value}`,K.toDataURL(m.value,{errorCorrectionLevel:"L",margin:0,width:120}).then(e=>{v.value=e})},U=e=>{p.value="h5",Object.assign(x,e),g.value=`/app/pages/index/diy_form?form_id=${x.form_id}`,B(),F(),d.value=!0},F=()=>{X({form_id:x.form_id}).then(e=>{e.data&&(u.path=e.data.path)})},{copy:L,isSupported:Q,copied:w}=R(),N=e=>{Q.value||k({message:t("notSupportCopy"),type:"warning"}),L(e)};return T(w,()=>{w.value&&k({message:t("copySuccess"),type:"success"})}),D({showDialog:d,show:U}),(e,n)=>{const y=M,P=O,b=q,S=A,$=G,j=J;return c(),f("div",null,[l(j,{modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=_=>d.value=_),title:o(t)("formPromotion"),width:"500px","destroy-on-close":!0},{default:i(()=>[l(P,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=_=>p.value=_),class:"mb-[10px]"},{default:i(()=>[l(y,{label:"H5",name:"h5"}),l(y,{label:"微信小程序",name:"weapp"})]),_:1},8,["modelValue"]),p.value=="h5"?(c(),f("div",Y,[a("div",Z,[l(b,{src:v.value},null,8,["src"])]),a("div",ee,[a("div",te,r(o(t)("promoteUrl")),1),l($,{class:"mb-[10px]",readonly:"",value:m.value},{append:i(()=>[l(S,{onClick:n[1]||(n[1]=_=>N(m.value))},{default:i(()=>[z(r(o(t)("copy")),1)]),_:1})]),_:1},8,["value"]),a("a",{class:"text-primary",href:v.value,download:""},r(o(t)("downLoadQRCode")),9,oe)])])):C("",!0),p.value=="weapp"?(c(),f("div",ae,[a("div",se,[u.path?(c(),H(b,{key:0,src:o(E)(u.path),class:"w-[150px] h-[150px]"},{error:i(()=>[a("div",le,r(o(t)("configureFailed")),1)]),_:1},8,["src"])):(c(),f("div",ne,r(o(t)("configureFailed")),1))]),a("div",re,[a("a",{class:"text-primary",href:o(E)(u.path),target:"_blank",download:""},r(o(t)("downLoadQRCode")),9,pe)])])):C("",!0)]),_:1},8,["modelValue","title"])])}}});export{ye as _};
