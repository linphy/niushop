import{d as e,r as t,M as a,o as r,c as l,w as o,b as n,z as s,Q as p,am as d,R as u,S as x,A as i,x as c,j as m,bb as b,bc as f,D as v,g,i as y}from"./index-2dd15007.js";import{_ as h}from"./u-popup.95b17935.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const D=w(e({__name:"select-date",emits:["confirm"],setup(e,{expose:w,emit:D}){const _=t(!1),$=t([]),Y=()=>{const e=new Date,t=[],a=[],r=[],l=e.getFullYear(),o=e.getMonth(),n=e.getDate();for(let v=1990;v<=e.getFullYear()+2;v++)t.push(v);for(let v=1;v<=12;v++)a.push(v);let s=k(l,o+1);for(let v=1;v<=s;v++)r.push(v);let p=[t.indexOf(l),o,n-1],d=`${l}-${o+1<10?"0"+(o+1):o+1}-${n<10?"0"+n:n}`,u=`${l}-${o+1<10?"0"+(o+1):o+1}-${n<10?"0"+n:n} 00:00:00`,x=`${l}-${o+1<10?"0"+(o+1):o+1}-${n<10?"0"+n:n} 23:59:59`,i=new Date(e.getFullYear(),o-1,e.getDate()),c=new Date(e.getFullYear(),o-3,e.getDate()),m=new Date(e.getFullYear(),o-6,e.getDate()),b=new Date(e.getFullYear()-1,o,e.getDate());const f=e=>{const t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return`${t}-${a<10?"0"+a:a}-${r<10?"0"+r:r} 00:00:00`};return{years:t,months:a,days:r,curIndex:p,nowDate:d,nowDateStart:u,nowDateEnd:x,lastMonth:f(i),lastThreeMonth:f(c),halfYear:f(m),lastYear:f(b)}},k=(e,t)=>new Date(e,t,0).getDate(),C=a({years:Y().years,months:Y().months,days:Y().days,curIndex:Y().curIndex,nowDate:[Y().nowDateStart,Y().nowDateEnd]}),M=e=>{const t=e.detail.value;let a=C.years[t[0]],r=C.months[t[1]],l=C.days[t[2]];C.days=((e,t)=>{let a=k(e,t),r=[];for(let l=1;l<=a;l++)r.push(l);return r})(a,r),"first"==I.value.type?C.nowDate[0]=`${a}-${r<10?"0"+r:r}-${l<10?"0"+l:l} 00:00:00`:"second"==I.value.type&&(C.nowDate[1]=`${a}-${r<10?"0"+r:r}-${l<10?"0"+l:l} 23:59:59`)},j=a([{time:[Y().lastMonth,Y().nowDateEnd],type:"lastMonth",name:"近1个月"},{time:[Y().lastThreeMonth,Y().nowDateEnd],type:"lastThreeMonth",name:"近3个月"},{time:[Y().halfYear,Y().nowDateEnd],type:"halfYear",name:"近半年"},{time:[Y().lastYear,Y().nowDateEnd],type:"lastYear",name:"近一年"}]),I=t({type:"first",time:[]}),E=()=>{if("first"==I.value.type||"second"==I.value.type){if($.value=C.nowDate,new Date($.value[0]).getTime()>new Date($.value[1]).getTime())return void c({title:"开始时间不能大于结束时间",icon:"none"})}else $.value=I.value.time;D("confirm",$.value),_.value=!1},F=()=>{I.value.type="first",C.curIndex=Y().curIndex,C.nowDate=[Y().nowDateStart,Y().nowDateEnd]},T=()=>{D("confirm",[]),_.value=!1};return w({show:_}),(e,t)=>{const a=m,c=b,w=f,D=v,$=g(y("u-popup"),h);return r(),l($,{show:_.value,onClose:t[2]||(t[2]=e=>_.value=!1),mode:"bottom",round:10,zIndex:"10090"},{default:o((()=>[n(a,{class:"popup-common relative"},{default:o((()=>[n(a,{class:"title"},{default:o((()=>[s("选择时间")])),_:1}),n(a,{class:"absolute top-[36rpx] right-[36rpx] text-[24rpx] text-[var(--text-color-light6)] leading-[30rpx] z-10",onClick:T},{default:o((()=>[s("清除")])),_:1}),n(a,{class:"px-[var(--popup-sidebar-m)] mb-[20rpx] mt-[10rpx]"},{default:o((()=>[n(a,{class:"flex items-center justify-between mb-[30rpx]"},{default:o((()=>[(r(!0),p(u,null,d(j,((e,t)=>(r(),l(a,{class:x(["w-[160rpx] h-[66rpx] box-border flex-center rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[rgba(239,0,12,0.04)]":I.value.type==e.type}]),key:"a"+t,onClick:t=>{return a=e,I.value.type=a.type,I.value.time=a.time,C.nowDate[0]=I.value.time[0],void(C.nowDate[1]=I.value.time[1]);var a}},{default:o((()=>[s(i(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),n(a,{class:"flex items-center justify-between"},{default:o((()=>[n(a,{class:x(["w-[316rpx] h-[66rpx] box-border leading-[62rpx] rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[var(--primary-color-light)]":"first"==I.value.type}]),onClick:t[0]||(t[0]=e=>I.value.type="first")},{default:o((()=>[s(i(C.nowDate[0].substr(0,10)),1)])),_:1},8,["class"]),n(a,{class:"nc-iconfont nc-icon-jianV6xx"}),n(a,{class:x(["w-[316rpx] h-[66rpx] box-border leading-[62rpx] rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[var(--primary-color-light)]":"second"==I.value.type}]),onClick:t[1]||(t[1]=e=>I.value.type="second")},{default:o((()=>[s(i(C.nowDate[1].substr(0,10)),1)])),_:1},8,["class"])])),_:1})])),_:1}),n(a,{class:"gradation-picker"},{default:o((()=>[n(w,{"indicator-class":"!h-[80rpx] !bg-[var(--temp-bg)]",value:C.curIndex,onChange:M,class:"w-[750rpx] px-[60rpx] h-[396rpx] box-border"},{default:o((()=>[n(c,null,{default:o((()=>[(r(!0),p(u,null,d(C.years,((e,t)=>(r(),l(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:o((()=>[s(i(e)+"年",1)])),_:2},1024)))),128))])),_:1}),n(c,null,{default:o((()=>[(r(!0),p(u,null,d(C.months,((e,t)=>(r(),l(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:o((()=>[s(i(e)+"月",1)])),_:2},1024)))),128))])),_:1}),n(c,null,{default:o((()=>[(r(!0),p(u,null,d(C.days,((e,t)=>(r(),l(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:o((()=>[s(i(e)+"日",1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),n(a,{class:"btn-wrap flex justify-between items-center !pt-[30rpx]"},{default:o((()=>[n(D,{class:"btn flex-1 !leading-[76rpx] mr-[20rpx] !text-[var(--primary-color)] border-[2rpx] border-solid border-[var(--primary-color)] rounded-[100rpx] bg-transparent box-border","hover-class":"none",onClick:F},{default:o((()=>[s("重置")])),_:1}),n(D,{class:"btn flex-1 border-[0] rounded-[100rpx] primary-btn-bg",shape:"circle","hover-class":"none",onClick:E},{default:o((()=>[s("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-f0c0a474"]]);export{D as s};
