import{A as e,B as l,C as t,q as a,t as r,i as s,j as o,w as d,k as u,D as i,E as n,p as c,m as p,G as f,H as x,x as _,I as m,d as v,r as y,$ as b,c as h,n as g,l as k,P as w,R as C,Q as j,v as S,a7 as V,y as $,bp as z,b1 as I,a8 as U,h as A,_ as F,a6 as R,aP as H,av as B,a2 as K}from"./index-616d13f7.js";import{_ as q}from"./u-icon.9fd6fcea.js";import{_ as D}from"./u--image.1db8844d.js";import{_ as E}from"./u-transition.b526b92d.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as O}from"./u-tabbar.2da70f0a.js";import{_ as P}from"./pay.0b9c921c.js";import{e as T,f as L,h as Q,i as W}from"./order.0aa73ff0.js";import{_ as G}from"./u-tabs.b5106a93.js";import{_ as J}from"./u-button.0dc6d340.js";import{_ as M}from"./u-popup.0e0ff09c.js";import{_ as X}from"./u-loading-icon.3da3468b.js";import{_ as Y}from"./u-empty.29495b9a.js";import{_ as Z,u as ee}from"./u-form.20eb0fdb.js";import{_ as le}from"./u-input.20c4523b.js";import"./u-image.37db3168.js";import"./u-safe-bottom.09842298.js";import"./pay.f3bd4c74.js";import"./wechat.a9c418ff.js";import"./u-badge.1ef08990.js";import"./u-line.bcc2d2b4.js";const te=N({name:"u-alert",mixins:[l,t,{props:{title:{type:String,default:e.alert.title},type:{type:String,default:e.alert.type},description:{type:String,default:e.alert.description},closable:{type:Boolean,default:e.alert.closable},showIcon:{type:Boolean,default:e.alert.showIcon},effect:{type:String,default:e.alert.effect},center:{type:Boolean,default:e.alert.center},fontSize:{type:[String,Number],default:e.alert.fontSize}}}],data:()=>({show:!0}),computed:{iconColor(){return"light"===this.effect?this.type:"#fff"},iconName(){switch(this.type){case"success":return"checkmark-circle-fill";case"error":return"close-circle-fill";case"warning":default:return"error-circle-fill";case"info":return"info-circle-fill";case"primary":return"more-circle-fill"}}},methods:{clickHandler(){this.$emit("click")},closeHandler(){this.show=!1}}},[["render",function(e,l,t,v,y,b){const h=a(r("u-icon"),q),g=_,k=m,w=a(r("u-transition"),E);return s(),o(w,{mode:"fade",show:y.show},{default:d((()=>[u(g,{class:i(["u-alert",[`u-alert--${e.type}--${e.effect}`]]),onClick:n(b.clickHandler,["stop"]),style:c([e.$u.addStyle(e.customStyle)])},{default:d((()=>[e.showIcon?(s(),o(g,{key:0,class:"u-alert__icon"},{default:d((()=>[u(h,{name:b.iconName,size:"18",color:b.iconColor},null,8,["name","color"])])),_:1})):p("v-if",!0),u(g,{class:"u-alert__content",style:c([{paddingRight:e.closable?"20px":0}])},{default:d((()=>[e.title?(s(),o(k,{key:0,class:i(["u-alert__content__title",["dark"===e.effect?"u-alert__text--dark":`u-alert__text--${e.type}--light`]]),style:c([{fontSize:e.$u.addUnit(e.fontSize),textAlign:e.center?"center":"left"}])},{default:d((()=>[f(x(e.title),1)])),_:1},8,["style","class"])):p("v-if",!0),e.description?(s(),o(k,{key:1,class:i(["u-alert__content__desc",["dark"===e.effect?"u-alert__text--dark":`u-alert__text--${e.type}--light`]]),style:c([{fontSize:e.$u.addUnit(e.fontSize),textAlign:e.center?"center":"left"}])},{default:d((()=>[f(x(e.description),1)])),_:1},8,["style","class"])):p("v-if",!0)])),_:1},8,["style"]),e.closable?(s(),o(g,{key:1,class:"u-alert__close",onClick:n(b.closeHandler,["stop"])},{default:d((()=>[u(h,{name:"close",color:b.iconColor,size:"15"},null,8,["color"])])),_:1},8,["onClick"])):p("v-if",!0)])),_:1},8,["class","onClick","style"])])),_:1},8,["show"])}],["__scopeId","data-v-c81451cb"]]),ae=v({__name:"select-coupon",props:{orderKey:{type:String,default:""}},emits:["confirm"],setup(e,{expose:l,emit:t}){const n=e,c=y(0),v=y([]),$=y([]),z=y(!1),I=y(null);b((()=>n.orderKey),(()=>{n.orderKey&&!v.value.length&&T({order_key:n.orderKey}).then((({data:e})=>{const l=[],a=[];e.length&&e.forEach((e=>{e.is_normal?l.push(e):a.push(e)})),$.value=a,v.value=l,l.length&&(I.value=l[0],t("confirm",I.value))})).catch()}),{immediate:!0});const U=h((()=>[{name:`可用优惠券（${v.value.length}）`,key:"normal"},{name:`不可用优惠券（${$.value.length}）`,key:"disabled"}])),A=e=>{c.value=e.index},F=()=>{t("confirm",I.value),z.value=!1};return l({open:()=>{z.value=!0},couponList:v}),(e,l)=>{const t=_,n=a(r("u-tabs"),G),y=m,b=V,h=a(r("u-button"),J),R=a(r("u-popup"),M);return s(),o(R,{show:z.value,onClose:l[0]||(l[0]=e=>z.value=!1),mode:"bottom",round:10,closeable:!0},{default:d((()=>[u(t,{class:"text-center p-[30rpx]"},{default:d((()=>[f("请选择优惠券")])),_:1}),e.type?p("v-if",!0):(s(),o(t,{key:0,class:"border-0 !border-b !border-[#eee] border-solid"},{default:d((()=>[u(n,{list:g(U),onClick:A,current:c.value,itemStyle:"width:50%;height:88rpx;box-sizing: border-box;"},null,8,["list","current"])])),_:1})),u(b,{"scroll-y":"true",class:"h-[50vh]"},{default:d((()=>[k(u(t,{class:"p-[30rpx] pt-0 text-sm"},{default:d((()=>[(s(!0),w(C,null,j(v.value,(e=>(s(),o(t,{class:i(["mt-[30rpx] p-[30rpx] border-1 !border-[#eee] border-solid rounded-[20rpx]",{"!border-primary bg-primary-light":I.value&&I.value.id==e.id}]),onClick:l=>{return t=e,void(I.value?I.value=I.value.id!=t.id?t:null:I.value=t);var t}},{default:d((()=>[u(t,{class:i(["flex border-0 !border-b !border-[#eee] border-dashed pb-[20rpx]",{"!border-primary":I.value&&I.value.id==e.id}])},{default:d((()=>[u(t,{class:"flex-1 w-0"},{default:d((()=>[u(t,{class:"text-base font-bold"},{default:d((()=>[f(x(e.title),1)])),_:2},1024),e.min_condition_money>0?(s(),o(t,{key:0},{default:d((()=>[f("满"+x(e.min_condition_money)+"可用",1)])),_:2},1024)):(s(),o(t,{key:1},{default:d((()=>[f("无门槛券")])),_:1}))])),_:2},1024),u(t,{class:"font-bold text-base price-font"},{default:d((()=>[u(y,{class:"text-xs"},{default:d((()=>[f("￥")])),_:1}),f(x(e.price),1)])),_:2},1024)])),_:2},1032,["class"]),u(t,{class:"pt-[20rpx] text-xs"},{default:d((()=>[f(x(e.create_time)+" ~ "+x(e.expire_time)+"期间有效",1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1},512),[[S,0==c.value]]),k(u(t,{class:"p-[30rpx] pt-0 text-sm"},{default:d((()=>[(s(!0),w(C,null,j($.value,(e=>(s(),o(t,{class:"mt-[30rpx] p-[30rpx] border-1 !border-[#eee] border-solid rounded-[20rpx] bg-[#f5f5f5]"},{default:d((()=>[u(t,{class:"flex border-0 !border-b !border-[#ddd] border-dashed pb-[20rpx]"},{default:d((()=>[u(t,{class:"flex-1 w-0"},{default:d((()=>[u(t,{class:"text-base font-bold"},{default:d((()=>[f(x(e.title),1)])),_:2},1024),e.min_condition_money>0?(s(),o(t,{key:0},{default:d((()=>[f("满"+x(e.min_condition_money)+"可用",1)])),_:2},1024)):(s(),o(t,{key:1},{default:d((()=>[f("无门槛券")])),_:1}))])),_:2},1024),u(t,{class:"font-bold text-base price-font"},{default:d((()=>[u(y,{class:"text-xs"},{default:d((()=>[f("￥")])),_:1}),f(x(e.price),1)])),_:2},1024)])),_:2},1024),u(t,{class:"pt-[20rpx] text-xs"},{default:d((()=>[f(x(e.create_time)+" ~ "+x(e.expire_time)+"期间有效",1)])),_:2},1024),u(t,{class:"text-xs pt-[10rpx] flex"},{default:d((()=>[f(" 不可用原因："+x(e.error),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1},512),[[S,1==c.value]])])),_:1}),u(t,{class:"p-[30rpx]"},{default:d((()=>[u(h,{type:"primary",shape:"circle",onClick:F},{default:d((()=>[f("确认")])),_:1})])),_:1})])),_:1},8,["show"])}}}),re=v({__name:"select-store",emits:["confirm"],setup(e,{expose:l,emit:t}){const n=y(!1),c=y(!1),v=y(!0),b=y([]),h=y(null),k=()=>{t("confirm",h.value),n.value=!1},S=e=>{if((e=parseFloat(e))<1e3)return`${e}m`;return`${(e/1e3).toFixed(2)}km`};return l({open:()=>{if(!c.value){c.value=!0;const e={};z({success:l=>{e.lat=l.latitude,e.lng=l.longitude}}),setTimeout((()=>{L({latlng:e}).then((({data:e})=>{b.value=e,v.value=!1})).catch((()=>{v.value=!1}))}),1500)}n.value=!0}}),(e,l)=>{const t=_,c=m,y=a(r("u-loading-icon"),X),z=a(r("u-empty"),Y),I=V,U=a(r("u-button"),J),A=a(r("u-popup"),M);return s(),o(A,{show:n.value,onClose:l[0]||(l[0]=e=>n.value=!1),mode:"bottom",round:10,closeable:!0},{default:d((()=>[u(t,{class:"text-center p-[30rpx]"},{default:d((()=>[f("请选择自提点")])),_:1}),u(I,{"scroll-y":"true",class:"h-[50vh]"},{default:d((()=>[u(t,{class:"p-[30rpx] pt-0 text-sm"},{default:d((()=>[(s(!0),w(C,null,j(b.value,(e=>(s(),o(t,{class:i(["mt-[30rpx] p-[30rpx] border-1 !border-[#eee] border-solid rounded-[20rpx]",{"!border-primary bg-primary-light":h.value&&h.value.store_id==e.store_id}]),onClick:l=>{return t=e,void(h.value?h.value=h.value.store_id!=t.store_id?t:null:h.value=t);var t}},{default:d((()=>[u(t,{class:"font-bold flex"},{default:d((()=>[u(t,{class:"flex-1 w-0"},{default:d((()=>[u(c,null,{default:d((()=>[f(x(e.store_name),1)])),_:2},1024),u(c,{class:"text-[26rpx] ml-[20rpx]"},{default:d((()=>[f(x(e.store_mobile),1)])),_:2},1024)])),_:2},1024),e.distance?(s(),o(t,{key:0},{default:d((()=>[u(c,{class:"text-red text-xs font-normal"},{default:d((()=>[f(x(S(e.distance)),1)])),_:2},1024)])),_:2},1024)):p("v-if",!0)])),_:2},1024),u(t,{class:"mt-[16rpx] text-[26rpx]"},{default:d((()=>[f(x(e.full_address),1)])),_:2},1024),u(t,{class:"mt-[16rpx] text-[26rpx]"},{default:d((()=>[f("营业时间："+x(e.trade_time),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1}),v.value?(s(),o(t,{key:0,class:"h-[50vh] flex items-center flex-col justify-center"},{default:d((()=>[u(y,{vertical:!0})])),_:1})):p("v-if",!0),v.value||b.value.length?p("v-if",!0):(s(),o(t,{key:1,class:"h-[50vh] flex items-center flex-col justify-center"},{default:d((()=>[u(z,{text:"没有可选择的自提点",icon:g($)("static/resource/images/empty.png")},null,8,["icon"])])),_:1}))])),_:1}),u(t,{class:"p-[30rpx]"},{default:d((()=>[u(U,{type:"primary",shape:"circle",onClick:k},{default:d((()=>[f("确认")])),_:1})])),_:1})])),_:1},8,["show"])}}});const se=v({__name:"invoice",emits:["confirm"],setup(e,{expose:l,emit:t}){const n=y(!1),c=y({is_invoice:2,invoice_content:[]}),p=y(!1),v=y(!1),b=y({header_type:1,header_name:"",type:"",name:"",tax_number:"",telephone:"",address:"",bank_name:"",bank_card_number:""}),$=h((()=>1==c.value.is_invoice));I.get("shop/config/invoice").then((({data:e})=>{c.value=e,e.invoice_content.length&&(b.value.name=e.invoice_content[0])})).catch();const z=y(null),U=h((()=>({header_name:{type:"string",required:p.value,message:"请输入发票抬头",trigger:["blur","change"]},tax_number:{type:"string",required:p.value&&2==b.value.header_type,message:"请输入纳税人识别号",trigger:["blur","change"]}}))),A=()=>{z.value.validate().then((()=>{const e=p.value?b.value:{};t("confirm",e),n.value=!1}))};return l({open:()=>{n.value=!0},invoiceOpen:$}),(e,l)=>{const t=_,y=a(r("u-form-item"),Z),h=a(r("u-input"),le),$=m,I=a(r("u-form"),ee),F=V,R=a(r("u-button"),J),H=a(r("u-popup"),M);return s(),o(H,{show:n.value,onClose:l[11]||(l[11]=e=>n.value=!1),mode:"bottom",round:10,closeable:!0},{default:d((()=>[u(t,{class:"text-center p-[30rpx]"},{default:d((()=>[f("请填写发票信息")])),_:1}),u(F,{"scroll-y":"true",class:"h-[50vh]"},{default:d((()=>[u(t,{class:"p-[30rpx] pt-0 text-sm"},{default:d((()=>[u(I,{labelPosition:"left",model:b.value,labelWidth:"200rpx",errorType:"toast",rules:g(U),ref_key:"formRef",ref:z},{default:d((()=>[u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"需要发票","border-bottom":!0},{default:d((()=>[u(t,{class:"flex"},{default:d((()=>[u(t,{class:i(["rounded px-[30rpx] py-[10rpx] mr-[20rpx] border-1 !border-[#eee] border-solid text-sm",{"bg-primary text-white !border-primary":!p.value}]),onClick:l[0]||(l[0]=e=>p.value=!1)},{default:d((()=>[f("不需要")])),_:1},8,["class"]),u(t,{class:i(["rounded px-[30rpx] py-[10rpx] border-1 !border-[#eee] border-solid text-sm",{"bg-primary text-white !border-primary":p.value}]),onClick:l[1]||(l[1]=e=>p.value=!0)},{default:d((()=>[f("需要")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),k(u(t,null,{default:d((()=>[u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"抬头类型","border-bottom":!0},{default:d((()=>[u(t,{class:"flex"},{default:d((()=>[u(t,{class:i(["rounded px-[30rpx] py-[10rpx] mr-[20rpx] border-1 !border-[#eee] border-solid text-sm",{"bg-primary text-white !border-primary":1==b.value.header_type}]),onClick:l[2]||(l[2]=e=>b.value.header_type=1)},{default:d((()=>[f("个人")])),_:1},8,["class"]),u(t,{class:i(["rounded px-[30rpx] py-[10rpx] border-1 !border-[#eee] border-solid text-sm",{"bg-primary text-white !border-primary":2==b.value.header_type}]),onClick:l[3]||(l[3]=e=>b.value.header_type=2)},{default:d((()=>[f("企业")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"发票内容",prop:"header_name","border-bottom":!0},{default:d((()=>[u(t,{class:"flex"},{default:d((()=>[(s(!0),w(C,null,j(c.value.invoice_content,(e=>(s(),o(t,{class:i(["rounded px-[30rpx] py-[10rpx] mr-[20rpx] border-1 !border-[#eee] border-solid text-sm",{"bg-primary text-white !border-primary":b.value.name==e}]),onClick:l=>b.value.name=e},{default:d((()=>[f(x(e),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"发票抬头",prop:"header_name","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.header_name,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value.header_name=e),border:"none",clearable:"",placeholder:"请输入发票抬头"},null,8,["modelValue"])])),_:1})])),_:1}),k(u(t,null,{default:d((()=>[u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"纳税人识别号",prop:"tax_number","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.tax_number,"onUpdate:modelValue":l[5]||(l[5]=e=>b.value.tax_number=e),border:"none",clearable:"",placeholder:"请输入纳税人识别号"},null,8,["modelValue"])])),_:1})])),_:1}),u(t,{class:"py-[20rpx] flex items-end"},{default:d((()=>[u($,{class:"text-[30rpx]"},{default:d((()=>[f("更多选填内容")])),_:1}),u($,{class:"text-xs text-gray-subtitle ml-[10rpx]"},{default:d((()=>[f("注册地址、电话、开户银行及账号")])),_:1}),u(t,{class:"text-xs text-right flex-1",onClick:l[6]||(l[6]=e=>v.value=!v.value)},{default:d((()=>[u($,null,{default:d((()=>[f(x(v.value?"收起":"展开"),1)])),_:1}),u($,{class:i(["text-xs iconfont text-gray-subtitle ml-[5rpx]",v.value?"iconjiantoushang":"iconxialajiantouxiao"])},null,8,["class"])])),_:1})])),_:1}),k(u(t,null,{default:d((()=>[u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"注册地址","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.address,"onUpdate:modelValue":l[7]||(l[7]=e=>b.value.address=e),border:"none",clearable:"",placeholder:"(选填)请输入企业注册地址"},null,8,["modelValue"])])),_:1})])),_:1}),u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"注册电话","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.telephone,"onUpdate:modelValue":l[8]||(l[8]=e=>b.value.telephone=e),border:"none",clearable:"",placeholder:"(选填)请输入企业注册电话"},null,8,["modelValue"])])),_:1})])),_:1}),u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"开户银行","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.bank_name,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value.bank_name=e),border:"none",clearable:"",placeholder:"(选填)请输入企业开户银行"},null,8,["modelValue"])])),_:1})])),_:1}),u(t,{class:"mt-[10rpx]"},{default:d((()=>[u(y,{label:"银行账号","border-bottom":!0},{default:d((()=>[u(h,{modelValue:b.value.bank_card_number,"onUpdate:modelValue":l[10]||(l[10]=e=>b.value.bank_card_number=e),border:"none",clearable:"",placeholder:"(选填)请输入企业开户银行账号"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[S,v.value]])])),_:1},512),[[S,2==b.value.header_type]])])),_:1},512),[[S,p.value]])])),_:1},8,["model","rules"])])),_:1})])),_:1}),u(t,{class:"p-[30rpx]"},{default:d((()=>[u(R,{type:"primary",shape:"circle",onClick:A},{default:d((()=>[f("确认")])),_:1})])),_:1})])),_:1},8,["show"])}}}),oe=N(v({__name:"payment",setup(e){const l=y({order_key:"",member_remark:"",discount:{},invoice:{},delivery:{delivery_type:""}}),t=y(null),n=y(),c=y(),v=y(),b=y(),k=y(!1),S=y(0),z=y([]);uni.getStorageSync("orderCreateData")&&Object.assign(l.value,uni.getStorageSync("orderCreateData"));const I=uni.getStorageSync("selectAddressCallback");I&&(l.value.order_key="",l.value.delivery.delivery_type=I.delivery,l.value.delivery.take_address_id=I.address_id,uni.removeStorage({key:"selectAddressCallback"}));const E=()=>{Q(l.value).then((({data:e})=>{t.value=e,l.value.order_key=e.order_key,z.value=Object.values(t.value.delivery.delivery_type_list),I&&(S.value=z.value.findIndex((e=>e.key===t.value.delivery.delivery_type))),!l.value.delivery.delivery_type&&e.delivery.delivery_type&&(l.value.delivery.delivery_type=e.delivery.delivery_type)})).catch()};E();let N=0;const T=()=>{L()&&!k.value&&(k.value=!0,W(l.value).then((({data:e})=>{var l;N=e.order_id,0==t.value.basic.order_money?A({url:"/addon/shop/pages/order/detail",param:{order_id:N},mode:"redirectTo"}):null==(l=v.value)||l.open(e.trade_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`)})).catch((()=>{k.value=!1})))},L=()=>{const e=l.value;if(t.value.basic.has_goods_types.includes("real")){if(["express","local_delivery"].includes(e.delivery.delivery_type)&&!t.value.delivery.take_address)return F({title:"请选择收货地址",icon:"none"}),!1;if("store"==e.delivery.delivery_type&&!e.delivery.take_store_id)return F({title:"请选择自提点",icon:"none"}),!1}return!0},G=()=>{A({url:"/addon/shop/pages/order/detail",param:{order_id:N},mode:"redirectTo"})},J=()=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/shop/pages/order/payment",delivery:l.value.delivery.delivery_type},success(){A({url:"/app/pages/member/address",param:{type:"local_delivery"==l.value.delivery.delivery_type?"location_address":"address"}})}})},M=h((()=>{var e;return(null==(e=n.value)?void 0:e.couponList)||[]})),X=e=>{l.value.discount.coupon_id=e?e.id:0,E()},Y=e=>{l.value.delivery.take_store_id=e.store_id||0,E()},Z=e=>{l.value.invoice=e};return(e,y)=>{const h=m,I=_,A=a(r("u-icon"),q),F=a(r("u--image"),D),N=a(r("u-alert"),te),L=R,Q=H,W=a(r("u-tabbar"),O),ee=a(r("pay"),P),le=V;return t.value?(s(),o(le,{key:0,"scroll-y":"true",class:"bg-page h-screen"},{default:d((()=>[u(I,{class:"py-[20rpx] px-[24rpx]",style:{background:"linear-gradient(var(--primary-color) 0%, var(--primary-color-disabled) 7%, #F4F4F6 10%)"}},{default:d((()=>[p(" 配送方式 "),t.value.basic.has_goods_types.includes("real")&&z.value.length?(s(),o(I,{key:0,class:"mb-[20rpx] rounded-[16rpx] bg-white"},{default:d((()=>[z.value.length>1?(s(),o(I,{key:0,class:"flex items-center rounded-tl-[16rpx] rounded-tr-[16rpx] overflow-hidden w-full"},{default:d((()=>[(s(!0),w(C,null,j(z.value,((e,t)=>(s(),o(I,{class:i(["flex-1",{"bg-[#fff]":t===S.value-1||t===S.value+1,"bg-[var(--primary-color-disabled)]":!(t===S.value-1||t===S.value+1)}]),key:t},{default:d((()=>[u(I,{class:i(["h-[74rpx] text-center leading-[74rpx] text-[30rpx] font-500",{"bg-[var(--primary-color-disabled)]":t===S.value-1||t===S.value+1,"rounded-br-[16rpx]":t===S.value-1,"rounded-tr-[16rpx] rounded-tl-[16rpx] bg-[#fff] text-[var(--primary-color)]":t===S.value,"rounded-bl-[16rpx]":t===S.value+1}]),onClick:a=>((e,t)=>{l.value.delivery.delivery_type!=e&&(S.value=t,l.value.order_key="",l.value.delivery.delivery_type=e,l.value.delivery.take_address_id=0,E())})(e.key,t)},{default:d((()=>[u(h,null,{default:d((()=>[f(x(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])])),_:2},1032,["class"])))),128))])),_:1})):p("v-if",!0),u(I,{class:"p-[24rpx]"},{default:d((()=>[p(" 收货地址 "),["express","local_delivery"].includes(l.value.delivery.delivery_type)?(s(),o(I,{key:0,class:"flex items-center pt-[24rpx] pb-[10rpx]",onClick:J},{default:d((()=>[u(I,{class:"flex-1 w-0"},{default:d((()=>[e.$u.test.isEmpty(t.value.delivery.take_address)?(s(),o(I,{key:1,class:"text-[26rpx]"},{default:d((()=>[f(" 添加收货地址 ")])),_:1})):(s(),o(I,{key:0},{default:d((()=>[u(I,{class:"font-500 text-[30rpx] mb-[10rpx]"},{default:d((()=>[f(x(t.value.delivery.take_address.name)+" ",1),u(h,{class:"text-[30rpx]"},{default:d((()=>[f(x(g(B)(t.value.delivery.take_address.mobile)),1)])),_:1})])),_:1}),u(I,{class:"text-[26rpx] text-gray-subtitle mt-[10rpx]"},{default:d((()=>[f(x(t.value.delivery.take_address.full_address),1)])),_:1})])),_:1}))])),_:1}),u(h,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle"})])),_:1})):p("v-if",!0),p(" 自提点 "),"store"==l.value.delivery.delivery_type?(s(),o(I,{key:1,class:"flex items-center pt-[24rpx] pb-[10rpx]",onClick:y[0]||(y[0]=e=>c.value.open())},{default:d((()=>[u(I,{class:"flex-1 w-0"},{default:d((()=>[e.$u.test.isEmpty(t.value.delivery.take_store)?(s(),o(I,{key:1,class:"text-[26rpx]"},{default:d((()=>[f(" 请选择自提点 ")])),_:1})):(s(),o(I,{key:0},{default:d((()=>[u(I,{class:"font-500 text-[30rpx] mb-[10rpx]"},{default:d((()=>[f(x(t.value.delivery.take_store.store_name)+" ",1),u(h,{class:"text-[26rpx]"},{default:d((()=>[f(x(t.value.delivery.take_store.store_mobile),1)])),_:1})])),_:1}),u(I,{class:"text-[26rpx] text-gray-subtitle mt-[10rpx]"},{default:d((()=>[f(x(t.value.delivery.take_store.full_address),1)])),_:1}),u(I,{class:"text-[26rpx] text-gray-subtitle mt-[16rpx]"},{default:d((()=>[f("营业时间："+x(t.value.delivery.take_store.trade_time),1)])),_:1})])),_:1}))])),_:1}),u(h,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle"})])),_:1})):p("v-if",!0)])),_:1})])),_:1})):p("v-if",!0),t.value.basic.has_goods_types.includes("real")&&!z.value.length?(s(),o(I,{key:1,class:"mb-[20rpx] rounded-[16rpx] bg-white p-[24rpx] py-[40rpx]"},{default:d((()=>[U("p",{class:"text-[26rpx] text-gray-subtitle"},"商家尚未配置配送方式")])),_:1})):p("v-if",!0),u(I,{class:"mb-[20rpx] px-[24rpx] rounded-md bg-white"},{default:d((()=>[(s(!0),w(C,null,j(t.value.goods_data,((e,l)=>(s(),o(I,{class:"flex py-[30rpx] border-0 !border-b !border-[#f5f5f5] border-solid"},{default:d((()=>[u(F,{width:"168rpx",height:"168rpx",src:g($)(e.sku_image),model:"aspectFill"},{error:d((()=>[u(A,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),u(I,{class:"flex flex-1 w-0 flex-col justify-between ml-[20rpx]"},{default:d((()=>[u(I,null,{default:d((()=>[u(I,{class:"text-ellipsis text-[#333] text-[26rpx] leading-normal font-500"},{default:d((()=>[f(x(e.goods.goods_name),1)])),_:2},1024),u(I,{class:"mt-[10rpx] text-[26rpx] text-gray-subtitle"},{default:d((()=>[f(x(e.sku_name),1)])),_:2},1024)])),_:2},1024),e.not_support_delivery?(s(),o(N,{key:0,type:"error",description:"该商品不支持当前所选配送方式",fontSize:"12"})):p("v-if",!0),u(I,{class:"flex justify-between"},{default:d((()=>[u(I,{class:"text-[var(--price-text-color)] font-500 price-font"},{default:d((()=>[u(h,{class:"text-xs"},{default:d((()=>[f("￥")])),_:1}),u(h,null,{default:d((()=>[f(x(g(K)(e.price)),1)])),_:2},1024)])),_:2},1024),u(I,{class:"font-500 text-sm"},{default:d((()=>[u(h,{class:"text-[26rpx]"},{default:d((()=>[f("x")])),_:1}),f(x(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1}),p(" 买家留言 "),u(I,{class:"mb-[20rpx] p-[24rpx] rounded-md bg-white flex"},{default:d((()=>[u(I,{class:"text-[28rpx] font-500 w-[150rpx]"},{default:d((()=>[f("买家留言")])),_:1}),u(I,{class:"flex-1"},{default:d((()=>[u(L,{type:"text",modelValue:l.value.member_remark,"onUpdate:modelValue":y[1]||(y[1]=e=>l.value.member_remark=e),class:"text-right text-[28rpx]",maxlength:"50",placeholder:"请输入留言信息给卖家"},null,8,["modelValue"])])),_:1})])),_:1}),u(I,{class:"rounded-md bg-white mb-[24rpx] overflow-hidden"},{default:d((()=>[p(" 优惠券 "),g(M).length?(s(),o(I,{key:0,class:"p-[24rpx] flex items-center",onClick:y[2]||(y[2]=e=>n.value.open())},{default:d((()=>[u(I,{class:"text-[28rpx] font-500 w-[150rpx]"},{default:d((()=>[f("优惠券")])),_:1}),u(I,{class:"flex-1 w-0 text-right"},{default:d((()=>[t.value.discount&&t.value.discount.coupon?(s(),o(h,{key:0,class:"text-red font-500 text-[28rpx]"},{default:d((()=>[f(x(t.value.discount.coupon.title),1)])),_:1})):(s(),o(h,{key:1,class:"text-[28rpx] text-gray-subtitle"},{default:d((()=>[f("请选择优惠券")])),_:1}))])),_:1}),u(h,{class:"iconfont iconxiangyoujiantou text-[28rpx] text-gray-subtitle"})])),_:1})):p("v-if",!0),p(" 发票 "),b.value&&b.value.invoiceOpen?(s(),o(I,{key:1,class:"p-[24rpx] flex items-center",onClick:y[3]||(y[3]=e=>b.value.open())},{default:d((()=>[u(I,{class:"text-[28rpx] font-500 w-[150rpx]"},{default:d((()=>[f("发票信息")])),_:1}),u(I,{class:"flex-1 w-0 text-right truncate"},{default:d((()=>[u(h,{class:"text-[28rpx] text-gray-subtitle"},{default:d((()=>[f(x(l.value.invoice.header_name||"不需要发票"),1)])),_:1})])),_:1}),u(h,{class:"iconfont iconxiangyoujiantou text-[28rpx] text-gray-subtitle"})])),_:1})):p("v-if",!0)])),_:1}),u(I,{class:"mt-0 p-[24rpx] rounded-md bg-white"},{default:d((()=>[u(I,{class:"flex font-500 py-[10rpx]"},{default:d((()=>[u(I,{class:"text-[28rpx] w-[150rpx]"},{default:d((()=>[f("商品金额")])),_:1}),u(I,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] price-font"},{default:d((()=>[u(h,{class:"text-[24rpx]"},{default:d((()=>[f("￥")])),_:1}),u(h,null,{default:d((()=>[f(x(g(K)(t.value.basic.goods_money)),1)])),_:1})])),_:1})])),_:1}),t.value.basic.delivery_money?(s(),o(I,{key:0,class:"flex font-500 py-[10rpx]"},{default:d((()=>[u(I,{class:"text-[28rpx] w-[150rpx]"},{default:d((()=>[f("运费")])),_:1}),u(I,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] price-font"},{default:d((()=>[u(h,{class:"text-[24rpx]"},{default:d((()=>[f("￥")])),_:1}),u(h,null,{default:d((()=>[f(x(g(K)(t.value.basic.delivery_money)),1)])),_:1})])),_:1})])),_:1})):p("v-if",!0),t.value.basic.discount_money?(s(),o(I,{key:1,class:"flex font-500 py-[10rpx]"},{default:d((()=>[u(I,{class:"text-[28rpx] w-[150rpx]"},{default:d((()=>[f("优惠金额")])),_:1}),u(I,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] price-font"},{default:d((()=>[u(h,{class:"text-[24rpx]"},{default:d((()=>[f("-￥")])),_:1}),u(h,null,{default:d((()=>[f(x(g(K)(t.value.basic.discount_money)),1)])),_:1})])),_:1})])),_:1})):p("v-if",!0)])),_:1})])),_:1}),u(W,{fixed:!0,placeholder:!0,safeAreaInsetBottom:!0},{default:d((()=>[u(I,{class:"flex-1 flex items-center justify-between"},{default:d((()=>[u(I,{class:"whitespace-nowrap px-[30rpx] text-color font-600 leading-[45rpx]"},{default:d((()=>[u(h,{class:"text-[#333333] text-[26rpx]"},{default:d((()=>[f("合计：")])),_:1}),u(h,{class:"text-[24rpx] font-500 text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥")])),_:1}),u(h,{class:"text-[34rpx] mr-[10rpx] font-500 text-[var(--price-text-color)] price-font"},{default:d((()=>[f(x(g(K)(t.value.basic.order_money)),1)])),_:1})])),_:1}),u(Q,{class:"!w-[204rpx] !h-[80rpx] text-[32rpx] mr-[30rpx] leading-[80rpx] rounded-full text-white bg-[var(--primary-color)] remove-border",loading:k.value,onClick:T},{default:d((()=>[f("提交订单")])),_:1},8,["loading"])])),_:1})])),_:1}),p(" 选择优惠券 "),u(g(ae),{"order-key":l.value.order_key,ref_key:"couponRef",ref:n,onConfirm:X},null,8,["order-key"]),p(" 选择自提点 "),u(g(re),{ref_key:"storeRef",ref:c,onConfirm:Y},null,512),p(" 发票 "),u(g(se),{ref_key:"invoiceRef",ref:b,onConfirm:Z},null,512),u(ee,{ref_key:"payRef",ref:v,onClose:G},null,512)])),_:1})):p("v-if",!0)}}}),[["__scopeId","data-v-1d989767"]]);export{oe as default};
