import{d as e,r,o as t,i as l,P as a,n as s,j as o,w as d,k as p,m as i,G as f,H as u,R as x,Q as n,p as _,h as c,bm as m,x as y,I as b,q as v,t as g,y as k,K as h,bn as j}from"./index-616d13f7.js";import{_ as w}from"./u-icon.9fd6fcea.js";import{_ as C}from"./u--image.1db8844d.js";import{_ as T}from"./pay.0b9c921c.js";import{_ as z}from"./u-loading-page.d7d194b0.js";import{g as N,o as F,a as M}from"./order.0aa73ff0.js";import{g as R}from"./shop.03c7b49f.js";import{l as $}from"./logistics-tracking.7fbf7ee5.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.37db3168.js";import"./u-transition.b526b92d.js";import"./u-button.0dc6d340.js";import"./u-loading-icon.3da3468b.js";import"./u-popup.0e0ff09c.js";import"./u-safe-bottom.09842298.js";import"./pay.f3bd4c74.js";import"./wechat.a9c418ff.js";import"./u-tabs.b5106a93.js";import"./u-badge.1ef08990.js";import"./u--text.ca06b0ad.js";/* empty css                                                                       */const E=q(e({__name:"detail",setup(e){let q=r({}),E=r(!0);r("");let I=r("");r(1),r(!1);let K=r({});t((e=>{I.value=e.order_id,P(I.value)})),R().then((({data:e})=>{K.value=e}));const P=e=>{E.value=!0,N(e).then((e=>{q.value=e.data,E.value=!1})).catch((()=>{E.value=!1}))},Q=r(null),A=r(null),G=(e="")=>{var t,l;if("pay"==e)null==(t=Q.value)||t.open(q.value.order_type,q.value.order_id,`/addon/shop/pages/order/detail?order_id=${q.value.order_id}`);else if("close"==e)l=q.value,j({title:"提示",content:"您确定要关闭该订单吗？",success:e=>{e.confirm&&F(l.order_id).then((e=>{P(l.order_id)}))}});else if("finish"==e)(e=>{j({title:"提示",content:"您确定物品已收到吗？",success:r=>{r.confirm&&M(e.order_id).then((r=>{P(e.order_id)}))}})})(q.value);else if("index"==e)c({url:"/addon/shop/pages/index"});else if("logistics"==e){if(q.value.order_delivery.length>0){let e={id:q.value.order_delivery[0].id,mobile:q.value.taker_mobile},t=r([]);q.value.order_delivery.forEach(((e,r)=>{e.mobile=q.value.taker_mobile,e.parcelName=`包裹${r+1}`,t.value.push(e)})),A.value.open(e),A.value.packageList=t.value}}else"evaluate"==e&&(q.value.is_evaluate?c({url:"/addon/shop/pages/evaluate/order_evaluate_view",param:{order_id:q.value.order_id}}):c({url:"/addon/shop/pages/evaluate/order_evaluate",param:{order_id:q.value.order_id}}))},H=()=>{m({latitude:Number(q.value.taker_latitude),longitude:Number(q.value.taker_longitude),success:function(){}})},L=e=>{let r=!1;return"express"==e.delivery_type&&(e.order_delivery.forEach((t=>{r="express"===t.sub_delivery_type&&"3"===e.status||"express"===t.sub_delivery_type&&"5"===e.status})),r)};return(e,r)=>{const t=y,m=b,j=v(g("u-icon"),w),N=v(g("u--image"),C),F=v(g("pay"),T),M=v(g("u-loading-page"),z);return l(),a(x,null,[s(E)?i("v-if",!0):(l(),o(t,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[s(E)?i("v-if",!0):(l(),o(t,{key:0,class:"pb-20rpx"},{default:d((()=>[s(q).status_name?(l(),o(t,{key:0,class:"flex status-item text-[32rpx] bg-primary h-[240rpx]"},{default:d((()=>[p(t,{class:"ml-[50rpx]"},{default:d((()=>[1==s(q).status?(l(),a("img",{key:0,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/payment.png")},null,8,["src"])):i("v-if",!0),2==s(q).status||3==s(q).status?(l(),a("img",{key:1,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/delivery.png")},null,8,["src"])):i("v-if",!0),5==s(q).status?(l(),a("img",{key:2,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/complete.png")},null,8,["src"])):i("v-if",!0),-1==s(q).status?(l(),a("img",{key:3,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/close.png")},null,8,["src"])):i("v-if",!0)])),_:1}),p(t,{class:"ml-[20rpx] text-[#fff] mt-[50rpx] text-[40rpx]"},{default:d((()=>[f(u(s(q).status_name.name),1)])),_:1})])),_:1})):i("v-if",!0),"virtual"!=s(q).delivery_type?(l(),o(t,{key:1,class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[-70rpx] rounded-[10rpx]"},{default:d((()=>["express"==s(q).delivery_type?(l(),o(t,{key:0},{default:d((()=>[p(t,{class:"text-[28rpx]"},{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(q).taker_name),1)])),_:1}),p(m,{class:"ml-[15rpx]"},{default:d((()=>[f(u(s(q).taker_mobile),1)])),_:1})])),_:1}),p(t,{class:"mt-[15rpx] text-[28rpx]"},{default:d((()=>[f(u(s(q).taker_full_address),1)])),_:1})])),_:1})):i("v-if",!0),"store"==s(q).delivery_type?(l(),o(t,{key:1},{default:d((()=>[p(t,{class:"flex"},{default:d((()=>[p(t,null,{default:d((()=>[p(N,{class:"rounded-[10rpx] overflow-hidden",width:"100rpx",height:"100rpx",src:s(k)(s(q).store.store_logo?s(q).store.store_logo:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),p(t,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(q).store.store_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(q).store.trade_time),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(q).store.full_address),1)])),_:1})])),_:1})])),_:1})])),_:1})):i("v-if",!0),"local_delivery"==s(q).delivery_type?(l(),o(t,{key:2,class:"flex"},{default:d((()=>[p(t,{onClick:H,class:"min-w-[100rpx] flex items-center justify-center"},{default:d((()=>[p(j,{name:"map",size:"25"})])),_:1}),p(t,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(q).taker_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(q).taker_mobile),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(q).taker_full_address),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx]",style:_("virtual"==s(q).delivery_type?"margin-top: -70rpx":"margin-top: 30rpx")},{default:d((()=>[(l(!0),a(x,null,n(s(q).order_goods,((e,r)=>(l(),o(t,{class:"order-goods-item flex justify-between flex-wrap mt-[50rpx]",key:r},{default:d((()=>[p(t,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:r=>{return t=e.goods_id,void c({url:"/addon/shop/pages/goods/detail",param:{goods_id:t}});var t}},{default:d((()=>[p(N,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:s(k)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1032,["onClick"]),p(t,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[p(t,null,{default:d((()=>[p(m,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:d((()=>[f(u(e.goods_name),1)])),_:2},1024),e.sku_name?(l(),o(t,{key:0,class:"flex"},{default:d((()=>[p(m,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:d((()=>[f(u(e.sku_name),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0)])),_:2},1024),p(t,{class:"flex justify-between"},{default:d((()=>[p(m,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(e.price),1)])),_:2},1024),p(m,{class:"text-right text-sm"},{default:d((()=>[p(m,{class:"text-[26rpx]"},{default:d((()=>[f("x")])),_:1}),f(u(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(t,{class:"flex justify-end self-end w-[100%] mt-[10rpx]"},{default:d((()=>["1"!=e.status?(l(),o(t,{key:0,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>s(c)({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:e.order_refund_no}})},{default:d((()=>[f("查看退款")])),_:2},1032,["onClick"])):1==e.is_enable_refund?(l(),o(t,{key:1,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>{return t=e.order_goods_id,void c({url:"/addon/shop/pages/refund/apply",param:{order_id:q.value.order_id,order_goods_id:t}});var t}},{default:d((()=>[f("申请退款")])),_:2},1032,["onClick"])):i("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"]),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("orderNo")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).order_no),1)])),_:1})])),_:1}),s(q).out_trade_no?(l(),o(t,{key:0,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("orderTradeNo")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).out_trade_no),1)])),_:1})])),_:1})):i("v-if",!0),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("createTime")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).create_time),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("deliveryType")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).delivery_type_name),1)])),_:1})])),_:1}),s(q).pay?(l(),o(t,{key:1,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("payTypeName")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).pay.type_name),1)])),_:1})])),_:1})):i("v-if",!0),s(q).pay?(l(),o(t,{key:2,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("payTime")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).pay.pay_time),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("goodsMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).goods_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("discountMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).discount_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("deliveryMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).delivery_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-end text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(h)("orderMoney"))+"：",1)])),_:1}),p(m,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).order_money),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(t,{class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap pb-[env(safe-area-inset-bottom)]"},{default:d((()=>[p(t,{class:"flex ml-[30rpx] w-[70rpx] flex-col justify-center items-center",onClick:r[0]||(r[0]=e=>G("index"))},{default:d((()=>[p(m,{class:"iconfont iconshouye text-[32rpx]"}),p(m,{class:"text-xs mt-1"},{default:d((()=>[f(u(s(h)("index")),1)])),_:1})])),_:1}),p(t,{class:"flex justify-end mr-[30rpx]"},{default:d((()=>[L(s(q))?(l(),o(t,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full mr-[20rpx]",onClick:r[1]||(r[1]=e=>G("logistics"))},{default:d((()=>[f(u(s(h)("logisticsTracking")),1)])),_:1})):i("v-if",!0),1==s(q).status?(l(),o(t,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[2]||(r[2]=e=>G("close"))},{default:d((()=>[f(u(s(h)("orderClose")),1)])),_:1})):i("v-if",!0),1==s(q).status?(l(),o(t,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[3]||(r[3]=e=>G("pay"))},{default:d((()=>[f(u(s(h)("topay")),1)])),_:1})):i("v-if",!0),3==s(q).status?(l(),o(t,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=e=>G("finish"))},{default:d((()=>[f(u(s(h)("orderFinish")),1)])),_:1})):i("v-if",!0),5==s(q).status?(l(),a(x,{key:4},[1==s(q).is_evaluate||1!=s(q).is_evaluate&&1==s(K).is_evaluate?(l(),o(t,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[5]||(r[5]=e=>G("evaluate"))},{default:d((()=>[f(u(s(h)("evaluate")),1)])),_:1})):i("v-if",!0)],64)):i("v-if",!0)])),_:1})])),_:1})])),_:1})),p(t,{class:"tab-bar-placeholder"}),p(F,{ref_key:"payRef",ref:Q,onClose:e.payClose},null,8,["onClose"]),p($,{ref_key:"materialRef",ref:A},null,512)])),_:1})),p(M,{"bg-color":"rgb(248,248,248)",loading:s(E),fontSize:"16",color:"#333"},null,8,["loading"])],64)}}}),[["__scopeId","data-v-012961a9"]]);export{E as default};
