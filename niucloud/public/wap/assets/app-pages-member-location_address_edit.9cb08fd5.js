import{d as e,r as a,o as l,az as r,c as s,i as t,j as d,w as u,m as o,k as i,n as m,G as n,H as c,_ as p,K as b,aA as v,aB as f,h as _,aC as h,x as g,q as x,t as y,a7 as V}from"./index-616d13f7.js";import{_ as j}from"./u-input.20c4523b.js";import{_ as w,u as P}from"./u-form.20eb0fdb.js";import{_ as k}from"./u-icon.9fd6fcea.js";import{_ as q}from"./u-switch.63ed9cf4.js";import{_ as A}from"./u-button.0dc6d340.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.bcc2d2b4.js";import"./u-loading-icon.3da3468b.js";const C=e({__name:"location_address_edit",setup(e){const C=a(""),$=a({id:0,name:"",mobile:"",lat:"",lng:"",address:"",address_name:"学府街",full_address:"",is_default:0,area:"",type:"location_address"});l((e=>{e.id&&r(e.id).then((({data:e})=>{e&&(Object.assign($.value,e),$.value.area=$.value.full_address.replace($.value.address,"").replace($.value.address_name,""))})).catch(),C.value=e.type||""}));const U=a(null),E=s((()=>({address:{type:"string",required:!0,message:b("addressError"),trigger:["blur","change"]},name:{type:"string",required:!0,message:b("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:b("mobilePlaceholder"),trigger:["blur","change"]},{validator:()=>uni.$u.test.mobile($.value.mobile),message:b("mobileError")}]}))),z=a(!1),B=()=>{if(uni.$u.test.isEmpty($.value.area))return void p({title:b("selectAddressPlaceholder"),icon:"none"});const e=$.value.id?v:f;U.value.validate().then((()=>{z.value||(z.value=!0,$.value.full_address=`${$.value.area}${$.value.address_name}${$.value.address}`,e($.value).then((e=>{z.value=!1,setTimeout((()=>{_({url:"/app/pages/member/address",param:{type:C.value}})}),1e3)})).catch((()=>{z.value=!1})))}))},H=()=>{h({success:e=>{e.latitude&&($.value.lat=e.latitude),e.longitude&&($.value.lng=e.longitude),e.address&&($.value.area=e.address),e.name&&($.value.address_name=e.name)}})};return(e,a)=>{const l=g,r=x(y("u-input"),j),s=x(y("u-form-item"),w),p=x(y("u-icon"),k),v=x(y("u-switch"),q),f=x(y("u-button"),A),_=x(y("u-form"),P),h=V;return t(),d(h,{"scroll-y":"true",class:"bg-page h-screen"},{default:u((()=>[o(' <view class="h-[88rpx]">\r\n\t\t        <u-navbar title="添加地址" @rightClick="rightClick" :autoBack="true"></u-navbar>\r\n\t\t</view> '),i(l,{class:"h-[30rpx]"}),i(l,{class:"m-[30rpx] mt-0 p-[30rpx] pt-[10rpx] rounded-md bg-white"},{default:u((()=>[i(_,{labelPosition:"left",model:$.value,labelWidth:"200rpx",errorType:"toast",rules:m(E),ref_key:"formRef",ref:U},{default:u((()=>[i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:m(b)("name"),prop:"name","border-bottom":!0},{default:u((()=>[i(r,{modelValue:$.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.name=e),border:"none",clearable:"",placeholder:m(b)("namePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:m(b)("mobile"),prop:"mobile","border-bottom":!0},{default:u((()=>[i(r,{modelValue:$.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.mobile=e),border:"none",clearable:"",placeholder:m(b)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:m(b)("deliveryAddress"),prop:"address_name","border-bottom":!0},{default:u((()=>[i(l,{class:"flex justify-between flex-1",onClick:H},{default:u((()=>[i(l,{class:"text-[#c3c4d5] text-[15px]"},{default:u((()=>[n(c($.value.area?$.value.address_name:m(b)("selectAddressPlaceholder")),1)])),_:1}),i(p,{name:"arrow-right",color:"#c3c4d5"})])),_:1})])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:m(b)("address"),prop:"address","border-bottom":!0},{default:u((()=>[i(r,{modelValue:$.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value.address=e),border:"none",clearable:"",placeholder:m(b)("addressPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:m(b)("defaultAddress"),prop:"name","border-bottom":!0},{default:u((()=>[i(v,{modelValue:$.value.is_default,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value.is_default=e),size:"20",activeValue:1,inactiveValue:0},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[40rpx]"},{default:u((()=>[i(f,{type:"primary",shape:"circle",text:m(b)("save"),onClick:B,loading:z.value},null,8,["text","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}}});export{C as default};
