import{d as e,r,o as a,i as t,j as l,w as s,n as o,k as d,P as i,Q as p,R as u,m as n,ab as c,ac as x,x as f,a7 as m,q as _,t as v,D as b,G as g,H as y,K as h,y as k,h as j,bm as C,I as w}from"./index-b892d4e0.js";import{_ as S}from"./u-icon.2852c2d9.js";import{_ as z}from"./u--image.b7971bb1.js";import{_ as D}from"./pay.d74aef8f.js";import{c as I,d as M,o as R,a as U}from"./order.5dd5a5f7.js";import{g as E}from"./shop.15cdf37d.js";import{u as P,M as q}from"./useMescroll.7bd73685.js";import{M as F}from"./mescroll-empty.7dc6de81.js";import{_ as K}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.4f60c619.js";import"./u-transition.7137dcba.js";import"./u-button.08a3c855.js";import"./u-loading-icon.4005a6dc.js";import"./u-popup.01e03503.js";import"./u-safe-bottom.f8131532.js";import"./pay.933e6c1c.js";import"./wechat.06bcef40.js";/* empty css                                                                       */const Q=K(e({__name:"list",setup(e){const{mescrollInit:K,downCallback:Q,getMescroll:$}=P(x,c);let G=r([]),H=r(!1),N=r(!1),O=r(""),T=r([]);const Y=r("");a((e=>{O.value=e.status||"",A(),J()}));const A=()=>{E().then((e=>{Y.value=e.data}))},B=e=>{H.value=!1;let r={page:e.num,limit:e.size,status:O.value};M(r).then((r=>{let a=r.data.data;1==e.num&&(G.value=[]),G.value=G.value.concat(a),e.endSuccess(a.length),H.value=!0})).catch((()=>{H.value=!0,e.endErr()}))},J=()=>{N.value=!1,T.value=[];T.value.push({name:"全部",status:""}),I().then((e=>{Object.values(e.data).forEach(((e,r)=>{T.value.push(e)})),N.value=!0})).catch((()=>{N.value=!0}))},L=e=>{j({url:"/addon/shop/pages/order/detail",param:{order_id:e.order_id}})},V=r(null),W=(e,r="")=>{var a;"pay"==r?null==(a=V.value)||a.open(e.order_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`):"close"==r?X(e):"finish"==r?Z(e):"evaluate"==r&&(e.is_evaluate?j({url:"/addon/shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):j({url:"/addon/shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},X=e=>{C({title:"提示",content:"您确定要关闭该订单吗？",success:r=>{r.confirm&&R(e.order_id).then((e=>{$().resetUpScroll()}))}})},Z=e=>{C({title:"提示",content:"您确定物品已收到吗？",success:r=>{r.confirm&&U(e.order_id).then((e=>{$().resetUpScroll()}))}})};return(e,r)=>{const a=f,c=m,x=_(v("u-icon"),S),j=_(v("u--image"),z),C=w,I=_(v("pay"),D);return t(),l(a,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden order-list"},{default:s((()=>[o(N)?(t(),l(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[d(c,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:s((()=>[d(a,{class:"flex whitespace-nowrap justify-around"},{default:s((()=>[(t(!0),i(u,null,p(o(T),((e,r)=>(t(),l(a,{class:b(["text-sm leading-[90rpx]",{"class-select":o(O)===e.status.toString()}]),onClick:r=>{return a=e.status,O.value=a.toString(),G.value=[],void $().resetUpScroll();var a}},{default:s((()=>[g(y(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):n("v-if",!0),d(q,{ref:"mescrollRef",top:"104rpx",onInit:o(K),onDown:o(Q),onUp:B},{default:s((()=>[d(a,{class:"goods-wrap"},{default:s((()=>[(t(!0),i(u,null,p(o(G),((e,r)=>(t(),l(a,{key:r,class:"mb-[30rpx] bg-[#fff] pb-[24rpx]"},{default:s((()=>[d(a,{onClick:r=>L(e)},{default:s((()=>[d(a,{class:"bg-[#fff] px-[24rpx] py-[24rpx] rounded-[16rpx]"},{default:s((()=>[d(a,{class:"text-[30rpx] text-[#222] flex justify-between"},{default:s((()=>[d(a,{class:""},{default:s((()=>[g(y(o(h)("orderNo"))+"："+y(e.order_no),1)])),_:2},1024),d(a,{class:"text-[var(--primary-color)]"},{default:s((()=>[g(y(e.status_name.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(a,{class:"px-[24rpx]"},{default:s((()=>[(t(!0),i(u,null,p(e.order_goods,((e,r)=>(t(),l(a,{class:"order-goods-item flex mt-[50rpx]",key:r},{default:s((()=>[d(a,{class:"w-[160rpx] h-[160rpx] flex-2"},{default:s((()=>[d(j,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:o(k)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:s((()=>[d(x,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),d(a,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:s((()=>[d(a,null,{default:s((()=>[d(C,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:s((()=>[g(y(e.goods_name),1)])),_:2},1024),e.sku_name?(t(),l(a,{key:0,class:"flex"},{default:s((()=>[d(C,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:s((()=>[g(y(e.sku_name),1)])),_:2},1024)])),_:2},1024)):n("v-if",!0)])),_:2},1024),d(a,{class:"flex justify-between"},{default:s((()=>[d(C,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:s((()=>[g("￥"+y(e.price),1)])),_:2},1024),d(C,{class:"text-right text-[24rpx]"},{default:s((()=>[g("x"+y(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["onClick"]),d(a,{class:"flex justify-between text-[28rpx] px-[24rpx] mt-[40rpx]"},{default:s((()=>[d(C,{class:"text-[#999]"},{default:s((()=>[g(y(e.create_time),1)])),_:2},1024),d(C,null,{default:s((()=>[g(y(o(h)("actualPayment"))+"：",1),d(C,{class:"text-[var(--price-text-color)] price-font"},{default:s((()=>[g("￥"+y(e.order_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(a,{class:"mt-[34rpx] flex justify-end z-10 px-[24rpx]"},{default:s((()=>[1==e.status?(t(),l(a,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r=>W(e,"close")},{default:s((()=>[g(y(o(h)("orderClose")),1)])),_:2},1032,["onClick"])):n("v-if",!0),d(a,{class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r=>L(e)},{default:s((()=>[g(y(o(h)("orderDetail")),1)])),_:2},1032,["onClick"]),1==e.status?(t(),l(a,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx]",onClick:r=>W(e,"pay")},{default:s((()=>[g(y(o(h)("topay")),1)])),_:2},1032,["onClick"])):n("v-if",!0),3==e.status?(t(),l(a,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx]",onClick:r=>W(e,"finish")},{default:s((()=>[g(y(o(h)("orderFinish")),1)])),_:2},1032,["onClick"])):n("v-if",!0),5==e.status&&1==Y.value.is_evaluate?(t(),l(a,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r=>W(e,"evaluate")},{default:s((()=>[g(y(o(h)("evaluate")),1)])),_:2},1032,["onClick"])):n("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),!o(G).length&&o(H)?(t(),l(F,{key:0,option:{icon:o(k)("static/resource/images/empty.png")}},null,8,["option"])):n("v-if",!0)])),_:1},8,["onInit","onDown"]),d(I,{ref_key:"payRef",ref:V,onClose:e.payClose},null,8,["onClose"])])),_:1})}}}),[["__scopeId","data-v-ded17c26"]]);export{Q as default};
