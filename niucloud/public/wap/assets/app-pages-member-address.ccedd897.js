import{d as e,r as a,H as s,L as t,t as l,o as r,c as o,w as c,b as d,T as n,ae as u,U as i,f as p,x as f,y as x,u as m,n as _,bW as v,a as g,j as b,F as h,av as y,bX as k,s as C,z as j,bY as S,bZ as w,E as A}from"./index-7c3a221b.js";import{M as z}from"./mescroll-empty.2c3fe416.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./mescroll-uni-option.6cb5caaa.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const F=E(e({__name:"address",setup(e){const E=a(!0),F=a(0),T=a([]);a([]);const V=a(""),B=a("");s((e=>{V.value=e.type||"",B.value=e.source||"",e.type&&(F.value="address"==e.type?0:1),uni.getStorageSync("selectAddressCallback")&&uni.removeStorage({key:"selectAddressCallback"})}));t((()=>{v({}).then((({data:e})=>{const a=[],s=[];e.forEach((e=>{"address"==e.type?a.push(e):s.push(e)})),B.value?T.value=0==F.value?a:s:T.value=e,E.value=!1})).catch((()=>{E.value=!1}))}));const H=()=>{g({url:"/app/pages/member/address_edit",param:{source:B.value}})};a([{text:l("delete"),style:{backgroundColor:"#F56C6C"}}]);return(e,a)=>{const s=b,t=A,v=h,F=y;return E.value?p("v-if",!0):(r(),o(s,{key:0,class:"address bg-[var(--page-bg-color)] min-h-[100vh]",style:_(e.themeColor())},{default:c((()=>[d(F,{"scroll-y":"true"},{default:c((()=>[T.value.length?(r(),o(s,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:c((()=>[(r(!0),n(i,null,u(T.value,((e,a)=>(r(),o(s,{class:"mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden"},{default:c((()=>[d(s,{class:"flex flex-col card-template"},{default:c((()=>[d(s,{class:"flex-1 line-feed mr-[20rpx]",onClick:a=>(e=>{const a=uni.getStorageSync("selectAddressCallback");a&&(a.address_id=e.id,uni.setStorage({key:"selectAddressCallback",data:a,success(){g({url:a.back,mode:"redirectTo"})}}))})(e)},{default:c((()=>[d(s,{class:"flex items-center"},{default:c((()=>[d(s,{class:"text-[#333] text-[30rpx] leading-[34rpx] font-500"},{default:c((()=>[f(x(e.name),1)])),_:2},1024),d(t,{class:"text-[#333] text-[30rpx] ml-[10rpx]"},{default:c((()=>[f(x(m(k)(e.mobile)),1)])),_:2},1024)])),_:2},1024),d(s,{class:"mt-[16rpx] text-[26rpx] line-feed text-[var(--text-color-light9)] leading-[1.4]"},{default:c((()=>[f(x(e.full_address),1)])),_:2},1024)])),_:2},1032,["onClick"]),d(s,{class:"flex justify-between pt-[26rpx]"},{default:c((()=>[d(s,{class:"flex items-center text-[26rpx] leading-none",onClick:C((e=>(e=>{const a=T.value[e];a.is_default||(a.is_default=1,w(a).then((()=>{T.value.forEach(((a,s)=>{a.is_default&&(a.is_default=0),s==e&&(a.is_default=1)}))})).catch())})(a)),["stop"])},{default:c((()=>[d(t,{class:j(["iconfont !text-[26rpx] mr-[10rpx]",{"iconduigou text-primary":e.is_default,iconcheckbox_nol:!e.is_default}])},null,8,["class"]),f(" 设为默认 ")])),_:2},1032,["onClick"]),d(s,{class:"flex"},{default:c((()=>[d(s,{class:"text-[26rpx]",onClick:C((a=>{return s=e.id,void g({url:"/app/pages/member/address_edit",param:{id:s,source:B.value}});var s}),["stop"])},{default:c((()=>[d(t,{class:"nc-iconfont nc-icon-xiugaiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),f("编辑")])),_:2},1032,["onClick"]),d(s,{onClick:C((e=>(e=>{const a=T.value[e];S(a.id).then((()=>{T.value.splice(e,1)})).catch()})(a)),["stop"]),class:"ml-[40rpx] text-[26rpx]"},{default:c((()=>[d(t,{class:"nc-iconfont nc-icon-shanchu-yuangaizhiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),f("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})):p("v-if",!0),T.value.length?p("v-if",!0):(r(),o(z,{key:1,option:{tip:"暂无收货地址"}})),d(s,{class:"w-full footer"},{default:c((()=>[d(s,{class:"py-[var(--top-m)] px-[var(--sidebar-m)] footer w-full fixed bottom-0 left-0 right-0 box-border"},{default:c((()=>[d(v,{"hover-class":"none",class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:H},{default:c((()=>[f(x(m(l)("createAddress")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]))}}}),[["__scopeId","data-v-2e030222"]]);export{F as default};
