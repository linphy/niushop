import{_ as e}from"./loading-page.vue_vue_type_script_setup_true_lang.b9794441.js";import{d as l,m as a,r as t,y as s,t as r,k as u,as as n,at as x,af as i,o as c,c as o,w as p,b as f,u as v,n as d,f as _,Q as g,am as m,R as b,z as h,g as y,i as w,j as k,C as j,au as C,al as F,E as z,F as E,S as T,A as X,a as I,av as A,aw as O}from"./index-2dd15007.js";import{t as P}from"./topTabbar.2b5ec418.js";import{_ as Q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.9cd30678.js";import"./u-transition.962c906a.js";const R=Q(l({__name:"level",setup(l){const Q=a(),R=t(!1),S=t([]),$=t([]),q=t(0),B=t(0);P().setTopTabbarParam({title:"会员等级"}),s((()=>{r()&&(M(),L())}));const D=u((()=>Q.info)),G=e=>{let l=e,a=100;return S.value[l]&&S.value[l].growth&&(a=D.value.growth/S.value[l].growth*100),a},H=t(""),J=t(""),K=t(""),L=()=>{R.value=!0,n().then((e=>{S.value=e.data||[];let l=!0;D.value&&S.value&&S.value.length&&S.value.forEach(((e,a)=>{e.level_id==D.value.member_level&&(l=!1,q.value=a,B.value=q.value,V(a))})),l&&V(0),S.value&&S.value.length>=5?(H.value="width:115rpx;",J.value="max-width:115rpx;",K.value="width:460rpx;transform: translateX(-235rpx);"):S.value&&4==S.value.length?(H.value="width:144rpx;",J.value="max-width:144rpx;",K.value="width:436rpx;transform: translateX(-218rpx);"):S.value&&3==S.value.length?(H.value="width:192rpx;",J.value="max-width:192rpx;",K.value="width:388rpx;transform: translateX(-194rpx);"):S.value&&2==S.value.length?(H.value="width:289rpx;",J.value="max-width:289rpx;",K.value="width:289rpx;transform: translateX(-144rpx);"):(J.value="max-width:578rpx;",H.value="width:100%;"),R.value=!1})).catch((()=>{R.value=!1}))},M=()=>{x().then((e=>{$.value=e.data}))},N=e=>{q.value=e.detail.current,B.value=q.value,V(e.detail.current)},U=t({}),V=e=>{let l=i(S.value[e]);if(l&&l.level_benefits&&(l.benefits_arr=[],Object.values(l.level_benefits).forEach(((e,a,t)=>{e.content&&l.benefits_arr.push(e.content)}))),l&&l.level_gifts){l.gifts_arr=[];for(let e in l.level_gifts)l.level_gifts[e].content&&(l.level_gifts[e].content.forEach(((l,a,t)=>{t[a].type=e})),l.gifts_arr=l.gifts_arr.concat(l.level_gifts[e].content))}U.value=l};return(l,a)=>{const t=y(w("loading-page"),e),s=k,r=j,u=A,n=O,x=C,i=F,P=z;return c(),o(s,{style:d(l.themeColor()),class:"bg-[var(--page-bg-color)] min-h-[100vh] overflow-hidden"},{default:p((()=>[f(t,{loading:R.value&&v(D)},null,8,["loading"]),!R.value&&v(D)&&S.value&&S.value.length?(c(),o(s,{key:0,class:"min-h-[100vh] overflow-hidden flex flex-col",style:d({backgroundColor:U.value.level_style.bg_color})},{default:p((()=>[f(s,null,{default:p((()=>[f(s,{class:"pt-[40rpx] mb-[40rpx]"},{default:p((()=>[_(" 轮播图 "),f(s,{class:"relative"},{default:p((()=>[f(x,{class:"swiper ns-indicator-dots relative",style:{height:"300rpx"},onChange:N,current:q.value,"previous-margin":"30rpx","next-margin":"30rpx"},{default:p((()=>[(c(!0),g(b,null,m(S.value,((e,l)=>(c(),o(n,{class:"swiper-item",key:e.id},{default:p((()=>[f(s,{class:"h-[300rpx] relative"},{default:p((()=>[v(D).member_level==e.level_id&&q.value==l?(c(),o(s,{key:0,class:"text-[24rpx] absolute top-0 left-0 z-10 h-[66rpx] !bg-contain w-[150rpx] flex pt-[12rpx] pl-[16rpx] box-border",style:d({background:"url("+v(E)(U.value.level_tag)+") no-repeat",color:U.value.level_style.level_color})},{default:p((()=>[h(" 当前等级 ")])),_:1},8,["style"])):_("v-if",!0),f(s,{class:T(["absolute top-0 left-0 right-0 bottom-0 z-20 px-[30rpx] pt-[68rpx] box-border",{"px-[50rpx]":q.value!=l}])},{default:p((()=>[f(s,{class:"flex items-center leading-[50rpx] mb-[90rpx]"},{default:p((()=>[f(r,{class:"h-[32rpx] w-[34rpx] align-middle",src:v(E)(e.level_icon?e.level_icon:""),mode:"aspectFill"},null,8,["src"]),f(s,{class:"text-[36rpx] font-bold ml-[10rpx] max-w-[340rpx] truncate",style:d({color:U.value.level_style.level_color})},{default:p((()=>[h(X(e.level_name),1)])),_:2},1032,["style"])])),_:2},1024),f(s,{class:"flex items-baseline",style:d({color:U.value.level_style.level_color})},{default:p((()=>[f(s,{class:"text-[30rpx] font-500 leading-[38rpx]"},{default:p((()=>[h(X(v(D).growth),1)])),_:1}),f(s,{class:"text-[24rpx] leading-[34rpx]"},{default:p((()=>[h("/"+X(S.value[l].growth)+"成长值",1)])),_:2},1024)])),_:2},1032,["style"]),f(s,{class:"flex justify-between items-center mt-[10rpx]"},{default:p((()=>[f(s,{class:"flex flex-col flex-1"},{default:p((()=>[f(s,null,{default:p((()=>[f(u,{percent:G(l),"border-radius":100,activeColor:U.value.level_style.level_color,backgroundColor:"#fff","stroke-width":"4"},null,8,["percent","activeColor"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),f(s,{class:"relatvie h-full w-full"},{default:p((()=>[f(r,{class:T(["h-full w-full",{"swiper-animation":q.value!=l}]),src:v(E)(e.level_bg),"show-menu-by-longpress":!0},null,8,["src","class"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current"])])),_:1})])),_:1}),f(s,{class:"mb-[30rpx] relative"},{default:p((()=>[f(s,{class:"bg-[#fff] opacity-15 h-[2rpx] w-full absolute top-[15rpx]"}),f(s,{style:d(K.value),class:"bg-[#fff] opacity-60 h-[2rpx] absolute top-[15rpx] z-4 left-[50%]"},null,8,["style"]),f(s,{class:"mx-[86rpx]"},{default:p((()=>[f(i,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(B.value?B.value-1:0)},{default:p((()=>[f(s,{class:"flex flex-nowrap py-[10rpx]"},{default:p((()=>[(c(!0),g(b,null,m(S.value,((e,l)=>(c(),o(s,{key:e.id,style:d(H.value),class:"flex-shrink-0 flex flex-col items-center justify-center",onClick:e=>(e=>{B.value=e,q.value=e,V(e)})(l),id:"id"+l},{default:p((()=>[f(s,{class:T(["w-[14rpx] h-[14rpx] level-class",{"level-select":B.value==l}])},null,8,["class"]),f(s,{style:d(J.value),class:T(["text-[22rpx] text-[#aaa] mt-[16rpx] truncate",{"!text-[#fff]":B.value==l}])},{default:p((()=>[h(X(e.level_name),1)])),_:2},1032,["style","class"])])),_:2},1032,["style","onClick","id"])))),128))])),_:1})])),_:1},8,["scroll-into-view"])])),_:1})])),_:1}),U.value.benefits_arr&&U.value.benefits_arr.length?(c(),o(s,{key:0,class:"flex mx-[var(--sidebar-m)] pt-[30rpx] pb-[46rpx] items-center flex-col level_benefits",style:d({backgroundImage:"url("+v(E)(U.value.member_bg)+")"})},{default:p((()=>[f(s,{class:"flex items-center justify-center"},{default:p((()=>[f(P,{class:"text-[#fff] text-[30rpx] font-500 leading-[44rpx]"},{default:p((()=>[h("会员权益")])),_:1})])),_:1}),f(s,{class:"flex flex-wrap w-[690rpx] mt-[40rpx] justify-between"},{default:p((()=>[(c(!0),g(b,null,m(U.value.benefits_arr,((e,l)=>(c(),o(s,{class:"flex flex-col w-[25%] items-center",key:l},{default:p((()=>[f(r,{class:"h-[88rpx] w-[88rpx]",src:v(E)(e.icon),mode:"heightFix"},null,8,["src"]),f(P,{class:"text-[rgba(255,255,255,0.9)] mt-[16rpx] text-[24rpx] leading-[34rpx]"},{default:p((()=>[h(X(e.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])):_("v-if",!0)])),_:1}),f(s,{class:"flex-1 rounded-t-[40rpx] px-[30rpx] pt-[var(--pad-top-m)] mt-[-10rpx] relative tab-bar",style:d({background:`linear-gradient( 180deg, ${U.value.level_style.gift} 0%, #FFFFFF 20%)`})},{default:p((()=>[_(" 升级礼包 "),U.value.gifts_arr&&U.value.gifts_arr.length?(c(),o(s,{key:0},{default:p((()=>[f(s,{class:"pb-[30rpx] flex items-center"},{default:p((()=>[f(P,{class:"text-[30rpx] text-[#333] font-500 leading-[44rpx]"},{default:p((()=>[h("升级礼包")])),_:1})])),_:1}),f(s,{class:"flex flex-wrap"},{default:p((()=>[(c(!0),g(b,null,m(U.value.gifts_arr,((e,l)=>(c(),o(s,{key:l,class:T(["mb-[20rpx]",{"mr-[21rpx]":(l+1)%3!=0}])},{default:p((()=>[f(s,{class:"relative box-border mb-[16rpx] w-[216rpx] h-[180rpx] !bg-contain",style:d({background:"url("+v(E)(e.background)+") no-repeat"})},null,8,["style"]),f(s,{class:"text-center font-500 text-[#333] text-[28rpx] truncate leading-[40rpx] max-w-[216rpx]"},{default:p((()=>[h(X(e.text),1)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1})):_("v-if",!0),_(" 升级技巧 "),$.value&&$.value.length?(c(),o(s,{key:1},{default:p((()=>[f(s,{class:"pt-[30rpx] pb-[30rpx] flex items-center"},{default:p((()=>[f(P,{class:"text-[30rpx] text-[#333] font-500 leading-[44rpx]"},{default:p((()=>[h("升级技巧")])),_:1})])),_:1}),f(s,{class:"pb-[30rpx]"},{default:p((()=>[(c(!0),g(b,null,m($.value,((e,l)=>(c(),o(s,{class:"flex items-center mb-[34rpx]",key:l},{default:p((()=>[f(r,{class:"h-[100rpx] w-[100rpx] mr-[20rpx]",src:v(E)(e.icon),mode:"heightFix"},null,8,["src"]),f(s,{class:"flex flex-col"},{default:p((()=>[f(s,{class:"text-[28rpx] leading-[38rpx] mb-[8rpx]"},{default:p((()=>[h(X(e.title),1)])),_:2},1024),f(s,{class:"text-[24rpx] text-[var(--text-color-light9)] leading-[34rpx]"},{default:p((()=>[h(X(e.desc),1)])),_:2},1024)])),_:2},1024),f(P,{class:"skill-btn",onClick:l=>v(I)({url:e.button.wap_redirect,param:{},mode:"redirectTo"})},{default:p((()=>[h(X(e.button.text),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):_("v-if",!0)])),_:1},8,["style"])])),_:1},8,["style"])):_("v-if",!0),R.value||S.value&&S.value.length?_("v-if",!0):(c(),o(s,{key:1,class:"empty-page"},{default:p((()=>[f(r,{class:"img",src:v(E)("static/resource/images/empty.png"),mode:"aspectFill"},null,8,["src"]),f(P,{class:"desc"},{default:p((()=>[h("暂无会员等级")])),_:1})])),_:1}))])),_:1},8,["style"])}}}),[["__scopeId","data-v-e2264374"]]);export{R as default};
