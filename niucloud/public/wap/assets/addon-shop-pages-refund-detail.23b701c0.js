import{B as e,C as r,a$ as l,i as t,j as s,w as a,F as o,d,r as u,o as p,P as f,n,k as x,m as i,G as m,H as c,R as _,h as b,x as g,q as h,t as y,I as v,y as j,K as k}from"./index-b892d4e0.js";import{_ as w}from"./u-icon.2852c2d9.js";import{_ as F}from"./u--image.b7971bb1.js";import{_ as C}from"./u--input.898cbcab.js";import{p as S,u as V,_ as B}from"./u-form.217576b7.js";import{_ as $}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as z}from"./u-button.08a3c855.js";import{_ as O}from"./u-modal.12d573ed.js";import{_ as T}from"./u-loading-page.ce4f8a29.js";import{b as P,d as R,e as W,r as q}from"./refund.e7370d13.js";import{l as A}from"./logistics-tracking.7c179b92.js";import"./u-image.4f60c619.js";import"./u-transition.7137dcba.js";import"./u-input.f1512eab.js";import"./u-line.50fdbd2b.js";import"./u-loading-icon.4005a6dc.js";import"./u-popup.01e03503.js";import"./u-safe-bottom.f8131532.js";import"./u-tabs.d5023e00.js";import"./u-badge.9b3b2160.js";import"./u--text.a234201c.js";import"./order.5dd5a5f7.js";/* empty css                                                                       */const I=$({name:"u--form",mixins:[e,S,r],components:{uvForm:V},created(){this.children=[]},methods:{setRules(e){this.$refs.uForm.setRules(e)},validate(){return this.$refs.uForm.validate()},validateField(e,r){return this.$refs.uForm.validateField(e,r)},resetFields(){return this.$refs.uForm.resetFields()},clearValidate(e){return this.$refs.uForm.clearValidate(e)},setMpData(){this.$refs.uForm.children=this.children}}},[["render",function(e,r,d,u,p,f){const n=l("uvForm");return t(),s(n,{ref:"uForm",model:e.model,rules:e.rules,errorType:e.errorType,borderBottom:e.borderBottom,labelPosition:e.labelPosition,labelWidth:e.labelWidth,labelAlign:e.labelAlign,labelStyle:e.labelStyle,customStyle:e.customStyle},{default:a((()=>[o(e.$slots,"default")])),_:3},8,["model","rules","errorType","borderBottom","labelPosition","labelWidth","labelAlign","labelStyle","customStyle"])}]]),U=$(d({__name:"detail",setup(e){let r=u({}),l=u(!0),o=u(""),d=u(""),S=u(!1);const V=u({express_number:"",express_company:"",remark:""}),$={express_number:{type:"string",required:!0,message:"请输入物流单号",trigger:["blur","change"]},express_company:{type:"string",required:!0,message:"请输入物流公司",trigger:["blur","change"]}};p((e=>{o.value=e.order_refund_no,d.value=e.type,S.value=e.is_edit_delivery,U(o.value)}));const U=e=>{l.value=!0,P(e).then((e=>{r.value=e.data,S.value&&r.value.delivery&&(V.value.express_number=r.value.delivery.express_number,V.value.express_company=r.value.delivery.express_company,V.value.remark=r.value.delivery.remark),l.value=!1})).catch((()=>{l.value=!1}))},D=e=>{b({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};let E=u(!1),H="";const K=()=>{R(H).then((e=>{E.value=!1,U(o.value)})).catch((()=>{E.value=!1}))},M=()=>{E.value=!1};let G=u();const L=()=>{G.value.validate().then((e=>{let l={delivery:V.value,order_refund_no:r.value.order_refund_no};(S.value?W(l):q(l)).then((e=>{setTimeout((()=>{b({url:"/addon/shop/pages/refund/list"})}),500)})).catch((()=>{}))}))};return(e,u)=>{const p=g,S=h(y("u-icon"),w),P=h(y("u--image"),F),R=v,W=h(y("u--input"),C),q=h(y("u-form-item"),B),U=h(y("u--form"),I),N=h(y("u-button"),z),J=h(y("u-modal"),O),Q=h(y("u-loading-page"),T);return t(),f(_,null,[n(l)?i("v-if",!0):(t(),s(p,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:a((()=>["logistics"!=n(d)?(t(),s(p,{key:0,class:"pb-[200rpx]"},{default:a((()=>[n(r).status_name?(t(),s(p,{key:0,class:"flex status-item text-[32rpx] bg-primary h-[170rpx]"},{default:a((()=>[x(p,{class:"ml-[50rpx]"},{default:a((()=>[-1!=["1","2","4","6","7"].indexOf(n(r).status)?(t(),f("img",{key:0,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:n(j)("addon/shop/payment.png")},null,8,["src"])):i("v-if",!0),-1!=["8"].indexOf(n(r).status)?(t(),f("img",{key:1,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:n(j)("addon/shop/complete.png")},null,8,["src"])):i("v-if",!0),-1!=["3","5","-1"].indexOf(n(r).status)?(t(),f("img",{key:2,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:n(j)("addon/shop/close.png")},null,8,["src"])):i("v-if",!0)])),_:1}),x(p,{class:"ml-[20rpx] text-[#fff] mt-[50rpx] text-[40rpx]"},{default:a((()=>[m(c(n(r).status_name),1)])),_:1})])),_:1})):i("v-if",!0),x(p,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx] flex justify-between flex-wrap mt-[30rpx]"},{default:a((()=>[x(p,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:u[0]||(u[0]=e=>D(n(r).order_goods.goods_id))},{default:a((()=>[x(P,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:n(j)(n(r).order_goods.goods_image_thumb_small?n(r).order_goods.goods_image_thumb_small:""),model:"aspectFill"},{error:a((()=>[x(S,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),x(p,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:a((()=>[x(p,null,{default:a((()=>[x(R,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:a((()=>[m(c(n(r).order_goods.goods_name),1)])),_:1}),n(r).order_goods.sku_name?(t(),s(p,{key:0,class:"flex"},{default:a((()=>[x(R,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:a((()=>[m(c(n(r).order_goods.sku_name),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),x(p,{class:"flex justify-between"},{default:a((()=>[x(R,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:a((()=>[m("￥"+c(n(r).order_goods.price),1)])),_:1}),x(R,{class:"text-right text-sm"},{default:a((()=>[x(R,{class:"text-[26rpx]"},{default:a((()=>[m("x")])),_:1}),m(c(n(r).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),x(p,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:a((()=>[x(p,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("refundType")),1)])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).refund_type_name),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("refundCause")),1)])),_:1}),x(p,{class:"w-[400rpx] multi-hidden text-right leading-[1.2]"},{default:a((()=>[m(c(n(r).reason||"--"),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("refundNo")),1)])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).order_refund_no),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("createTime")),1)])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).create_time),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("createExplain")),1)])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).remark),1)])),_:1})])),_:1})])),_:1}),x(p,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:a((()=>[x(p,{class:"flex justify-between text-[28rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:a((()=>[x(p,null,{default:a((()=>[m(c(n(k)("record")),1)])),_:1}),x(p,{class:"flex items-center",onClick:u[1]||(u[1]=e=>n(b)({url:"/addon/shop/pages/refund/log",param:{order_refund_no:n(o)}}))},{default:a((()=>[x(R,null,{default:a((()=>[m(c(n(k)("check")),1)])),_:1}),x(R,{class:"iconfont iconxiangyoujiantou text-xs"})])),_:1})])),_:1})])),_:1}),x(p,{class:"flex tab-bar justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap"},{default:a((()=>[x(p,{class:"flex ml-[30rpx] w-[70rpx] flex-col justify-center items-center",onClick:u[2]||(u[2]=e=>{n(b)({url:"/addon/shop/pages/index"})})},{default:a((()=>[x(R,{class:"iconfont iconshouye text-[32rpx]"}),x(R,{class:"text-xs mt-1"},{default:a((()=>[m(c(n(k)("index")),1)])),_:1})])),_:1}),x(p,{class:"flex justify-end mr-[30rpx]"},{default:a((()=>[-1==["6","7","8","-1"].indexOf(n(r).status)?(t(),s(p,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:u[3]||(u[3]=e=>{return l=n(r),H=l.order_refund_no,void(E.value=!0);var l})},{default:a((()=>[m(c(n(k)("refundApply")),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})):(t(),s(p,{key:1},{default:a((()=>[x(p,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx] flex justify-between flex-wrap mt-[30rpx]"},{default:a((()=>[x(p,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:u[4]||(u[4]=e=>D(n(r).order_goods.goods_id))},{default:a((()=>[x(P,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:n(j)(n(r).order_goods.sku_image?n(r).order_goods.sku_image:""),model:"aspectFill"},{error:a((()=>[x(S,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),x(p,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:a((()=>[x(p,null,{default:a((()=>[x(R,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:a((()=>[m(c(n(r).order_goods.goods_name),1)])),_:1}),n(r).order_goods.sku_name?(t(),s(p,{key:0,class:"flex"},{default:a((()=>[x(R,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:a((()=>[m(c(n(r).order_goods.sku_name),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),x(p,{class:"flex justify-between"},{default:a((()=>[x(R,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:a((()=>[m("￥"+c(n(r).order_goods.price),1)])),_:1}),x(R,{class:"text-right text-sm"},{default:a((()=>[x(R,{class:"text-[26rpx]"},{default:a((()=>[m("x")])),_:1}),m(c(n(r).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),x(p,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx] mt-[30rpx]"},{default:a((()=>[x(p,{class:"flex justify-between text-[28rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:a((()=>[x(p,null,{default:a((()=>[m("联系人")])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).contact_name),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m("手机号")])),_:1}),x(p,null,{default:a((()=>[m(c(n(r).mobile),1)])),_:1})])),_:1}),x(p,{class:"flex justify-between text-[28rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:a((()=>[x(p,null,{default:a((()=>[m("退货地址")])),_:1}),x(p,{class:"w-[460rpx] text-sm"},{default:a((()=>[m(c(n(r).refund_address.full_address||"--"),1)])),_:1})])),_:1})])),_:1}),x(p,{class:"bg-[#fff] mx-[30rpx] px-[30rpx] py-[10rpx] rounded-[10rpx] mt-[30rpx]"},{default:a((()=>[x(U,{labelPosition:"left",model:V.value,rules:$,ref_key:"deliveryForm",ref:G,labelWidth:"140rpx",labelStyle:{fontSize:"28rpx"}},{default:a((()=>[x(q,{label:"物流公司",prop:"express_company",borderBottom:"true",ref:"item1"},{default:a((()=>[x(W,{pl:"",border:"none",modelValue:V.value.express_company,"onUpdate:modelValue":u[5]||(u[5]=e=>V.value.express_company=e),placeholder:"请输入物流公司",placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),x(q,{label:"物流单号",prop:"express_number",borderBottom:"true",ref:"item1"},{default:a((()=>[x(W,{border:"none",placeholder:"请输入物流单号",modelValue:V.value.express_number,"onUpdate:modelValue":u[6]||(u[6]=e=>V.value.express_number=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),x(q,{label:"物流说明",borderBottom:"",ref:"item1"},{default:a((()=>[x(W,{border:"none",placeholder:"选填",modelValue:V.value.remark,"onUpdate:modelValue":u[7]||(u[7]=e=>V.value.remark=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512)])),_:1},8,["model"])])),_:1}),x(p,{class:"mx-[30rpx]"},{default:a((()=>[x(N,{class:"mt-[30rpx]",type:"primary",shape:"circle",onClick:L},{default:a((()=>[m("提交")])),_:1})])),_:1})])),_:1})),x(A,{ref:"materialRef"},null,512),x(J,{show:n(E),content:n(k)("cancelRefundContent"),showCancelButton:!0,closeOnClickOverlay:!0,onCancel:M,onConfirm:K},null,8,["show","content"])])),_:1})),x(Q,{"bg-color":"rgb(248,248,248)",loading:n(l),fontSize:"16",color:"#333"},null,8,["loading"])],64)}}}),[["__scopeId","data-v-704bc25d"]]);export{U as default};
