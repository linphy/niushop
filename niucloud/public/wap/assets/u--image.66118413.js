import{a1 as o,a2 as e,a3 as r,a4 as a,a5 as i,a6 as t,g as s,i as d,o as n,c as l,w as h,b as g,n as u,f as m,_ as c,C as p,j as w,$ as y}from"./index-2dd15007.js";import{_ as f}from"./u-icon.c1509425.js";import{_ as b}from"./u-transition.962c906a.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";const _={props:{src:{type:String,default:()=>o.image.src},mode:{type:String,default:()=>o.image.mode},width:{type:[String,Number],default:()=>o.image.width},height:{type:[String,Number],default:()=>o.image.height},shape:{type:String,default:()=>o.image.shape},radius:{type:[String,Number],default:()=>o.image.radius},lazyLoad:{type:Boolean,default:()=>o.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:()=>o.image.showMenuByLongpress},loadingIcon:{type:String,default:()=>o.image.loadingIcon},errorIcon:{type:String,default:()=>o.image.errorIcon},showLoading:{type:Boolean,default:()=>o.image.showLoading},showError:{type:Boolean,default:()=>o.image.showError},fade:{type:Boolean,default:()=>o.image.fade},webp:{type:Boolean,default:()=>o.image.webp},duration:{type:[String,Number],default:()=>o.image.duration},bgColor:{type:String,default:()=>o.image.bgColor}}};const S=L({name:"u-image",mixins:[e,r,_],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(o){o?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let o={};return o.width=a(this.width),o.height=a(this.height),o.borderRadius="circle"==this.shape?"10000px":a(this.radius),o.overflow=this.radius>0?"hidden":"visible",i(o,t(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{addUnit:a,onClick(){this.$emit("click")},onErrorHandler(o){this.loading=!1,this.isError=!0,this.$emit("error",o)},onLoadHandler(o){this.loading=!1,this.isError=!1,this.$emit("load",o),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(o,e,r,a,i,t){const y=p,L=s(d("u-icon"),f),_=w,S=s(d("u-transition"),b);return n(),l(S,{mode:"fade",show:i.show,duration:o.fade?1e3:0},{default:h((()=>[g(_,{class:"u-image",onClick:t.onClick,style:u([t.wrapStyle,i.backgroundStyle])},{default:h((()=>[i.isError?m("v-if",!0):(n(),l(y,{key:0,src:o.src,mode:o.mode,onError:t.onErrorHandler,onLoad:t.onLoadHandler,"show-menu-by-longpress":o.showMenuByLongpress,"lazy-load":o.lazyLoad,class:"u-image__image",style:u({borderRadius:"circle"==o.shape?"10000px":t.addUnit(o.radius),width:t.addUnit(o.width),height:t.addUnit(o.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),o.showLoading&&i.loading?(n(),l(_,{key:1,class:"u-image__loading",style:u({borderRadius:"circle"==o.shape?"50%":t.addUnit(o.radius),backgroundColor:this.bgColor,width:t.addUnit(o.width),height:t.addUnit(o.height)})},{default:h((()=>[c(o.$slots,"loading",{},(()=>[g(L,{name:o.loadingIcon,width:o.width,height:o.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):m("v-if",!0),o.showError&&i.isError&&!i.loading?(n(),l(_,{key:2,class:"u-image__error",style:u({borderRadius:"circle"==o.shape?"50%":t.addUnit(o.radius),width:t.addUnit(o.width),height:t.addUnit(o.height)})},{default:h((()=>[c(o.$slots,"error",{},(()=>[g(L,{name:o.errorIcon,width:o.width,height:o.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):m("v-if",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-febc2405"]]);const E=L({name:"u--image",mixins:[e,_,r],components:{uvImage:S},emits:["click","error","load"]},[["render",function(o,e,r,a,i,t){const s=y("uvImage");return n(),l(s,{src:o.src,mode:o.mode,width:o.width,height:o.height,shape:o.shape,radius:o.radius,lazyLoad:o.lazyLoad,showMenuByLongpress:o.showMenuByLongpress,loadingIcon:o.loadingIcon,errorIcon:o.errorIcon,showLoading:o.showLoading,showError:o.showError,fade:o.fade,webp:o.webp,duration:o.duration,bgColor:o.bgColor,customStyle:o.customStyle,onClick:e[0]||(e[0]=e=>o.$emit("click")),onError:e[1]||(e[1]=e=>o.$emit("error")),onLoad:e[2]||(e[2]=e=>o.$emit("load"))},{loading:h((()=>[c(o.$slots,"loading")])),error:h((()=>[c(o.$slots,"error")])),_:3},8,["src","mode","width","height","shape","radius","lazyLoad","showMenuByLongpress","loadingIcon","errorIcon","showLoading","showError","fade","webp","duration","bgColor","customStyle"])}]]);export{E as _,S as a};
