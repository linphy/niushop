import{d as e,r as t,i as r,j as l,w as a,k as s,P as p,Q as o,n as x,R as d,m as n,ab as u,ac as c,x as f,a7 as i,q as _,t as m,D as b,G as g,H as v,y as h,h as w,I as y,W as j,aP as k}from"./index-616d13f7.js";import{_ as F}from"./pay.0b9c921c.js";import{c as E}from"./coupon.25ec12b4.js";import{u as D,M as C}from"./useMescroll.895b6e1f.js";import{M as I}from"./mescroll-empty.b3c9bf1e.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.37db3168.js";import"./u-icon.9fd6fcea.js";import"./u-transition.b526b92d.js";import"./u-button.0dc6d340.js";import"./u-loading-icon.3da3468b.js";import"./u-popup.0e0ff09c.js";import"./u-safe-bottom.09842298.js";import"./pay.f3bd4c74.js";import"./wechat.a9c418ff.js";/* empty css                                                                       */const R=M(e({__name:"my_coupon",setup(e){const{mescrollInit:M,downCallback:R,getMescroll:z}=D(c,u),A=t([]),P=t(!1),S=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],q=t(1),Q=e=>{P.value=!1;let t={page:e.num,limit:e.size,status:q.value};E(t).then((t=>{let r=t.data.data;1==e.num&&(A.value=[]),A.value=A.value.concat(r),e.endSuccess(r.length),P.value=!0})).catch((()=>{P.value=!0,e.endErr()}))};return(e,t)=>{const u=f,c=i,E=y,D=j,U=k,G=_(m("pay"),F);return r(),l(u,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:a((()=>[s(u,{class:"fixed left-0 top-0 right-0 z-10"},{default:a((()=>[s(c,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:a((()=>[s(u,{class:"flex whitespace-nowrap justify-around"},{default:a((()=>[(r(!0),p(d,null,o(x(S),((e,t)=>(r(),l(u,{class:b(["text-[27rpx] leading-[90rpx]",{"class-select":q.value===e.status}]),onClick:t=>{return r=e.status,q.value=r,A.value=[],void z().resetUpScroll();var r}},{default:a((()=>[g(v(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),s(C,{ref:"mescrollRef",top:"90rpx",onInit:x(M),onDown:x(R),onUp:Q},{default:a((()=>[s(u,{class:"py-[20rpx] px-[24rpx]"},{default:a((()=>[(r(!0),p(d,null,o(A.value,((e,t)=>(r(),p(d,null,[1!=q.value?(r(),l(u,{key:0,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#EEEEEE]",{"mt-[20rpx]":t}])},{default:a((()=>[s(u,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#93979D] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(u,{class:"w-[100%]"},{default:a((()=>[s(u,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(E,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(E,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(u,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(E,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(E,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(u,{class:"h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx] mr-[9rpx]"},{default:a((()=>[s(u,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(u,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(u,{class:"flex mt-[5rpx]"},{default:a((()=>[s(E,{class:"flex items-center bg-[#93979D] text-[#fff] text-[20rpx] h-[32rpx] leading-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(u,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[22rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[1==e.valid_type?(r(),l(E,{key:0},{default:a((()=>[g("领取之日起"+v(e.length||"")+"天内有效",1)])),_:2},1024)):(r(),l(E,{key:1},{default:a((()=>[g(" 有效期至"+v(e.valid_end_time?e.valid_end_time.slice(0,10):""),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(U,{class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#EEEEEE] leading-[50rpx] text-[#93979D] remove-border",disabled:""},{default:a((()=>[g(v(x(S)[q.value-1].name),1)])),_:1}),s(u,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(u,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"])):(r(),l(u,{key:1,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#FFF4F4]",{"mt-[20rpx]":t}])},{default:a((()=>[s(u,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#FF4646] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(u,{class:"w-[100%]"},{default:a((()=>[s(u,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(E,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(E,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(u,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(E,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(E,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border_active.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(u,{class:b(["h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx]",1===q.value?"mr-[9rpx]":"mr-[34rpx]"])},{default:a((()=>[s(u,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(u,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(u,{class:"flex mt-[5rpx]"},{default:a((()=>[s(E,{class:"flex items-center bg-[#FF4646] text-[#fff] text-[20rpx] h-[32rpx] leading-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(u,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[20rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[s(E,null,{default:a((()=>[g(" 有效期至"),s(E,{class:"text-[#FF4543]"},{default:a((()=>[g(v(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),1===q.value?(r(),l(U,{key:0,class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#FF4646] leading-[50rpx] rounded-full text-white remove-border",onClick:t=>{return r=e.id,void w({url:"/addon/shop/pages/goods/list",param:{coupon_id:r}});var r}},{default:a((()=>[g("去使用")])),_:2},1032,["onClick"])):n("v-if",!0),s(u,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(u,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"]))],64)))),256))])),_:1}),!A.value.length&&P.value?(r(),l(I,{key:0,option:{icon:x(h)("static/resource/images/empty.png")}},null,8,["option"])):n("v-if",!0)])),_:1},8,["onInit","onDown"]),s(G,{ref:"payRef"},null,512)])),_:1})}}}),[["__scopeId","data-v-46a6e720"]]);export{R as default};
