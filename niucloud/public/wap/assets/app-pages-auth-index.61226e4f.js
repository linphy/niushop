import{d as e,k as r,r as t,l as a,m as l,p as s,q as o,s as n,t as p,x as i,a as u,y as c,o as x,c as d,w as f,b as m,u as g,z as _,A as b,f as v,B as y,n as h,C as k,j as w,D as C,g as j,i as L,E as T,F as A,G as F,H as z,I}from"./index-2dd15007.js";import{_ as q,a as B}from"./u-checkbox-group.d03e9961.js";import{_ as N}from"./uni-popup.f9681b96.js";import{t as O}from"./topTabbar.2b5ec418.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.c1509425.js";const S=P(e({__name:"index",setup(e){let P={};O().setTopTabbarParam({title:"",topStatusBar:{textColor:"#333"}}),r((()=>Object.keys(P).length?z(Number(P.height))+z(P.top)+z(8)+"rpx":"auto")),t("");const S=t(!1),D=a(),E=r((()=>D.login)),G=I();l(),r((()=>l().info));const H=s();r((()=>!S.value&&D.login.agreement_show?"":"getPhoneNumber")),t(null);const R=r((()=>!D.login.is_auth_register)),V=t(!1),J=t(),K=()=>{J.value.close()},M=()=>{S.value=!0,J.value.close(),U()};o((async()=>{await H.getSiteInfoFn(),await D.getLoginConfig();let e=!D.login.is_username&&!D.login.is_mobile&&!D.login.is_bind_mobile;n()?!p()&&e&&R.value&&(i({title:"商家未开启登录注册",icon:"none"}),setTimeout((()=>{u({url:"/app/pages/index/index",mode:"reLaunch"})}),100)):!p()&&e&&(i({title:"商家未开启登录注册",icon:"none"}),setTimeout((()=>{u({url:"/app/pages/index/index",mode:"reLaunch"})}),100))})),c((()=>{V.value=!1}));const Q=r((()=>{var e="";return D.login.bg_url&&(e+="background-image:url("+A(D.login.bg_url)+");",e+="background-size: 100%;",e+="background-position: top;",e+="background-repeat: no-repeat;"),e})),U=(e=null)=>{(S.value||!D.login.agreement_show||(J.value.open(),0))&&(V.value||(V.value=!0,e||(e=()=>{V.value=!1}),W()))},W=()=>{n()&&(G.getAuthCode({scopes:"snsapi_userinfo"}),V.value=!1)},X=()=>{S.value=!S.value};return(e,r)=>{const t=k,a=w,l=C,s=j(L("u-checkbox"),q),o=j(L("u-checkbox-group"),B),p=T,i=j(L("uni-popup"),N);return x(),d(a,{class:"w-screen h-screen",style:h(e.themeColor())},{default:f((()=>[m(a,{class:"w-screen h-screen",style:h(g(Q))},{default:f((()=>[m(a,{class:"mx-[var(--sidebar-m)] px-[var(--pad-sidebar-m)]"},{default:f((()=>[m(a,{class:"pt-[154rpx] flex justify-center"},{default:f((()=>{var e,r;return[(null==(e=g(H).site)?void 0:e.front_end_logo)?(x(),d(a,{key:0,class:"h-[90rpx] w-[300rpx]"},{default:f((()=>{var e;return[m(t,{class:"h-[90rpx] w-[300rpx]",src:g(A)(null==(e=g(H).site)?void 0:e.front_end_logo),mode:"aspectFit"},null,8,["src"])]})),_:1})):(null==(r=g(H).site)?void 0:r.front_end_icon)?(x(),d(a,{key:1,class:"h-[250rpx] w-[250rpx]"},{default:f((()=>{var e;return[m(t,{class:"h-[250rpx] w-[250rpx]",src:g(A)(null==(e=g(H).site)?void 0:e.front_end_icon),mode:"aspectFit"},null,8,["src"])]})),_:1})):(x(),d(a,{key:2,class:"h-[90rpx] w-[300rpx]"}))]})),_:1}),m(a,{class:"text-[var(--text-color-light6)]] text-[28rpx] text-center leading-[34rpx] min-h-[34rpx] mt-[40rpx]"},{default:f((()=>[_(b(g(E).desc),1)])),_:1}),m(a,{class:"mt-[181rpx]"},{default:f((()=>[v(" 微信公众号快捷登录 "),g(n)()&&g(E).is_auth_register?(x(),d(a,{key:0,class:"w-full flex items-center justify-center mb-[40rpx]"},{default:f((()=>[m(l,{class:"w-[630rpx] h-[88rpx] !mx-[0] !bg-[var(--primary-color)] text-[26rpx] rounded-[44rpx] leading-[88rpx] font-500 !text-[#fff]",onClick:r[0]||(r[0]=e=>U())},{default:f((()=>[_(b(g(F)("quickLoginOrLogout")),1)])),_:1})])),_:1})):v("v-if",!0),v(" 手机号登录 "),g(E).is_mobile?(x(),d(a,{key:1,class:"mb-[40rpx] w-full flex items-center justify-center"},{default:f((()=>[m(l,{class:"w-[630rpx] h-[88rpx] !mx-[0] !bg-[#fff] border-[var(--primary-color)] border-solid border-[2rpx] text-[26rpx] rounded-[44rpx] leading-[84rpx] !text-[var(--primary-color)]",onClick:r[1]||(r[1]=e=>g(u)({url:"/app/pages/auth/login",param:{type:"mobile"}}))},{default:f((()=>[_(b(g(F)("mobileLogin")),1)])),_:1})])),_:1})):!g(E).is_mobile&&g(E).is_username?(x(),d(a,{key:2,class:"w-full flex items-center justify-center"},{default:f((()=>[m(l,{class:"w-[630rpx] h-[88rpx] !mx-[0] !bg-[#fff] !border-[var(--primary-color)] border-solid border-[2rpx] text-[26rpx] rounded-[44rpx] leading-[84rpx] !text-[var(--primary-color)]",onClick:r[2]||(r[2]=e=>g(u)({url:"/app/pages/auth/login",param:{type:"username"}}))},{default:f((()=>[_(b(g(F)("accountLogin")),1)])),_:1})])),_:1})):v("v-if",!0),g(E).agreement_show?(x(),d(a,{key:3,class:"w-full flex items-center justify-center mt-[28rpx]"},{default:f((()=>[m(a,{class:"flex items-center justify-center mt-[28rpx] py-[14rpx] px-[50rpx]",onClick:y(X,["stop"])},{default:f((()=>[m(o,{onChange:X},{default:f((()=>[m(s,{activeColor:"var(--primary-color)",checked:S.value,shape:"circle",size:"30rpx"},null,8,["checked"])])),_:1}),m(a,{class:"text-[24rpx] text-[var(--text-color-light6)] flex items-center flex-wrap leading-[30rpx]"},{default:f((()=>[m(p,null,{default:f((()=>[_(b(g(F)("agreeTips")),1)])),_:1}),m(p,{onClick:r[3]||(r[3]=y((e=>g(u)({url:"/app/pages/auth/agreement?key=privacy"})),["stop"])),class:"text-primary"},{default:f((()=>[_("《"+b(g(F)("privacyAgreement"))+"》",1)])),_:1}),m(p,null,{default:f((()=>[_(b(g(F)("and")),1)])),_:1}),m(p,{onClick:r[4]||(r[4]=y((e=>g(u)({url:"/app/pages/auth/agreement?key=service"})),["stop"])),class:"text-primary"},{default:f((()=>[_("《"+b(g(F)("userAgreement"))+"》",1)])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})):v("v-if",!0),g(E).is_mobile&&g(E).is_username?(x(),d(a,{key:4,class:"footer w-full"},{default:f((()=>[m(a,{class:"text-[26rpx] leading-[36rpx] text-[333] text-center mb-[30rpx] font-400"},{default:f((()=>[_(b(g(F)("otherLogin")),1)])),_:1}),m(a,{class:"flex justify-center"},{default:f((()=>[m(a,{class:"h-[80rpx] w-[80rpx] text-center leading-[78rpx] border-[2rpx] text-[#FF7100] rounded-[50%] border-solid border-[#ddd] nc-iconfont nc-icon-wodeV6mm3 text-[46rpx] overflow-hidden",onClick:r[5]||(r[5]=e=>g(u)({url:"/app/pages/auth/login",param:{type:"username"}}))})])),_:1}),m(a,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)] text-center font-400 mt-[30rpx]"},{default:f((()=>[_(b(g(F)("accountLogin")),1)])),_:1})])),_:1})):v("v-if",!0)])),_:1})])),_:1})])),_:1},8,["style"]),m(i,{ref_key:"popupRef",ref:J,type:"dialog"},{default:f((()=>[m(a,{class:"bg-[#fff] flex flex-col justify-between w-[600rpx] min-h-[280rpx] rounded-[var(--rounded-big)] box-border px-[35rpx] pt-[35rpx] pb-[8rpx] relative"},{default:f((()=>[m(a,{class:"flex justify-center"},{default:f((()=>[m(p,{class:"text-[33rpx] font-700"},{default:f((()=>[_(" 用户协议及隐私保护")])),_:1})])),_:1}),m(a,{class:"flex items-center mb-[20rpx] mt-[20rpx] py-[20rpx]",onClick:y(X,["stop"])},{default:f((()=>[m(a,{class:"text-[26rpx] text-[var(--text-color-light6)] flex items-center flex-wrap"},{default:f((()=>[m(p,null,{default:f((()=>[_(b(g(F)("agreeTips")),1)])),_:1}),m(p,{onClick:r[6]||(r[6]=y((e=>g(u)({url:"/app/pages/auth/agreement?key=privacy"})),["stop"])),class:"text-primary"},{default:f((()=>[_("《"+b(g(F)("privacyAgreement"))+"》",1)])),_:1}),m(p,null,{default:f((()=>[_(b(g(F)("and")),1)])),_:1}),m(p,{onClick:r[7]||(r[7]=y((e=>g(u)({url:"/app/pages/auth/agreement?key=service"})),["stop"])),class:"text-primary"},{default:f((()=>[_("《"+b(g(F)("userAgreement"))+"》",1)])),_:1})])),_:1})])),_:1},8,["onClick"]),m(a,{class:""},{default:f((()=>[m(a,{class:"w-[100%] flex justify-center bg-[var(--primary-color)] h-[70rpx] leading-[70rpx] text-[#fff] text-[26rpx] border-[0] font-500 rounded-[50rpx]",onClick:M},{default:f((()=>[_("同意并登录")])),_:1}),m(a,{class:"w-[100%] flex justify-center h-[70rpx] leading-[70rpx] text-[#999] text-[24rpx] border-[0] font-500 rounded-[50rpx]",onClick:K},{default:f((()=>[_("不同意")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-29c13578"]]);export{S as default};
